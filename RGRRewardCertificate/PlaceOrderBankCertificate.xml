<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="596e6dca-07e1-4470-b0e6-e0e4af9be28c" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="PlaceOrderBankCertificate" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="596e6dca-07e1-4470-b0e6-e0e4af9be28cfileName">PlaceOrderBankCertificate</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="calltestcase" name="AddFixedPointImpCert" id="0ebcbe5a-65de-445c-ac17-312c038a067b">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>99dff089-cdad-48ae-a499-779ddc158955</con:targetTestCase>
      <con:properties/>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="ProcessUnassignedCertificate" id="1706a44f-a38f-4e1b-bed0-f80a202b4633">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>a838b25c-744a-4638-9da9-379afc2e51e3</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>CertificateNumber</con:name>
          <con:value>${=java.util.UUID.randomUUID()}</con:value>
        </con:property>
        <con:property>
          <con:name>RewardCode</con:name>
          <con:value>${#[ActivityCertificate#AddFixedPointImpCert#AddReward]#Response#$['RewardCode']}</con:value>
        </con:property>
        <con:property>
          <con:name>BatchJobId</con:name>
          <con:value>${=java.util.UUID.randomUUID()}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="AddProfileRGR" id="67cd8c94-6715-47f5-ae29-a564239d10ed">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>09d0b29f-fbfa-4136-9573-3b813c1795b3</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>ProfileId</con:name>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="AddAdjustment" id="aabbbadc-f9d2-40b4-aac4-9dc82e00096f">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>d3339fb2-45d2-479b-9947-1ea66f3877fa</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>Points</con:name>
          <con:value>50</con:value>
        </con:property>
        <con:property>
          <con:name>ProfileId</con:name>
          <con:value>${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}</con:value>
        </con:property>
        <con:property>
          <con:name>AdjustmentReason</con:name>
          <con:value>PPGOODW</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="AddProfileMulCart" id="f67960f9-d5aa-4b04-a462-13be74d42027">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>9ebbff1b-7202-4274-8a3f-0c718860cfc0</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>RewardId</con:name>
          <con:value>${#[ActivityCertificate#AddFixedPointImpCert#AddReward]#Response#$['RewardId']}</con:value>
        </con:property>
        <con:property>
          <con:name>RewardQuantity</con:name>
          <con:value>1</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="PlaceOrder" id="2ae5c8f5-050f-4d76-8f37-016eb9751e2e">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>d50486a6-8a0c-480c-975e-03563f000b54</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>RewardId</con:name>
          <con:value>${#[ActivityCertificate#AddFixedPointImpCert#AddReward]#Response#$['RewardId']}</con:value>
        </con:property>
        <con:property>
          <con:name>Quantity</con:name>
          <con:value>1</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="GetProfileRewardCertificate" id="dffe2231-82fb-4a56-a977-610c71a9f732">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/profiles/{profileId}/rewards/certificates" methodName="GetProfileRewardCertificates" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="GetProfileRewardCertificate" id="d5988a68-9034-47d0-ae55-7b9dabcbe7cd" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/profiles/aa391948-85cf-479f-967a-5c6a24f07359/rewards/certificates</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="901897f1-a1ef-4ae8-824b-a790250385bf" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="MessageContentAssertion" id="8b91a9eb-61a1-495e-91a7-bfc3052a2d53" name="CertificateNum Validation">
          <con:configuration xsi:type="con:MessageContentAssertion">
            <con:elements>
              <con:xpath>//Response[1]/e[1]/CertificateNumber[1]</con:xpath>
              <con:element>CertificateNumber</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>${#[ActivityOrder#ProcessUnassignedCertificate#ProcessUnassignedCertificate]#Response#$['CertificateNumber']}</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/ProfileId[1]</con:xpath>
              <con:element>ProfileId</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>5f755927-c7b0-44ac-8e66-14c5a952bbe1</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/PriceInPoints[1]</con:xpath>
              <con:element>PriceInPoints</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>15</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/OrderId[1]</con:xpath>
              <con:element>OrderId</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>37bac5ad-0fd8-4924-90e3-8ef62b8cf185</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/RetailValue[1]</con:xpath>
              <con:element>RetailValue</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1.0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/ExpirationDate[1]</con:xpath>
              <con:element>ExpirationDate</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>2022-02-05T23:59:59.999Z</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/ProgramCode[1]</con:xpath>
              <con:element>ProgramCode</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>PP</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/RewardCode[1]</con:xpath>
              <con:element>RewardCode</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>REW_20220125105543</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/Title[1]</con:xpath>
              <con:element>Title</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Test Movie  PP</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/StartDate[1]</con:xpath>
              <con:element>StartDate</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>2019-01-01T00:00:00Z</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/EndDate[1]</con:xpath>
              <con:element>EndDate</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>2025-01-01T00:00:00Z</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/ProgramCost[1]</con:xpath>
              <con:element>ProgramCost</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1.0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/Status[1]</con:xpath>
              <con:element>Status</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>A</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/AccountSourceCode[1]</con:xpath>
              <con:element>AccountSourceCode</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>ALMACCT</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/SourceAccountNumber[1]</con:xpath>
              <con:element>SourceAccountNumber</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>5f755927-c7b0-44ac-8e66-14c5a952bbe1</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/BrandOrgCode[1]</con:xpath>
              <con:element>BrandOrgCode</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>ALM_BRAND</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/ActivityDate[1]</con:xpath>
              <con:element>ActivityDate</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>2022-01-25T05:25:47Z</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/PointTypeShortDescription[1]</con:xpath>
              <con:element>PointTypeShortDescription</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Eggs</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/EffectiveDate[1]</con:xpath>
              <con:element>EffectiveDate</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>2022-01-31T00:00:00Z</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/CertificateStatusDesc[1]</con:xpath>
              <con:element>CertificateStatusDesc</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Active</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/RewardId[1]</con:xpath>
              <con:element>RewardId</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>15827d91-9f3c-455e-816b-4121a89269ba</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/RewardType[1]</con:xpath>
              <con:element>RewardType</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>O</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/CreateUser[1]</con:xpath>
              <con:element>CreateUser</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>AUTO_USER</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/CreateDate[1]</con:xpath>
              <con:element>CreateDate</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>2022-01-25T05:25:47.199851Z</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/UpdateUser[1]</con:xpath>
              <con:element>UpdateUser</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>AUTO_USER</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>//Response[1]/e[1]/UpdateDate[1]</con:xpath>
              <con:element>UpdateDate</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>2022-01-25T05:25:47.199851Z</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:originalMessage><![CDATA[<Response>
   <e>
      <CertificateNumber>0b4f63d0-d8a3-4be6-9d5d-cb3299529299</CertificateNumber>
      <ProfileId>5f755927-c7b0-44ac-8e66-14c5a952bbe1</ProfileId>
      <PriceInPoints>15</PriceInPoints>
      <OrderId>37bac5ad-0fd8-4924-90e3-8ef62b8cf185</OrderId>
      <RetailValue>1.0</RetailValue>
      <ExpirationDate>2022-02-05T23:59:59.999Z</ExpirationDate>
      <ProgramCode>PP</ProgramCode>
      <RewardCode>REW_20220125105543</RewardCode>
      <Title>Test Movie  PP</Title>
      <StartDate>2019-01-01T00:00:00Z</StartDate>
      <EndDate>2025-01-01T00:00:00Z</EndDate>
      <ProgramCost>1.0</ProgramCost>
      <Status>A</Status>
      <AccountSourceCode>ALMACCT</AccountSourceCode>
      <SourceAccountNumber>5f755927-c7b0-44ac-8e66-14c5a952bbe1</SourceAccountNumber>
      <BrandOrgCode>ALM_BRAND</BrandOrgCode>
      <ActivityDate>2022-01-25T05:25:47Z</ActivityDate>
      <PointTypeShortDescription>Eggs</PointTypeShortDescription>
      <EffectiveDate>2022-01-31T00:00:00Z</EffectiveDate>
      <CertificateStatusDesc>Active</CertificateStatusDesc>
      <RewardId>15827d91-9f3c-455e-816b-4121a89269ba</RewardId>
      <RewardType>O</RewardType>
      <CreateUser>AUTO_USER</CreateUser>
      <CreateDate>2022-01-25T05:25:47.199851Z</CreateDate>
      <UpdateUser>AUTO_USER</UpdateUser>
      <UpdateDate>2022-01-25T05:25:47.199851Z</UpdateDate>
   </e>
</Response>]]></con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="bdb5d3de-1fcb-4a05-8316-1a41951abfa3" name="CertificateNumber Validation">
          <con:configuration>
            <path>$..[?(@.CertificateNumber=='${#[ActivityOrder#PlaceOrder#PlaceOrder]#Response#$['OrderDetails'][0]['CertificateNumber']}')].CertificateNumber</path>
            <content>[${#[ActivityOrder#ProcessUnassignedCertificate#ProcessUnassignedCertificate]#Response#$['CertificateNumber']}]</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}"/>
          <con:entry key="rewardCode" value="${#[ActivityCertificate#AddFixedPointImpCert#AddReward]#Response#$['RewardCode']}"/>
          <con:entry key="Accept-Language" value="en-US"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>profileId</con:entry>
          <con:entry>status</con:entry>
          <con:entry>rewardCode</con:entry>
          <con:entry>title</con:entry>
          <con:entry>startDate</con:entry>
          <con:entry>endDate</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="3c955a23-3567-47af-b6e9-aacfcca8d9aa">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>0ebcbe5a-65de-445c-ac17-312c038a067b</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
</con:testCase>
