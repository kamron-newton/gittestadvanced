<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="d2b38d41-8166-406d-b114-e9076a92db96" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="ExecuteCertificateImport" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="d2b38d41-8166-406d-b114-e9076a92db96fileName">ExecuteCertificateImport</con:setting>
  </con:settings>
  <con:testStep type="datasource" name="RewardRedemptionDateTypes" id="e31fd244-cc4c-4558-8d61-e1b51962c834">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="File">
        <con:configuration>
          <fileName>${#Project#ProjectPath}/References/RewardRedemptionDateTypes.csv</fileName>
          <separator>,</separator>
          <trim>true</trim>
          <charset>Cp1252</charset>
          <quotedValues>false</quotedValues>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>ï»¿Attributes</con:property>
      <con:property>PointTypeCode</con:property>
      <con:property>ProgramCode</con:property>
      <con:property>RewardCode</con:property>
      <con:property>CategoryCode</con:property>
      <con:property>StartDate</con:property>
      <con:property>EndDate</con:property>
      <con:property>RewardType</con:property>
      <con:property>RewardUsage</con:property>
      <con:property>Title</con:property>
      <con:property>Description</con:property>
      <con:property>Manufacturer</con:property>
      <con:property>ProgramCost</con:property>
      <con:property>RetailPrice</con:property>
      <con:property>FixedPoints</con:property>
      <con:property>ShippingInfoRequired</con:property>
      <con:property>DisplayInCatalog</con:property>
      <con:property>RetailPricePerPoint</con:property>
      <con:property>CertificateInd</con:property>
      <con:property>IssueDateBasedRTC</con:property>
      <con:property>DaysValid</con:property>
      <con:property>FixedDateRangeRTC</con:property>
      <con:property>RedemptionStartDate</con:property>
      <con:property>RedemptionEndDate</con:property>
      <con:property>FlexibleDateRangeRTC</con:property>
      <con:property>DaysFlexibleDaysValid</con:property>
      <con:property>DaysFlexibleDaysRedemptionStarts</con:property>
      <con:property>RewardUsageTypeId</con:property>
      <con:property>RewardUsageTypeIdVarpoint</con:property>
      <con:property>MinValue</con:property>
      <con:property>MaxValue</con:property>
      <con:property>BurnRatioCurrencyValue</con:property>
      <con:property>BurnRatioPointValue</con:property>
      <con:startRow>1</con:startRow>
      <con:endRow/>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="RunEnableBatchS3DefaultSetting" id="243001d1-0eba-4b75-ad6a-fde885df2e3c">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>691913d9-d56f-409d-bc92-80cc04799067</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>BatchS3DefaultSettingId</con:name>
          <con:value>712a1b34-9c52-db49-8034-6010ab6fe88e</con:value>
        </con:property>
        <con:property>
          <con:name>BatchS3EnabledOriginal</con:name>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>BatchS3DefaultSettingId</con:entry>
      </con:returnProperties>
      <con:runMode>PARALLELL</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="RunExecuteBatchWorkFlowforCertificateImport" id="b8859599-bcd2-4fea-90e6-b455f3945313">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>493c35b3-7a9e-4c79-a0c4-3423fbf93331</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>DataHubProcessDefinitionKey</con:name>
          <con:value>Automation_Certification_Import</con:value>
        </con:property>
        <con:property>
          <con:name>DataHubProcessId</con:name>
          <con:value>e6013bfe-b5a3-11ec-8bcb-028e85891005</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>DataHubProcessId</con:entry>
      </con:returnProperties>
      <con:runMode>PARALLELL</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="RunAddUpdateDeployReloadScripts" id="4db9539e-2879-4404-96dd-24c46fa66ac0">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>8ab8ee29-e996-497f-8eb6-78c733f3d9c1</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>ScriptId</con:name>
          <con:value>8e22b2ea-44ee-4989-a67f-c86bee3abc6c</con:value>
        </con:property>
        <con:property>
          <con:name>ScriptName</con:name>
          <con:value>GenerateFileContentInS3</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>ScriptId</con:entry>
      </con:returnProperties>
      <con:runMode>PARALLELL</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="datasource" name="CertificateLayoutDataSource" id="97f6a313-b939-411b-a6ba-94f3e7fce71c">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="Data Generator">
        <con:configuration>
          <generatedDataCount>1</generatedDataCount>
          <generatorsTotalNumber>2</generatorsTotalNumber>
          <lastSelectedProperty>0</lastSelectedProperty>
          <GeneratorType0>GUID</GeneratorType0>
          <PropertyName0>JobName</PropertyName0>
          <repetitionCountJobName>0</repetitionCountJobName>
          <repeatValuesJobName>false</repeatValuesJobName>
          <GeneratorType1>GUID</GeneratorType1>
          <PropertyName1>FileName</PropertyName1>
          <repetitionCountFileName>0</repetitionCountFileName>
          <repeatValuesFileName>false</repeatValuesFileName>
          <escapeSpaceSequence/>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>JobName</con:property>
      <con:property>FileName</con:property>
      <con:restartOnRun>true</con:restartOnRun>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="AddReward" id="3515e1b4-ce7f-4946-9a27-09f26e55ac2c">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>8028090a-f76a-4729-aa39-c4ce71d5e0e4</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>Body</con:name>
          <con:value>{   "RewardCode":"REW_${=new java.text.SimpleDateFormat("yyyyMMddHHmmss").format(new Date())}",    "StartDate": "${RewardRedemptionDateTypes#StartDate}",     "EndDate": "${RewardRedemptionDateTypes#EndDate}",        "RewardType": "${RewardRedemptionDateTypes#RewardType}",     "PointTypeCode": "${RewardRedemptionDateTypes#PointTypeCode}",      "RewardUsageTypeId":"${RewardRedemptionDateTypes#RewardUsageTypeId}",       "Description": "${RewardRedemptionDateTypes#Description}",      "Title": "${RewardRedemptionDateTypes#Title}",    "Manufacturer": "${RewardRedemptionDateTypes#Manufacturer}",    "RetailPrice": "${RewardRedemptionDateTypes#RetailPrice}" ,    "ProgramCost": "${RewardRedemptionDateTypes#ProgramCost}",    "CategoryCode": "${RewardRedemptionDateTypes#CategoryCode}",     "FixedPoints": "${RewardRedemptionDateTypes#FixedPoints}",    "ShippingInfoRequired": "${RewardRedemptionDateTypes#ShippingInfoRequired}",     "DisplayInCatalog": "${RewardRedemptionDateTypes#DisplayInCatalog}",    "CertificateInd": "${RewardRedemptionDateTypes#CertificateInd}",    "ImportedCertificateIndicator" : "True",    "RedemptionTypeCode": "${RewardRedemptionDateTypes#IssueDateBasedRTC}",    "DaysValid": "${RewardRedemptionDateTypes#DaysValid}",    "CertificateType" : "IMPORTED" }</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="GetRewardByCode" id="8cbc4f81-544e-4460-9ea5-9ed8a9689121">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/referencedata/rewards/rewards/{rewardCode}" methodName="GetRewardByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="GetRewardByCode" id="2cac3c06-239f-407b-b046-7e23810f6fb0" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://q3alin-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="81f59900-82df-4403-8dbd-ce3adfdaf955" name="Smart Assertion for HTTP Status Codes">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Wed, 09 Mar 2022 17:19:44 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1691</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>743b208c-cea4-9874-1d51-54b9d373ac85</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>19ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>3</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK,HTTP/1.1 404 Not Found</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMG1OK8GNBTP:000005A8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Wed, 09 Mar 2022 17:19:44 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"1691","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"743b208c-cea4-9874-1d51-54b9d373ac85","content-type":"application/json; charset=utf-8","process-time":"19ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMG1OK8GNBTP:000005A8"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="rewardCode" value="${#[ActivityCertificate#AddRewardCert#AddReward]#Response#$['RewardCode']}"/>
          <con:entry key="Accept-Language" value="en-US"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>profileId</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>rewardCode</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="d653788f-b849-4013-8db6-47ad297cdee5">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c955a23-3567-47af-b6e9-aacfcca8d9aa">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="transfer" name="TransferPropertiesToCertificateLayout" id="88acf15f-51b7-4c8d-8efc-2ec70d0cf3b6">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>RewardCode</con:name>
        <con:sourceType>Response</con:sourceType>
        <con:sourceStep>GetRewardByCode</con:sourceStep>
        <con:sourcePath>$['RewardCode']</con:sourcePath>
        <con:targetType>RewardCode</con:targetType>
        <con:targetStep>CertificateLayoutProperties</con:targetStep>
        <con:targetPath/>
        <con:type>JSONPATH</con:type>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>CertificateNumber</con:name>
        <con:sourceType>DataHubProcessId</con:sourceType>
        <con:sourceStep>RunExecuteBatchWorkFlowforCertificateImport</con:sourceStep>
        <con:targetType>CertificateNumber</con:targetType>
        <con:targetStep>CertificateLayoutProperties</con:targetStep>
        <con:type>JSONPATH</con:type>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep type="properties" name="CertificateLayoutProperties" id="f2606719-7c56-43fa-a236-934299e275bb">
    <con:settings/>
    <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:properties>
        <con:property>
          <con:name>CertificateId</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ProgramCode</con:name>
          <con:value>PP</con:value>
        </con:property>
        <con:property>
          <con:name>RewardCode</con:name>
          <con:value>REW_20220406175009</con:value>
        </con:property>
        <con:property>
          <con:name>CertificateNumber</con:name>
          <con:value>e6013bfe-b5a3-11ec-8bcb-028e85891005</con:value>
        </con:property>
        <con:property>
          <con:name>JsonExternalData</con:name>
          <con:value/>
        </con:property>
      </con:properties>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="CreateCertificateImportFile" id="8d168391-695b-4149-8b36-8730cc14bc2c">
    <con:settings/>
    <con:config>
      <script>import groovy.json.JsonGenerator
import groovy.json.JsonGenerator.Converter

def certificateLayoutList = testRunner.testCase.getTestSteps().CertificateLayoutProperties.getPropertyList();

def parseCollection(propertyList){  	
	def mapClass = [:]
	for( item in propertyList)
	{
		if( item.value == null  ){
			 item.value= '';
		}
	    mapClass[item.name] = item.value;	  
	}    
	return mapClass;
}

def jsonDefaultOutput = new JsonGenerator.Options()
.dateFormat('MM-dd-yyyy')
.build(); 

def certificateString = parseCollection(certificateLayoutList);

def s3Bucket = context.expand( '${#Project#S3Bucket}' )
def todayDate = new Date().format( 'MM-dd-yyyy' );
def jobName = context.expand( '${CertificateLayoutDataSource#JobName}' )
def programCode = context.expand( '${#Project#ProgramCode}' )
def fileContent =  [certificateString ];
def scriptName = context.expand( '${#TestCase#ScriptName}' )

def jsonExternalDataMap = [:]
def dataHubProcessId = context.expand( '${RunExecuteBatchWorkFlowforCertificateImport#DataHubProcessId}' )


def fileName = 'CertificateImport' + dataHubProcessId  + '.txt';
jsonExternalDataMap["FileName"]  = fileName;
jsonExternalDataMap["FileLocation"]  = "s3://" + s3Bucket + "/automation/ProcessCertificateInput";
jsonExternalDataMap["FileContent"] = fileContent;
jsonExternalDataMap["UseHeader"] = 'false';

def batchInputJsonMap = [:];
batchInputJsonMap["JobName"] = 'InvokeScript_' + jobName;
batchInputJsonMap["FileName"] = fileName;
batchInputJsonMap["FileInputLocation"] = "s3://" + s3Bucket + "/automation/" + todayDate + "/Input";
batchInputJsonMap["FileOutputLocation"] = "s3://" + s3Bucket + "/automation/" + todayDate + "/Output";
batchInputJsonMap["EmailAddresses"]= "";
batchInputJsonMap["JobTypeId"]= "4923d185-0c86-4c15-9356-67597ab70526";
batchInputJsonMap["JobType"]= "";
batchInputJsonMap["ProgramCode"]= programCode;
batchInputJsonMap["DataOutputType"]= "FULL";
batchInputJsonMap["MaxThreads"]= 50;

batchInputJsonMap["ScriptName"] =  scriptName;
batchInputJsonMap["JsonExternalData"]= jsonExternalDataMap;
batchInputJsonMap["AdditionalRunData"]= "";

def batchInputJson = jsonDefaultOutput.toJson(batchInputJsonMap);

return batchInputJson;</script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="CreateBatchJob" id="7c0a80d3-7a2c-482a-b595-1a4927f1b2b4">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/batch/jobs" methodName="Create Batch Job" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="CreateBatchJob" id="0121f0fe-0b53-489c-8475-2dee938e777f" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>${CreateCertificateImportFile#result}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/batch/jobs</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="796fb13f-e118-4c88-a25d-edee552377b0" name="Smart Assertion for HTTP Status Code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Wed, 06 Apr 2022 11:19:03 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1218</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>845af26d-e0d5-3622-70f0-5e72f71418da</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['location']</con:path>
              <con:element>location</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>http://q3alin-pveapi.skynetlowerenv.com/api/v1/batch/jobs</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>24ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 201 Created</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMGNNJSTU84T:00000037</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Wed, 06 Apr 2022 11:19:03 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"1218","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"845af26d-e0d5-3622-70f0-5e72f71418da","content-type":"application/json; charset=utf-8","location":"http://q3alin-pveapi.skynetlowerenv.com/api/v1/batch/jobs","process-time":"24ms","#status#":"HTTP/1.1 201 Created","cache-control":"no-store,no-cache","new-correlationid":"0HMGNNJSTU84T:00000037"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>Authorization</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Program-Code</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="goto" name="IfBatchJobIdDoesNotExist" id="f17eb865-8fac-497b-b643-41516b0b9bbd">
    <con:settings/>
    <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:condition>
        <con:name>BatchJobId</con:name>
        <con:type>XPATH</con:type>
        <con:expression>!exists(//*:Response[1]/*:BatchJobId)</con:expression>
        <con:targetStep>Smart Assertion for HTTP Status Code</con:targetStep>
      </con:condition>
    </con:config>
  </con:testStep>
  <con:testStep type="transfer" name="TransferSysBatchJobIdAndDatahubProcessId" id="b7652ba9-925f-489f-a589-b4b0e22e9b9b">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" transferChildNodes="false">
        <con:name>BatchJobId</con:name>
        <con:sourceType>Response</con:sourceType>
        <con:sourceStep>CreateBatchJob</con:sourceStep>
        <con:sourcePath>$['BatchJobId']</con:sourcePath>
        <con:targetType>SysJobID</con:targetType>
        <con:targetStep>RunBatchJobStatusValidation</con:targetStep>
        <con:targetPath/>
        <con:type>JSONPATH</con:type>
        <con:targetTransferType>JSONPATH</con:targetTransferType>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>DatahubWorkflowProcessId</con:name>
        <con:sourceType>DataHubProcessId</con:sourceType>
        <con:sourceStep>RunExecuteBatchWorkFlowforCertificateImport</con:sourceStep>
        <con:sourcePath/>
        <con:targetType>DatahubProcessId</con:targetType>
        <con:targetStep>RunDatahubWorkflowValidation</con:targetStep>
        <con:targetTransferType>JSONPATH</con:targetTransferType>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="RunBatchJobStatusValidation" id="de6d5367-a05b-4102-962b-561c09df6010">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>a2770463-9651-4187-96b0-e0f5fb77f889</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>SysJobID</con:name>
          <con:value>2b4c0d64-32f8-4a18-ac26-3aff7e0e2853</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>PARALLELL</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="SendDatahubWorkflowResumeMessage" id="598ef3a4-d1cf-4ef2-9d90-db92f6d3b2ee">
    <con:settings/>
    <con:config service="DatahubAPIs" resourcePath="/orchestration/v1/process-instance/resume" methodName="ResumeWorkFlow" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="SendDatahubWorkflowResumeMessage" id="fbab81a6-bfc0-4489-b4d8-80bf4a5ab419" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:request>{
  "messageName": "Message_Resume",
  "processInstanceIds": [
    "${RunExecuteBatchWorkFlowforCertificateImport#DataHubProcessId}"
  ]
}</con:request>
        <con:originalUri>https://u-acpapi.datahub.epsilon.com/orchestration/v1/process-instance/resume</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="2b9e0af5-138f-4c6c-9c2f-0c7e2773d13b" name="Smart Assertion for HTTP Status Code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Wed, 06 Apr 2022 11:22:01 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['set-cookie']</con:path>
              <con:element>set-cookie</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>[XSRF-TOKEN=065dffef-78d9-465a-8158-a52720ca117d; Path=/, SERVERID=nodeA; path=/]</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['expires']</con:path>
              <con:element>expires</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1; mode=block</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-client-request-id']</con:path>
              <con:element>x-client-request-id</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>b75b0f2d-f5a0-487c-8a21-20f047872ad3</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache, no-store, max-age=0, must-revalidate</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Wed, 06 Apr 2022 11:22:01 GMT","set-cookie":"[XSRF-TOKEN=065dffef-78d9-465a-8158-a52720ca117d; Path=/, SERVERID=nodeA; path=/]","content-length":"0","expires":"0","x-content-type-options":"nosniff","x-xss-protection":"1; mode=block","x-client-request-id":"b75b0f2d-f5a0-487c-8a21-20f047872ad3","x-frame-options":"DENY","connection":"keep-alive","#status#":"HTTP/1.1 200 OK","cache-control":"no-cache, no-store, max-age=0, must-revalidate","pragma":"no-cache"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="Bearer ${#Project#Datahub Orchestration Token}"/>
          <con:entry key="X-ADH-Tenant-Code" value="${#Project#Tenant}"/>
          <con:entry key="Content-Type" value="application/json"/>
          <con:entry key="accept" value="application/json"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>Authorization</con:entry>
          <con:entry>Content-Type</con:entry>
          <con:entry>X-ADH-Tenant-Code</con:entry>
          <con:entry>accept</con:entry>
        </con:parameterOrder>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="RunDatahubWorkflowValidation" id="2ad60595-c561-4333-9c6b-cca525d7adda">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>281bbad6-502b-44e0-b592-5707e4881889</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>DatahubProcessId</con:name>
          <con:value>e6013bfe-b5a3-11ec-8bcb-028e85891005</con:value>
        </con:property>
        <con:property>
          <con:name>LoopCount</con:name>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>LoopCount</con:entry>
      </con:returnProperties>
      <con:runMode>PARALLELL</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="BatchS3Disable" id="31b67b82-a765-432c-a07a-abd88120a950">
    <con:settings/>
    <con:config service="RestAPIs" methodName="UpdateDefaultSetting" resourcePath="/api/v1/referencedata/programs/defaultsettings/{defaultSettingId}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="BatchS3Disable" id="02982e52-8357-4991-a1c4-561796f8ba25" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
    "ParameterName":  "BATCH_S3_ENABLED",
    "ParameterValue":  "N"
 }</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/referencedata/programs/defaultsettings/</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="e5b6a1a5-898a-4345-8d6d-c003af71b567" name="Smart Assertion for HTTP Status Code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Wed, 06 Apr 2022 11:21:56 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>205</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>7b026a99-7bfb-a7d0-820f-eb728b227cff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>24ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMGNNJSTU84V:00000066</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Wed, 06 Apr 2022 11:21:56 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"205","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"7b026a99-7bfb-a7d0-820f-eb728b227cff","content-type":"application/json; charset=utf-8","process-time":"24ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMGNNJSTU84V:00000066"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="defaultSettingId" value="${RunEnableBatchS3DefaultSetting#BatchS3DefaultSettingId}"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="content" value="application/json"/>
        </con:parameters>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>ScriptId</con:name>
      <con:value>1861ebfa-7c1d-4f6c-a7c5-def46c6ed6af</con:value>
    </con:property>
    <con:property>
      <con:name>ScriptName</con:name>
      <con:value>GenerateFileContentInS3</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
</con:testCase>
