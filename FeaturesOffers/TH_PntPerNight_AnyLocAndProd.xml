<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="320357f6-a192-473e-bb03-d3f21efb7439" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="TH_PntPerNight_AnyLocAndProd" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="320357f6-a192-473e-bb03-d3f21efb7439fileName">TH_PntPerNight_AnyLocAndProd</con:setting>
  </con:settings>
  <con:testStep type="restrequest" name="AddPntsPerNightWithAnyDetails" id="c7cb52dc-e86f-4946-be2a-aa7936461ff3">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/engage/marketingevent" methodName="ProcessMarketingEvent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="AddPntsPerNightWithAnyDetails" id="c3da61b0-81ba-449f-abb7-d1e58290c294" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
	
	"MarketingEventChannels": [{
		
		"MarketingEventChannelId": "bce4fc4f-1b7d-2d49-b498-cea4e90a6105",
		"ChannelName": "No Channel"
	}],
	"EventName": "OFFER_NAME${=new java.text.SimpleDateFormat("mmddyyyyhhmmssmmm").format(new Date())}",
	"EventCode": "OFFER_CODE${=new java.text.SimpleDateFormat("mmddyyyyhhmmssmmm").format(new Date())}",
	"EventStatus": "DRAFT",
	
	"PackagedAudience": {
		"PackagedAudienceId": "7ae1f987-515e-4669-e053-5ca8e70ad3ee",		
		"AudienceName": "All Members",	
	},
	"AudienceSource": "PACKAGED_AUDIENCE",
	"PackagedOffer": {
		"PackagedOfferId": "55be04c5-7161-dd5d-e053-40f1ef0aa1b6",
		
		"PackagedOfferCode": "FIXED_POINTS_PER_NIGHT",
		"PackagedOfferName": "Earn points for nights",
		"PackagedOfferParams": [{
			
			"PackagedOfferParamId": "55be04c5-7561-dd5d-e053-40f1ef0aa1b6",
			"PackagedOfferId": "55be04c5-7161-dd5d-e053-40f1ef0aa1b6",
			"ParamName": "Point Amount",
			"ParamCode": "POINT_AMT",
			"Value": "10",
			"PanelId": "e0e698ac-4291-d25d-e053-5dedef0ac6ef",
			"PanelCode": "CUSTOMER_REWARD"
		}, {
			
			"PackagedOfferParamId": "55be04c5-7261-dd5d-e053-40f1ef0aa1b6",
			"PackagedOfferId": "55be04c5-7161-dd5d-e053-40f1ef0aa1b6",
			"ParamName": "Minimum nights (optional)",
			"ParamCode": "MINIMUM_NIGHTS",
			"Value": "2",
			"PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
			"PanelCode": "CUSTOMER_ACTIVITY"
		}, {
			
			"PackagedOfferParamId": "55be04c5-7661-dd5d-e053-40f1ef0aa1b6",
			"PackagedOfferId": "55be04c5-7161-dd5d-e053-40f1ef0aa1b6",
			"ParamName": "Maximum offers per member (optional)",
			"ParamCode": "MAX_OFFERS_PER_MEMBER",
			"Value": "2",
			"PanelId": "e0e698ac-4391-d25d-e053-5dedef0ac6ef",
			"PanelCode": "OFFER_LIMITS"
		}, {
			
			"PackagedOfferParamId": "55be04c5-7361-dd5d-e053-40f1ef0aa1b6",
			"PackagedOfferId": "55be04c5-7161-dd5d-e053-40f1ef0aa1b6",
			"ParamName": "Purchase",
			"ParamCode": "OPTIONALPRODUCT",
			"Value": "Any rate code / product category",
			"ParamCustomValue": {
				"ProductLevelList": [],
				"ProductCode": [],
				"DisplayProductCode": [],
				"ProductSelectType": 2
			},
			"PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
			"PanelCode": "CUSTOMER_ACTIVITY"
		}, {
			
			"PackagedOfferParamId": "55be04c5-7761-dd5d-e053-40f1ef0aa1b6",
			"PackagedOfferId": "55be04c5-7161-dd5d-e053-40f1ef0aa1b6",
			"ParamName": "Maximum points issued per member (optional)",
			"ParamCode": "MAX_POINTS_PER_MEMBER",
			"Value": "20",
			"PanelId": "e0e698ac-4391-d25d-e053-5dedef0ac6ef",
			"PanelCode": "OFFER_LIMITS"
		}, {
			
			"PackagedOfferParamId": "55be04c5-7861-dd5d-e053-40f1ef0aa1b6",
			"PackagedOfferId": "55be04c5-7161-dd5d-e053-40f1ef0aa1b6",
			"ParamName": "Maximum points issued per transaction (optional)",
			"ParamCode": "MAX_POINTS_PER_TRANSACTION",
			"Value": "10",
			"PanelId": "e0e698ac-4391-d25d-e053-5dedef0ac6ef",
			"PanelCode": "OFFER_LIMITS"
		}, {
			
			"PackagedOfferParamId": "55be04c5-7461-dd5d-e053-40f1ef0aa1b6",
			"PackagedOfferId": "55be04c5-7161-dd5d-e053-40f1ef0aa1b6",
			"ParamName": "Visit",
			"ParamCode": "OPTIONALLOCATION",
			"Value": "Any location",
			"ParamCustomValue": {
				"StoreCode": [],
				"DisplayStoreCode": [],
				"LocationSelectType": 2
			},
			"PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
			"PanelCode": "CUSTOMER_ACTIVITY"
		}],
		"PackagedOfferCategoryId": "17872aea-5187-8d43-a4be-555c17300611",
		"PackagedOfferCategoryCode": "TEMPLATES"
	},
	"OfferStartDate": "${=new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ").format(new Date()-5)}",
	"OfferEndDate": "${=new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ").format(new Date()+2)}",
	"Status": "A",
}</con:request>
        <con:originalUri>https://d2aldv-pveapi.skynetlowerenv.com/api/v1/engage/marketingevent</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="59408604-5959-4211-88dd-0d910aa440fd" name="Smart Assertion for HTTP status code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Tue, 05 Apr 2022 07:05:20 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>4158</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>6f2611a5-6cb1-92f6-b97e-0b0a94fba2ba</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1452ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMGMGV10NOG2:00000014</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Tue, 05 Apr 2022 07:05:20 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"4158","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"6f2611a5-6cb1-92f6-b97e-0b0a94fba2ba","content-type":"application/json; charset=utf-8","process-time":"1452ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMGMGV10NOG2:00000014"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="validateOffer" value="false"/>
          <con:entry key="validateAudience" value="false"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>validateAudience</con:entry>
          <con:entry>validateOffer</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
          <con:entry>Program-Code</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="ApproveMarketingEvent" id="7baba6c7-6a6c-4a37-9298-4da445b1b822">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>ac44e245-733a-4139-a950-3f774b513c3b</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>EventCode</con:name>
          <con:value>${AddPntsPerNightWithAnyDetails#Response#$['EventCode']}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="Delay 2s" id="e3660304-cde3-4cfc-9427-9a4e33bd4d98">
    <con:settings/>
    <con:config>
      <delay>2000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="DeployMarketingEvent" id="451c3a37-44fd-4942-b7e2-6c92b12de9b3">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>4e31c31c-5e5f-4dab-8caf-7c5cf7fef68f</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>EventCode</con:name>
          <con:value>${ApproveMarketingEvent#EventCode}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
</con:testCase>
