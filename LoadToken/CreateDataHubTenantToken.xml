<?xml version="1.0" encoding="UTF-8"?>
<con:testCase discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" id="15de597e-f415-4e1d-90b7-3abb93431827" keepSession="false" name="CreateDataHubTenantToken" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="15de597e-f415-4e1d-90b7-3abb93431827fileName">CreateDataHubTenantToken</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="restrequest" name="CreateDatahubTenantToken" id="2a5aedde-df18-4a42-9072-9d3f9663ae5e">
    <con:settings/>
    <con:config service="DatahubTokenAPIs" resourcePath="/Epsilon/oauth2/access_token" methodName="CreateToken" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="CreateDatahubTenantToken" id="ad9af13c-6e09-4078-873f-bcda97ed8b99" mediaType="application/x-www-form-urlencoded" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://stgapi-public.cls.epsilon.com</con:endpoint>
        <con:request>grant_type=password&amp;username=adh_loyalty_user&amp;password=Ep5@dH6@ly7&amp;scope=cn mail sn givenname uid employeeNumber</con:request>
        <con:originalUri>https://stgapi-public.cls.epsilon.com/Epsilon/oauth2/access_token</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="7e49ddef-a1ba-4faf-9234-f5b3d3a93116" name="Smart Assertion - Validating HTTP Status Code 200">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Mon, 04 Apr 2022 17:31:01 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['set-cookie']</con:path>
              <con:element>set-cookie</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>SCLAUTHSERVERID=sa2udtlhapp627; path=/</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1621</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Mon, 04 Apr 2022 17:31:01 GMT","set-cookie":"SCLAUTHSERVERID=sa2udtlhapp627; path=/","content-length":"1621","connection":"keep-alive","content-type":"application/json","#status#":"HTTP/1.1 200 "}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="Basic ZGhhZG1pbl9sb3lhbHR5X3VzZXI6RXA1QGRINkBkaGEx"/>
          <con:entry key="realm" value="/datahubadmin"/>
          <con:entry key="Content-Type" value="application/x-www-form-urlencoded"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>realm</con:entry>
          <con:entry>Content-Type</con:entry>
          <con:entry>Authorization</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="6705507e-ac0c-4a4b-acac-36b4c8b57bc6">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep id="ac292bc0-f0c1-462d-99da-ff15a6745824" name="TransferTenantTokenToProjectProps" type="transfer">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false">
        <con:name>DataHubTenantToken</con:name>
        <con:sourceType>Response</con:sourceType>
        <con:sourceStep>CreateDatahubTenantToken</con:sourceStep>
        <con:sourcePath>$['access_token']</con:sourcePath>
        <con:targetType>Datahub Token</con:targetType>
        <con:targetStep>#Project#</con:targetStep>
        <con:targetPath/>
        <con:type>JSONPATH</con:type>
        <con:targetTransferType>JSONPATH</con:targetTransferType>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>b1508ede-743b-4cac-a0ed-bc91347ce811</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>41808063-89de-441f-8fac-281fb81cd608</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>2a5aedde-df18-4a42-9072-9d3f9663ae5e</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:environmentSpec>
    <con:entry environmentId="e460ab9c-c6df-4159-a900-cca111c2e400">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="120f0817-c2aa-498a-ba10-54f000886d16">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="d653788f-b849-4013-8db6-47ad297cdee5">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="3c955a23-3567-47af-b6e9-aacfcca8d9aa">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="6705507e-ac0c-4a4b-acac-36b4c8b57bc6">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>
