<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="89b6e1dd-cb59-427f-8538-071794d4fe6b" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="UpsertTable" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="89b6e1dd-cb59-427f-8538-071794d4fe6bfileName">UpsertTable</con:setting>
  </con:settings>
  <con:testStep type="datasource" name="MetadataTable" id="afd489c5-907d-4e5e-9a00-d5df62be96cc">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="File">
        <con:configuration>
          <fileName>${#Project#ProjectPath}/References/MetadataTable.csv</fileName>
          <separator>,</separator>
          <trim>true</trim>
          <charset>Cp1252</charset>
          <quotedValues>true</quotedValues>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>Name</con:property>
      <con:property>Description</con:property>
      <con:property>SqlName</con:property>
      <con:property>Schema</con:property>
      <con:property>SubjectArea</con:property>
      <con:property>IsView</con:property>
      <con:property>Ddl</con:property>
      <con:property>Column1_Name</con:property>
      <con:property>Column1_Description</con:property>
      <con:property>Column1_SqlName</con:property>
      <con:property>Column1_DataType</con:property>
      <con:property>Column1_IsPrimaryKey</con:property>
      <con:property>Column1_IsIdentity</con:property>
      <con:property>Column1_IsNullable</con:property>
      <con:property>Column1_DefaultValue</con:property>
      <con:property>Column2_Name</con:property>
      <con:property>Column2_Description</con:property>
      <con:property>Column2_SqlName</con:property>
      <con:property>Column2_DataType</con:property>
      <con:property>Column2_IsPrimaryKey</con:property>
      <con:property>Column2_IsIdentity</con:property>
      <con:property>Column2_IsNullable</con:property>
      <con:property>Column2_DefaultValue</con:property>
      <con:property>Column3_Name</con:property>
      <con:property>Column3_Description</con:property>
      <con:property>Column3_SqlName</con:property>
      <con:property>Column3_DataType</con:property>
      <con:property>Column3_IsPrimaryKey</con:property>
      <con:property>Column3_IsIdentity</con:property>
      <con:property>Column3_IsNullable</con:property>
      <con:property>Column3_DefaultValue</con:property>
      <con:property>Column4_Name</con:property>
      <con:property>Column4_Description</con:property>
      <con:property>Column4_SqlName</con:property>
      <con:property>Column4_DataType</con:property>
      <con:property>Column4_IsPrimaryKey</con:property>
      <con:property>Column4_IsIdentity</con:property>
      <con:property>Column4_IsNullable</con:property>
      <con:property>Column4_DefaultValue</con:property>
      <con:property>Column5_Name</con:property>
      <con:property>Column5_Description</con:property>
      <con:property>Column5_SqlName</con:property>
      <con:property>Column5_DataType</con:property>
      <con:property>Column5_IsPrimaryKey</con:property>
      <con:property>Column5_IsIdentity</con:property>
      <con:property>Column5_IsNullable</con:property>
      <con:property>Column5_DefaultValue</con:property>
      <con:property>Column6_Name</con:property>
      <con:property>Column6_Description</con:property>
      <con:property>Column6_SqlName</con:property>
      <con:property>Column6_DataType</con:property>
      <con:property>Column6_IsPrimaryKey</con:property>
      <con:property>Column6_IsIdentity</con:property>
      <con:property>Column6_IsNullable</con:property>
      <con:property>Column6_DefaultValue</con:property>
      <con:startRow>1</con:startRow>
      <con:endRow/>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
      <con:stopDatasourceExhausted>false</con:stopDatasourceExhausted>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="GetAllTablesBySqlNameAndSchema" id="5c954635-e11b-47cb-a596-9449c23f1ee8">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/unite/metadata/tables" methodName="GetAllTables" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="GetAllTablesBySqlNameAndSchema" id="15fd5d78-502b-4a17-86eb-68c6fcd8fa45" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/unite/metadata/tables</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="f00df14a-d9f6-414c-9f4f-a5b8899a5aad" name="Smart Assertion for HTTP Status Code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Thu, 23 Jun 2022 16:31:51 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>450</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>512c532b-ca99-98ca-39a9-a4f44aa068fb</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>13ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>3</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK,HTTP/1.1 404 Not Found</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMIL19DJT7V6:00000002</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Thu, 23 Jun 2022 16:31:51 GMT","content-length":"450","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"512c532b-ca99-98ca-39a9-a4f44aa068fb","content-type":"application/json; charset=utf-8","process-time":"13ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMIL19DJT7V6:00000002"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="schema" value="${MetadataTable#Schema}"/>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="sqlName" value="${MetadataTable#SqlName}"/>
          <con:entry key="Content-Type" value="application/json"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>sqlName</con:entry>
          <con:entry>schema</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Content-Type</con:entry>
        </con:parameterOrder>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="TableCondition" id="2c2bcff8-2fbd-4e40-a492-b739433014c0">
    <con:settings/>
    <con:config>
      <script>import static com.jayway.jsonpath.JsonPath.parse
def TableId = context.expand( '${GetAllTablesBySqlNameAndSchema#Response#$[0][\'TableId\']}' )

if (TableId == "" || TableId == null ) 
	testRunner.gotoStepByName("AddTable") 
else  	
	testRunner.gotoStepByName("TableId")</script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="AddTable" id="69ea734b-d09d-4a8d-bd00-eb90662c611b">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/unite/metadata/tables" methodName="AddTable" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="AddTable" id="64681f0d-a6e9-4ca2-b909-743b48be2ecf" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
  "Name": "${MetadataTable#Name}",
  "Description": "${MetadataTable#Description}",
  "SqlName": "${MetadataTable#SqlName}",
  "Schema": "${MetadataTable#Schema}",
  "SubjectArea": "${MetadataTable#SubjectArea}",
  "IsView": ${MetadataTable#IsView},
  "Ddl": "${MetadataTable#Ddl}",
  "Columns": [
    {
      "Name": "${MetadataTable#Column1_Name}",
      "Description": "${MetadataTable#Column1_Description}",
      "SqlName": "${MetadataTable#Column1_SqlName}",
      "DataType": "${MetadataTable#Column1_DataType}",
      "IsPrimaryKey": ${MetadataTable#Column1_IsPrimaryKey},
      "IsIdentity": ${MetadataTable#Column1_IsIdentity},
      "IsNullable": ${MetadataTable#Column1_IsNullable},
      "DefaultValue": "${MetadataTable#Column1_DefaultValue}"
    },
    {
      "Name": "${MetadataTable#Column2_Name}",
      "Description": "${MetadataTable#Column2_Description}",
      "SqlName": "${MetadataTable#Column2_SqlName}",
      "DataType": "${MetadataTable#Column2_DataType}",
      "IsPrimaryKey": ${MetadataTable#Column2_IsPrimaryKey},
      "IsIdentity": ${MetadataTable#Column2_IsIdentity},
      "IsNullable": ${MetadataTable#Column2_IsNullable},
      "DefaultValue": "${MetadataTable#Column2_DefaultValue}"
    },
    {
      "Name": "${MetadataTable#Column3_Name}",
      "Description": "${MetadataTable#Column3_Description}",
      "SqlName": "${MetadataTable#Column3_SqlName}",
      "DataType": "${MetadataTable#Column3_DataType}",
      "IsPrimaryKey": ${MetadataTable#Column3_IsPrimaryKey},
      "IsIdentity": ${MetadataTable#Column3_IsIdentity},
      "IsNullable": ${MetadataTable#Column3_IsNullable},
      "DefaultValue": "${MetadataTable#Column3_DefaultValue}"
    },
    {
      "Name": "${MetadataTable#Column4_Name}",
      "Description": "${MetadataTable#Column4_Description}",
      "SqlName": "${MetadataTable#Column4_SqlName}",
      "DataType": "${MetadataTable#Column4_DataType}",
      "IsPrimaryKey": ${MetadataTable#Column4_IsPrimaryKey},
      "IsIdentity": ${MetadataTable#Column4_IsIdentity},
      "IsNullable": ${MetadataTable#Column4_IsNullable},
      "DefaultValue": "${MetadataTable#Column4_DefaultValue}"
    },
    {
      "Name": "${MetadataTable#Column5_Name}",
      "Description": "${MetadataTable#Column5_Description}",
      "SqlName": "${MetadataTable#Column5_SqlName}",
      "DataType": "${MetadataTable#Column5_DataType}",
      "IsPrimaryKey": ${MetadataTable#Column5_IsPrimaryKey},
      "IsIdentity": ${MetadataTable#Column5_IsIdentity},
      "IsNullable": ${MetadataTable#Column5_IsNullable},
      "DefaultValue": "${MetadataTable#Column5_DefaultValue}"
    },
    {
      "Name": "${MetadataTable#Column6_Name}",
      "Description": "${MetadataTable#Column6_Description}",
      "SqlName": "${MetadataTable#Column6_SqlName}",
      "DataType": "${MetadataTable#Column6_DataType}",
      "IsPrimaryKey": ${MetadataTable#Column6_IsPrimaryKey},
      "IsIdentity": ${MetadataTable#Column6_IsIdentity},
      "IsNullable": ${MetadataTable#Column6_IsNullable},
      "DefaultValue": "${MetadataTable#Column6_DefaultValue}"
    }
  ]
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/unite/metadata/tables</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="bcf9aa4f-5327-40ee-b524-77760e183b83" name="Smart Assertion">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Thu, 23 Jun 2022 16:51:53 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['transfer-encoding']</con:path>
              <con:element>transfer-encoding</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>chunked</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>d8c88f5f-6641-6cf3-e085-7fe6571554fe</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>28ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 201 Created</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMIL19DJT825:0000000A</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Thu, 23 Jun 2022 16:51:53 GMT","transfer-encoding":"chunked","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"d8c88f5f-6641-6cf3-e085-7fe6571554fe","content-type":"application/json","process-time":"28ms","#status#":"HTTP/1.1 400 Bad Request","cache-control":"no-store,no-cache","new-correlationid":"0HMIL19DJT825:0000000A"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Content-Type" value="application/json"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>Authorization</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Content-Type</con:entry>
        </con:parameterOrder>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="TableId" id="2dfbf8ae-4c0b-4abf-af43-e2ead2275c84">
    <con:settings/>
    <con:config>
      <script>def TableId = context.expand( '${GetAllTablesBySqlNameAndSchema#Response#$[0][\'TableId\']}' )
def response = context.expand( '${AddTable#Response}' )

if(response==null || response =="")
  	return TableId;
 else
 {
    TableId = context.expand( '${AddTable#Response#$[\'TableId\']}' )
    return TableId;
 }</script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="UpdateTable" id="f24c8663-c7dc-4ffc-ba5b-4047e11d2a17">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/unite/metadata/tables/{tableId}" methodName="UpdateTable" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="UpdateTable" id="ac70bf44-25ae-42ba-a3a6-cbdd8124fbe3" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
  "Name": "${MetadataTable#Name}",
  "Description": "${MetadataTable#Description}",
  "SqlName": "${MetadataTable#SqlName}",
  "Schema": "${MetadataTable#Schema}",
  "SubjectArea": "${MetadataTable#SubjectArea}",
  "IsView": ${MetadataTable#IsView},
  "Ddl": "${MetadataTable#Ddl}",
  "Columns": [
    {
      "Name": "${MetadataTable#Column1_Name}",
      "Description": "${MetadataTable#Column1_Description}",
      "SqlName": "${MetadataTable#Column1_SqlName}",
      "DataType": "${MetadataTable#Column1_DataType}",
      "IsPrimaryKey": ${MetadataTable#Column1_IsPrimaryKey},
      "IsIdentity": ${MetadataTable#Column1_IsIdentity},
      "IsNullable": ${MetadataTable#Column1_IsNullable},
      "DefaultValue": "${MetadataTable#Column1_DefaultValue}"
    },
    {
      "Name": "${MetadataTable#Column2_Name}",
      "Description": "${MetadataTable#Column2_Description}",
      "SqlName": "${MetadataTable#Column2_SqlName}",
      "DataType": "${MetadataTable#Column2_DataType}",
      "IsPrimaryKey": ${MetadataTable#Column2_IsPrimaryKey},
      "IsIdentity": ${MetadataTable#Column2_IsIdentity},
      "IsNullable": ${MetadataTable#Column2_IsNullable},
      "DefaultValue": "${MetadataTable#Column2_DefaultValue}"
    },
    {
      "Name": "${MetadataTable#Column3_Name}",
      "Description": "${MetadataTable#Column3_Description}",
      "SqlName": "${MetadataTable#Column3_SqlName}",
      "DataType": "${MetadataTable#Column3_DataType}",
      "IsPrimaryKey": ${MetadataTable#Column3_IsPrimaryKey},
      "IsIdentity": ${MetadataTable#Column3_IsIdentity},
      "IsNullable": ${MetadataTable#Column3_IsNullable},
      "DefaultValue": "${MetadataTable#Column3_DefaultValue}"
    },
    {
      "Name": "${MetadataTable#Column4_Name}",
      "Description": "${MetadataTable#Column4_Description}",
      "SqlName": "${MetadataTable#Column4_SqlName}",
      "DataType": "${MetadataTable#Column4_DataType}",
      "IsPrimaryKey": ${MetadataTable#Column4_IsPrimaryKey},
      "IsIdentity": ${MetadataTable#Column4_IsIdentity},
      "IsNullable": ${MetadataTable#Column4_IsNullable},
      "DefaultValue": "${MetadataTable#Column4_DefaultValue}"
    },
    {
      "Name": "${MetadataTable#Column5_Name}",
      "Description": "${MetadataTable#Column5_Description}",
      "SqlName": "${MetadataTable#Column5_SqlName}",
      "DataType": "${MetadataTable#Column5_DataType}",
      "IsPrimaryKey": ${MetadataTable#Column5_IsPrimaryKey},
      "IsIdentity": ${MetadataTable#Column5_IsIdentity},
      "IsNullable": ${MetadataTable#Column5_IsNullable},
      "DefaultValue": "${MetadataTable#Column5_DefaultValue}"
    },
    {
      "Name": "${MetadataTable#Column6_Name}",
      "Description": "${MetadataTable#Column6_Description}",
      "SqlName": "${MetadataTable#Column6_SqlName}",
      "DataType": "${MetadataTable#Column6_DataType}",
      "IsPrimaryKey": ${MetadataTable#Column6_IsPrimaryKey},
      "IsIdentity": ${MetadataTable#Column6_IsIdentity},
      "IsNullable": ${MetadataTable#Column6_IsNullable},
      "DefaultValue": "${MetadataTable#Column6_DefaultValue}"
    }
  ]
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/unite/metadata/tables/tableId</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="86612096-ee05-454e-8fdf-049320415582" name="Smart Assertion for Http Status Code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Thu, 23 Jun 2022 16:56:07 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>dd736c48-39b7-761f-7069-447c7eebf5f2</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>5ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMIL19DJT831:00000002</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Thu, 23 Jun 2022 16:56:07 GMT","content-length":"0","x-content-type-options":"nosniff","x-xss-protection":"1","x-frame-options":"DENY","connection":"keep-alive","correlationid":"dd736c48-39b7-761f-7069-447c7eebf5f2","process-time":"5ms","#status#":"HTTP/1.1 404 Not Found","new-correlationid":"0HMIL19DJT831:00000002"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="tableId" value="${TableId#result}"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Content-Type" value="application/json"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>tableId</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Content-Type</con:entry>
        </con:parameterOrder>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="datasourceloop" name="MetaDataTableLoop" id="0629239b-b157-4a8b-bd15-88a7995d2e25">
    <con:settings/>
    <con:config>
      <dataSourceStep>MetadataTable</dataSourceStep>
      <targetStep>GetAllTablesBySqlNameAndSchema</targetStep>
      <discardResults>true</discardResults>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
</con:testCase>
