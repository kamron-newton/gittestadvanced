<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="17697470-2a92-4225-91ce-1e396bebaca5" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="MergeAccountMomentCap" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="17697470-2a92-4225-91ce-1e396bebaca5fileName">MergeAccountMomentCap</con:setting>
  </con:settings>
  <con:testStep type="datasource" name="MomentsCap" id="94d84a33-6048-4c1c-9264-246e7fe40a33">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="File">
        <con:configuration>
          <fileName>${#Project#ProjectPath}/References/MomentsCap.csv</fileName>
          <separator>,</separator>
          <trim>true</trim>
          <charset>Cp1252</charset>
          <quotedValues>true</quotedValues>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>row</con:property>
      <con:property>ProgramCode</con:property>
      <con:property>MomentCode</con:property>
      <con:property>MomentType</con:property>
      <con:property>BaseInd</con:property>
      <con:property>PointTypeVal</con:property>
      <con:property>PointSubTypeVal</con:property>
      <con:property>StartDate</con:property>
      <con:property>EndDate</con:property>
      <con:property>Description</con:property>
      <con:property>QualifyingDateAttribute</con:property>
      <con:property>QualifyingDateAttributeDrools</con:property>
      <con:property>EventType</con:property>
      <con:property>OfferName</con:property>
      <con:property>CalculationTemplate</con:property>
      <con:property>OutcomeEquationTemplate</con:property>
      <con:property>OutcomeEquationDrools1</con:property>
      <con:property>FormulaName</con:property>
      <con:property>CapName</con:property>
      <con:property>CapValue</con:property>
      <con:property>CapType</con:property>
      <con:property>OutcomeEquationUiVal</con:property>
      <con:property>CapName1</con:property>
      <con:property>CapValue1</con:property>
      <con:property>CapName2</con:property>
      <con:property>CapValue2</con:property>
      <con:property>CapType2</con:property>
      <con:property>CapName3</con:property>
      <con:property>CapValue3</con:property>
      <con:property>CapType3</con:property>
      <con:startRow>1</con:startRow>
      <con:endRow>1</con:endRow>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="GetPointTypes" id="4f467c2c-2507-4f5a-a1ac-8beeda160c29">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>ee4c5b9c-633e-4381-ab74-bcb3af64baee</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>pointTypeCode</con:name>
          <con:value>Eggs</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="GetPointSubTypes" id="c2483556-1a74-40b6-b19b-1f3d3802bb7b">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>64baf0f6-f2b9-48ce-bd4f-695aea81038c</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>pointTypeId</con:name>
          <con:value>${#[ActivityCertificate#GetPointTypes#GetPointTypes]#Response#$[0]['RefPointTypeId']}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="UpsertMomentCAPS" id="e2924d6b-46db-4456-a979-41b74b8a2b28">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>58a85117-5558-4be0-b68f-214c9fbde4c3</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>MomentName</con:name>
          <con:value>${MomentsCap#MomentCode}</con:value>
        </con:property>
        <con:property>
          <con:name>CreateBody</con:name>
          <con:value>{   "MomentCode":"${MomentsCap#MomentCode}",   "MomentResponseValues":[      {         "MomentCode":"${MomentsCap#MomentCode}",         "MomentType":"${MomentsCap#MomentType}",         "ResponsePropertyName":"BASE INDICATOR",         "ResponsePropertyValue":"N",         "Status":"P"      },      {         "MomentCode":"${MomentsCap#MomentCode}",         "MomentType":"${MomentsCap#MomentType}",         "ResponsePropertyName":"POINT SUBTYPE",         "ResponsePropertyValue":"${#[ActivityCertificate#GetPointSubType#GetPointSubType]#Response#$['PointSubTypes'][0]['PointSubTypeId']}",         "Status":"P"      },      {         "MomentCode":"${MomentsCap#MomentCode}",         "MomentType":"${MomentsCap#MomentType}",         "ResponsePropertyName":"POINT TYPE",         "ResponsePropertyValue":"${#[ActivityCertificate#GetPointTypes#GetPointTypes]#Response#$[0]['RefPointTypeId']}",         "Status":"P"      }   ],   "StartDate":"${MomentsCap#StartDate}",   "EndDate":"${MomentsCap#EndDate}",   "Description":"${MomentsCap#Description}",   "MomentType":"${MomentsCap#MomentType}",   "MomentEvent":{      "MomentCode":"${MomentsCap#MomentCode}",      "EventType":"${MomentsCap#EventType}",      "MomentQualifyingDateAttribute":"${MomentsCap#QualifyingDateAttribute}",      "MomentQualifyingDateAttributeDrools":"${MomentsCap#QualifyingDateAttributeDrools}",      "MomentOffers":[         {            "MomentCode":"${MomentsCap#MomentCode}",            "OfferName":"${MomentsCap#MomentCode}",            "EventType":"${MomentsCap#EventType}",            "Description":"${MomentsCap#Description}",            "MomentOutcome":{               "MomentCode":"${MomentsCap#MomentCode}",               "EventType":"${MomentsCap#EventType}",               "OfferName":"${MomentsCap#MomentCode}",               "OutcomeEquationUi":"${MomentsCap#OutcomeEquationUiVal}",               "CalculationTemplate":"${MomentsCap#CalculationTemplate}",               "OutcomeEquationTemplate":"${MomentsCap#OutcomeEquationTemplate}",               "FormulaName":"${MomentsCap#FormulaName}",               "Status":"P"            },            "MomentQualifyingRule":{               "MomentCode":"${MomentsCap#MomentCode}",               "EventType":"${MomentsCap#EventType}",               "OfferName":"${MomentsCap#MomentCode}",               "RuleEquationUI":"PurchaseTxn.TransactionEligible >= 500 ||PurchaseTxn.TransactionNetTotal>=500",               "RuleEquationDrools":"PurchaseTxnC(PurchaseTxn.TransactionEligible >= 500 ||PurchaseTxn.TransactionNetTotal>=500)",               "MomentCap":[                  {                     "MomentCode":"${MomentsCap#MomentCode}",                     "EventType":"${MomentsCap#EventType}",                     "OfferName":"${MomentsCap#MomentCode}",                     "CapName":"${MomentsCap#CapName}",                     "CapValue":"${MomentsCap#CapValue}",                     "CapType":"${MomentsCap#CapType}",                     "Status":"P"                  },                  {                     "MomentCode":"${MomentsCap#MomentCode}",                     "EventType":"${MomentsCap#EventType}",                     "OfferName":"${MomentsCap#MomentCode}",                     "CapName":"${MomentsCap#CapName2}",                     "CapValue":"${MomentsCap#CapValue2}",                     "CapType":"${MomentsCap#CapType2}",                     "Status":"P"                  },                  {                     "MomentCode":"${MomentsCap#MomentCode}",                     "EventType":"${MomentsCap#EventType}",                     "OfferName":"${MomentsCap#MomentCode}",                     "CapName":"${MomentsCap#CapName3}",                     "CapValue":"${MomentsCap#CapValue3}",                     "CapType":"${MomentsCap#CapType2}",                     "Status":"P"                  }               ],               "Status":"P"            },            "Status":"P"         }      ]   },   "ReleaseState":"P",   "Status":"P" }</con:value>
        </con:property>
        <con:property>
          <con:name>UpdateBody</con:name>
          <con:value>{   "MomentCode":"${MomentsCap#MomentCode}",   "MomentResponseValues":[      {         "MomentCode":"${MomentsCap#MomentCode}",         "MomentType":"${MomentsCap#MomentType}",         "ResponsePropertyName":"BASE INDICATOR",         "ResponsePropertyValue":"N",         "Status":"A"      },      {         "MomentCode":"${MomentsCap#MomentCode}",         "MomentType":"${MomentsCap#MomentType}",         "ResponsePropertyName":"POINT SUBTYPE",         "ResponsePropertyValue":"${#[ActivityCertificate#GetPointSubType#GetPointSubType]#Response#$['PointSubTypes'][0]['PointSubTypeId']}",         "Status":"A"      },      {         "MomentCode":"${MomentsCap#MomentCode}",         "MomentType":"${MomentsCap#MomentType}",         "ResponsePropertyName":"POINT TYPE",         "ResponsePropertyValue":"${#[ActivityCertificate#GetPointTypes#GetPointTypes]#Response#$[0]['RefPointTypeId']}",         "Status":"A"      }   ],   "StartDate":"${MomentsCap#StartDate}",   "EndDate":"${MomentsCap#EndDate}",   "Description":"${MomentsCap#Description}",   "MomentType":"${MomentsCap#MomentType}",   "MomentEvent":{      "MomentCode":"${MomentsCap#MomentCode}",      "EventType":"${MomentsCap#EventType}",      "MomentQualifyingDateAttribute":"${MomentsCap#QualifyingDateAttribute}",      "MomentQualifyingDateAttributeDrools":"${MomentsCap#QualifyingDateAttributeDrools}",      "MomentOffers":[         {            "MomentCode":"${MomentsCap#MomentCode}",            "OfferName":"${MomentsCap#MomentCode}",            "EventType":"${MomentsCap#EventType}",            "Description":"${MomentsCap#Description}",            "MomentOutcome":{               "MomentCode":"${MomentsCap#MomentCode}",               "EventType":"${MomentsCap#EventType}",               "OfferName":"${MomentsCap#MomentCode}",               "OutcomeEquationUi":"${MomentsCap#OutcomeEquationUiVal}",               "CalculationTemplate":"${MomentsCap#CalculationTemplate}",               "OutcomeEquationTemplate":"${MomentsCap#OutcomeEquationTemplate}",               "FormulaName":"${MomentsCap#FormulaName}",               "Status":"A"            },            "MomentQualifyingRule":{               "MomentCode":"${MomentsCap#MomentCode}",               "EventType":"${MomentsCap#EventType}",               "OfferName":"${MomentsCap#MomentCode}",               "RuleEquationUI":"PurchaseTxn.TransactionEligible >= 500 ||PurchaseTxn.TransactionNetTotal>=500",               "RuleEquationDrools":"PurchaseTxnC(PurchaseTxn.TransactionEligible >= 500 ||PurchaseTxn.TransactionNetTotal>=500)",               "MomentCap":[                  {                     "MomentCode":"${MomentsCap#MomentCode}",                     "EventType":"${MomentsCap#EventType}",                     "OfferName":"${MomentsCap#MomentCode}",                     "CapName":"${MomentsCap#CapName}",                     "CapValue":"${MomentsCap#CapValue}",                     "CapType":"${MomentsCap#CapType}",                     "Status":"A"                  },                  {                     "MomentCode":"${MomentsCap#MomentCode}",                     "EventType":"${MomentsCap#EventType}",                     "OfferName":"${MomentsCap#MomentCode}",                     "CapName":"${MomentsCap#CapName2}",                     "CapValue":"${MomentsCap#CapValue2}",                     "CapType":"${MomentsCap#CapType2}",                     "Status":"A"                  },                  {                     "MomentCode":"${MomentsCap#MomentCode}",                     "EventType":"${MomentsCap#EventType}",                     "OfferName":"${MomentsCap#MomentCode}",                     "CapName":"${MomentsCap#CapName3}",                     "CapValue":"${MomentsCap#CapValue3}",                     "CapType":"${MomentsCap#CapType3}",                     "Status":"A"                  }               ],               "Status":"A"            },            "Status":"A"         }      ]   },   "ReleaseState":"P",   "Status":"A" }</con:value>
        </con:property>
        <con:property>
          <con:name>MomentId</con:name>
          <con:value>${AddPurchaseTransaction2Day1Week1#Response}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
</con:testCase>
