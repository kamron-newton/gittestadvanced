<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="ea0d10de-6e28-4f8d-9ad0-ce8edc5c3fef" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="ProfileRVCSegmentRewardRedeemer" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="ea0d10de-6e28-4f8d-9ad0-ce8edc5c3feffileName">ProfileRVCSegmentRewardRedeemer</con:setting>
  </con:settings>
  <con:testStep type="datasource" name="ProfileAdjustments" id="e5e558b1-0974-4d46-8546-9460550f3084">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="File">
        <con:configuration>
          <fileName>${#Project#ProjectPath}/References/ProfileAdjustments.csv</fileName>
          <separator>,</separator>
          <trim>true</trim>
          <charset>Cp1252</charset>
          <quotedValues>false</quotedValues>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>Row</con:property>
      <con:property>ProgramCode</con:property>
      <con:property>PointSubTypeCode</con:property>
      <con:property>AdjustmentReasonCode</con:property>
      <con:property>Points1</con:property>
      <con:property>Points2</con:property>
      <con:property>Reward1</con:property>
      <con:property>Reward2</con:property>
      <con:property>Points3</con:property>
      <con:property>Points4</con:property>
      <con:startRow>1</con:startRow>
      <con:endRow/>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
      <con:stopDatasourceExhausted>false</con:stopDatasourceExhausted>
    </con:config>
  </con:testStep>
  <con:testStep type="datasource" name="RVCSegments" id="c6de51e9-2cd3-49c4-a6d2-bc3d00b8b1b0">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="File">
        <con:configuration>
          <fileName>${#Project#ProjectPath}/References/RVCSegments.csv</fileName>
          <separator>,</separator>
          <trim>true</trim>
          <charset>Cp1252</charset>
          <quotedValues>false</quotedValues>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>SegmentDataName</con:property>
      <con:property>LinkTableName</con:property>
      <con:property>LinkColumnName</con:property>
      <con:property>FriendlyLinkTableName</con:property>
      <con:property>FriendlyLinkColumnName</con:property>
      <con:property>NoActivity</con:property>
      <con:property>PointEarner</con:property>
      <con:property>SingleCertEarner</con:property>
      <con:property>MultipleCertEarner</con:property>
      <con:property>SingleRedeemer</con:property>
      <con:property>MultipleRedeemer</con:property>
      <con:startRow>1</con:startRow>
      <con:endRow/>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
      <con:stopDatasourceExhausted>false</con:stopDatasourceExhausted>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="AddProfileRGR" id="5f0a7e0f-b11a-4f9f-a7a7-4e0e3702b162">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>09d0b29f-fbfa-4136-9573-3b813c1795b3</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>ProfileId</con:name>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="AddAdjustment" id="f8c17a50-0fa3-4de0-b33e-422451d71205">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>d3339fb2-45d2-479b-9947-1ea66f3877fa</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>Points</con:name>
          <con:value>${ProfileAdjustments#Points1}</con:value>
        </con:property>
        <con:property>
          <con:name>ProfileId</con:name>
          <con:value>${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}</con:value>
        </con:property>
        <con:property>
          <con:name>AdjustmentReason</con:name>
          <con:value>${ProfileAdjustments#AdjustmentReasonCode}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="AddFixedPointRew" id="9e7a264d-508f-4d05-8cb8-da0d549f2a8f">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>4560d597-ecde-4816-b07a-3e9fae76adf3</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>rewardCode</con:name>
          <con:value>RDFIXEDPOINT1000</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>rewardCode</con:entry>
      </con:returnProperties>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="ActivityDate" id="89289934-e799-4225-8368-c84491f6d131">
    <con:settings/>
    <con:config>
      <script>use (groovy.time.TimeCategory)
{
def activitydate = new Date().plus(5)
def formattedDate = activitydate.format("MM/dd/yyyy")
}</script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="AddProfileCartItem" id="c9150b2f-9e00-4744-bfd1-ce83ceed4954">
    <con:settings/>
    <con:config service="RestAPIs" methodName="AddProfileCartItem" resourcePath="/api/v1/profiles/{profileId}/rewards/catalogs/cartitems" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="AddProfileCartItem" id="1e069de9-c018-4b75-a6ba-71aa71df6faf" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
  "RewardId": "${#[ActivityOrder#AddFixedPointRew#GetRewardByCode]#Response#$['RewardId']}",
  "ActivityDate": "${ActivityDate#result}"
}</con:request>
        <con:originalUri>https://q3alin-pveapi.loyalty-lower.peoplecloud.epsilon.com/api/v1/profiles/6d8396f8-39bd-4424-88c2-c4bad65a385d/rewards/catalogs/cartitems</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="8036ace5-2fa4-4e73-b6f4-cf407fe0359d" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>201</codes>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="PlaceOrder" id="9929db7e-0bb4-4eaa-9f68-465f830e482f">
    <con:settings/>
    <con:config service="RestAPIs" methodName="PlaceOrder" resourcePath="/api/v1/profiles/{profileId}/rewards/catalogs/orders" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="PlaceOrder" id="6296271a-7296-44e1-862c-e6df2782efa0" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
  "EmailAddress": "test@dx2mail.com",
  "OrderDetails": [
    {
      "RewardId": "${#[ActivityOrder#AddFixedPointRew#UpdateReward]#Response#$['RewardId']}",
      "Quantity": 1
    }
  ]
}</con:request>
        <con:originalUri>https://q3alin-pveapi.loyalty-lower.peoplecloud.epsilon.com/api/v1/profiles/6d8396f8-39bd-4424-88c2-c4bad65a385d/rewards/catalogs/orders</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="d1250235-15d0-47fd-b80f-3f37bbcbe038" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>201</codes>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="Delay" id="fcffd1f5-c909-4d68-b47a-d00def7518f8">
    <con:settings/>
    <con:config>
      <delay>5000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="ProcessRVCSegment-SingleRedeemer" id="62cdeb8a-ad53-4094-8543-de54cbbe5c85">
    <con:settings/>
    <con:config service="RestAPIs" methodName="ProcessRVCSegment" resourcePath="/api/v1/profiles/{profileId}/segmentdata/rvc" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="ProcessRVCSegment-SingleRedeemer" id="71fd6e2f-69c1-49bf-bca4-2dd1601ab0f8" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.loyalty-lower.peoplecloud.epsilon.com/api/v1/profiles/6d8396f8-39bd-4424-88c2-c4bad65a385d/segmentdata/rvc</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="e7a2c4da-17c8-4496-ac5a-790be57a0a14" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="DataAndMetadataAssertion" id="7b01c610-16ac-4001-8d8f-2a727f829769" name="Smart Assertion">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Data</con:mode>
            <con:elements>
              <con:path>$['SegmentData'][0]['SegmentDataValue']</con:path>
              <con:element>SegmentDataValue</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>SINGLE_REDEEMER</con:expectedValue>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{
  "ProfileId": "6d8396f8-39bd-4424-88c2-c4bad65a385d",
  "Id": "6d8396f8-39bd-4424-88c2-c4bad65a385d",
  "SegmentData": [
    {
      "SegmentDataName": "RVC_SEGMENT",
      "SegmentDataValue": "SINGLE_REDEEMER",
      "Status": "A",
      "SegmentDescription": "Customers who have either redeemed one reward or one certificate but not both. The total redemption must be one.",
      "SegmentName": "Single Redeemer",
      "CreateUser": "AUTO_USER",
      "CreateDate": "2022-08-31T10:43:10.582519Z",
      "UpdateUser": "AUTO_USER",
      "UpdateDate": "2022-08-31T10:43:10.588168Z"
    }
  ],
  "ProfileIndividualIdInd": "P"
}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
        </con:parameters>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="VerifySegmentHistory-SingleRewardRedeemer" id="6854cfa9-ec6b-49ea-9c9f-7412268e9fe1">
    <con:settings/>
    <con:config service="RestAPIs" methodName="GetProfileSegmentHistory" resourcePath="/api/v1/profiles/{profileId}/segmentdata/segment/segmentHistory" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="VerifySegmentHistory-SingleRewardRedeemer" id="58bb98c3-8d52-469d-b38e-446599b6d70b" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.loyalty-lower.peoplecloud.epsilon.com/api/v1/profiles/6d8396f8-39bd-4424-88c2-c4bad65a385d/segmentdata/segment/segmentHistory</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="ad312a63-a374-40a2-aa27-e4dc52b9e6c1" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="DataAndMetadataAssertion" id="9cb089fc-752e-4d49-a312-cdacd3083712" name="Smart Assertion">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Data</con:mode>
            <con:elements>
              <con:path>$[0]['SegmentDataValue']</con:path>
              <con:element>SegmentDataValue</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>${RVCSegments#SingleRedeemer}</con:expectedValue>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>[
  {
    "SegmentDataId": "29f985c1-90aa-f845-9309-3e04e14c81a0",
    "SegmentDataName": "RVC_SEGMENT",
    "SegmentDataValue": "SINGLE_REDEEMER",
    "Status": "A",
    "CreateUser": "AUTO_USER",
    "CreateDate": "2022-08-31T10:43:10.588168Z",
    "UpdateUser": "AUTO_USER",
    "UpdateDate": "2022-08-31T10:43:10.588168Z"
  }
]</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}"/>
          <con:entry key="segmentDataName" value="${RVCSegments#SegmentDataName}"/>
          <con:entry key="Accept-Language" value="en-US"/>
        </con:parameters>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="AddAdjustment 2" id="f09b0be2-e116-457d-aafd-0b3b4eff7953">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>d3339fb2-45d2-479b-9947-1ea66f3877fa</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>Points</con:name>
          <con:value>${ProfileAdjustments#Points1}</con:value>
        </con:property>
        <con:property>
          <con:name>ProfileId</con:name>
          <con:value>${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}</con:value>
        </con:property>
        <con:property>
          <con:name>AdjustmentReason</con:name>
          <con:value>${ProfileAdjustments#AdjustmentReasonCode}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="AddProfileCartItem 2" id="095216dd-43ea-44a4-aac0-7e66ddaff1a6">
    <con:settings/>
    <con:config service="RestAPIs" methodName="AddProfileCartItem" resourcePath="/api/v1/profiles/{profileId}/rewards/catalogs/cartitems" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="AddProfileCartItem 2" id="1e069de9-c018-4b75-a6ba-71aa71df6faf" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
  "RewardId": "${#[ActivityOrder#AddFixedPointRew#GetRewardByCode]#Response#$['RewardId']}",
  "ActivityDate": "${ActivityDate#result}"
}</con:request>
        <con:originalUri>https://q3alin-pveapi.loyalty-lower.peoplecloud.epsilon.com/api/v1/profiles/6d8396f8-39bd-4424-88c2-c4bad65a385d/rewards/catalogs/cartitems</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="8036ace5-2fa4-4e73-b6f4-cf407fe0359d" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>201</codes>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="PlaceOrder 2" id="93103bf9-e414-4c23-a5df-a49ef101fe82">
    <con:settings/>
    <con:config service="RestAPIs" methodName="PlaceOrder" resourcePath="/api/v1/profiles/{profileId}/rewards/catalogs/orders" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="PlaceOrder 2" id="6296271a-7296-44e1-862c-e6df2782efa0" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
  "EmailAddress": "test@dx2mail.com",
  "OrderDetails": [
    {
      "RewardId": "${#[ActivityOrder#AddFixedPointRew#UpdateReward]#Response#$['RewardId']}",
      "Quantity": 1
    }
  ]
}</con:request>
        <con:originalUri>https://q3alin-pveapi.loyalty-lower.peoplecloud.epsilon.com/api/v1/profiles/6d8396f8-39bd-4424-88c2-c4bad65a385d/rewards/catalogs/orders</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="d1250235-15d0-47fd-b80f-3f37bbcbe038" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>201</codes>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="Delay 2" id="8f6e38c7-2df7-4767-8e9b-8802f286f347">
    <con:settings/>
    <con:config>
      <delay>5000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="ProcessRVCSegment-MultipleRedeemer" id="a9dcc79f-4c08-4df6-bc78-cb48ddfdf4f0">
    <con:settings/>
    <con:config service="RestAPIs" methodName="ProcessRVCSegment" resourcePath="/api/v1/profiles/{profileId}/segmentdata/rvc" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="ProcessRVCSegment-MultipleRedeemer" id="71fd6e2f-69c1-49bf-bca4-2dd1601ab0f8" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.loyalty-lower.peoplecloud.epsilon.com/api/v1/profiles/6d8396f8-39bd-4424-88c2-c4bad65a385d/segmentdata/rvc</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="e7a2c4da-17c8-4496-ac5a-790be57a0a14" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="DataAndMetadataAssertion" id="7b01c610-16ac-4001-8d8f-2a727f829769" name="Smart Assertion">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Data</con:mode>
            <con:elements>
              <con:path>$['SegmentData'][0]['SegmentDataValue']</con:path>
              <con:element>SegmentDataValue</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>MULTIPLE_REDEEMER</con:expectedValue>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{
  "ProfileId": "6d8396f8-39bd-4424-88c2-c4bad65a385d",
  "Id": "6d8396f8-39bd-4424-88c2-c4bad65a385d",
  "SegmentData": [
    {
      "SegmentDataName": "RVC_SEGMENT",
      "SegmentDataValue": "SINGLE_REDEEMER",
      "Status": "A",
      "SegmentDescription": "Customers who have either redeemed one reward or one certificate but not both. The total redemption must be one.",
      "SegmentName": "Single Redeemer",
      "CreateUser": "AUTO_USER",
      "CreateDate": "2022-08-31T10:43:10.582519Z",
      "UpdateUser": "AUTO_USER",
      "UpdateDate": "2022-08-31T10:43:10.588168Z"
    }
  ],
  "ProfileIndividualIdInd": "P"
}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
        </con:parameters>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="VerifySegmentHistory-MultipleRewardRedeemer" id="f082699f-933a-4070-a336-0c3abee94c3b">
    <con:settings/>
    <con:config service="RestAPIs" methodName="GetProfileSegmentHistory" resourcePath="/api/v1/profiles/{profileId}/segmentdata/segment/segmentHistory" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="VerifySegmentHistory-MultipleRewardRedeemer" id="58bb98c3-8d52-469d-b38e-446599b6d70b" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.loyalty-lower.peoplecloud.epsilon.com/api/v1/profiles/6d8396f8-39bd-4424-88c2-c4bad65a385d/segmentdata/segment/segmentHistory</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="ad312a63-a374-40a2-aa27-e4dc52b9e6c1" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="59f89772-af18-428d-a1df-4905421da10e" name="JSONPath Match for Multiple Redeemer">
          <con:configuration>
            <path>$[?(@.SegmentDataValue=="MULTIPLE_REDEEMER")]['SegmentDataValue']</path>
            <content>["MULTIPLE_REDEEMER"]</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}"/>
          <con:entry key="segmentDataName" value="${RVCSegments#SegmentDataName}"/>
          <con:entry key="Accept-Language" value="en-US"/>
        </con:parameters>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
</con:testCase>
