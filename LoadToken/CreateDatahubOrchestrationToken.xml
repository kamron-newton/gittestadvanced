<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="802bf79a-cd3a-46a5-952d-ea1d7e6172b1" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="CreateDatahubOrchestrationToken" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="802bf79a-cd3a-46a5-952d-ea1d7e6172b1fileName">CreateDatahubOrchestrationToken</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="restrequest" name="CreateOrchestrationToken" id="8e35eeeb-cde8-4361-b12b-bf266afa0560">
    <con:settings/>
    <con:config service="DatahubTokenAPIs" resourcePath="/Epsilon/oauth2/access_token" methodName="CreateToken" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="CreateOrchestrationToken" id="ad9af13c-6e09-4078-873f-bcda97ed8b99" mediaType="application/x-www-form-urlencoded" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://stgapi-public.cls.epsilon.com</con:endpoint>
        <con:request>grant_type=password&amp;username=${#Project#SystemUserOrchestration}&amp;password=${#Project#SystemUserPasswordOrchestration}&amp;scope=cn mail sn givenname uid employeeNumber</con:request>
        <con:originalUri>https://stgapi-public.cls.epsilon.com/Epsilon/oauth2/access_token</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="fd3f697c-e7ad-4f9a-af5e-5c6e51b84dd8" name="Smart Assertion - Validating HTTP Status Code 200">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Mon, 04 Apr 2022 17:31:00 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['set-cookie']</con:path>
              <con:element>set-cookie</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>SCLAUTHSERVERID=sa2udtlhapp626; path=/</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1569</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Mon, 04 Apr 2022 17:31:00 GMT","set-cookie":"SCLAUTHSERVERID=sa2udtlhapp626; path=/","content-length":"1569","connection":"keep-alive","content-type":"application/json","#status#":"HTTP/1.1 200 "}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="${#Project#BasicAuthorizationOrchestration}"/>
          <con:entry key="realm" value="/datahub"/>
          <con:entry key="Content-Type" value="application/x-www-form-urlencoded"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>realm</con:entry>
          <con:entry>Content-Type</con:entry>
          <con:entry>Authorization</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="transfer" name="TransferDHOrchestrationToken" id="4d892ccb-bcff-428e-9fc0-99c393f3e7c7">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>DatahubOrchestrationToken</con:name>
        <con:sourceType>Response</con:sourceType>
        <con:sourceStep>CreateOrchestrationToken</con:sourceStep>
        <con:sourcePath>$['access_token']</con:sourcePath>
        <con:targetType>Datahub Orchestration Token</con:targetType>
        <con:targetStep>#Project#</con:targetStep>
        <con:targetPath/>
        <con:type>JSONPATH</con:type>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
  <con:environmentSpec>
    <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>
