<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="072ba104-c644-493b-8e58-37c6c7176e8b" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="MergeProfileWithSurvivorPoint" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="072ba104-c644-493b-8e58-37c6c7176e8bfileName">MergeProfileWithSurvivorPoint</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="datasource" name="EggTypeMoment" id="86f3892d-e228-4868-a1fc-3ce6a924f63a">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="File">
        <con:configuration>
          <fileName>${#Project#ProjectPath}/References/EggTypeMoment.csv</fileName>
          <separator>,</separator>
          <trim>true</trim>
          <charset>Cp1252</charset>
          <quotedValues>true</quotedValues>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>ProgramCode</con:property>
      <con:property>MomentCode</con:property>
      <con:property>MomentType</con:property>
      <con:property>BaseInd</con:property>
      <con:property>PointTypeVal</con:property>
      <con:property>PointSubTypeVal</con:property>
      <con:property>StartDate</con:property>
      <con:property>EndDate</con:property>
      <con:property>Description</con:property>
      <con:property>QualifyingDateAttribute</con:property>
      <con:property>QualifyingDateAttributeDrools</con:property>
      <con:property>EventType</con:property>
      <con:property>OfferName</con:property>
      <con:property>CalculationTemplate</con:property>
      <con:property>OutcomeEquationTemplate</con:property>
      <con:property>OutcomeEquationDrools1</con:property>
      <con:property>OutcomeEquationDrools2</con:property>
      <con:property>OutcomeEquationDrools3</con:property>
      <con:property>FormulaName</con:property>
      <con:property>RuleEquationUI</con:property>
      <con:property>RuleEquationDrools</con:property>
      <con:property>OutcomeEquationUi</con:property>
      <con:property>LeafValue</con:property>
      <con:property>OutcomeEquationTemplate1</con:property>
      <con:property>OutcomeEquationTemplate2</con:property>
      <con:property>ValueGroup</con:property>
      <con:property>OutcomeEquationTemplate3</con:property>
      <con:property>OutcomeEquationDrools4</con:property>
      <con:property>RuleEquationUI1</con:property>
      <con:property>RuleEquationDrools1</con:property>
      <con:property>OutcomeEquationUi1</con:property>
      <con:startRow>1</con:startRow>
      <con:endRow/>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Add Survivor Profile" id="ca834cd3-767e-477d-865b-46405bc585c1">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="false" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>09d0b29f-fbfa-4136-9573-3b813c1795b3</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>ProfileId</con:name>
          <con:value>673e6259-f7ac-4a53-9df4-11eefb41ebe0</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>ProfileId</con:entry>
      </con:returnProperties>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Add Victim Profile" id="94c96d1c-10ea-4998-a962-2c4e34109787">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>f5c457de-a71d-47df-9afc-3385fe3af89a</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>ProfileId</con:name>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="GetPointTypeId" id="6202dae5-9dda-4f34-9b6a-f32b66a09c4c">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>662f9f7b-4946-46e6-81d7-d06517a52c57</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>RefPointTypeId</con:name>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="GetReferencePointType" id="d2c7125d-d2af-4be0-b090-d653178ef72f">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/referencedata/transactions/pointtypes/{pointTypeId}" methodName="GetPointTypeById" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest id="cc3cb9aa-fc57-4d56-992d-1bb607297dc8" mediaType="application/json" name="GetReferencePointType">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://q3alin-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/referencedata/transactions/pointtypes/9553fdc5-b45c-44e2-af75-345ca45b2c66</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="5969f7ca-a35a-4b10-9955-9f41f59f1a1b" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="pointTypeId" value="${#[FeaturesProfileMerge#GetPointTypeId#FetchingPointTypeId]#Response#$[0]['RefPointTypeId']}"/>
          <con:entry key="Accept-Language" value="en-US"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>pointTypeId</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>Accept-Language</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="d653788f-b849-4013-8db6-47ad297cdee5">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c955a23-3567-47af-b6e9-aacfcca8d9aa">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="GenerateARandomNumber" id="61537465-dfd3-42e5-b0f8-37b4676b150f">
    <con:settings/>
    <con:config>
      <script>import static com.jayway.jsonpath.JsonPath.parse

def randomNum =new java.text.SimpleDateFormat("yyyyMMddHHmmssFFFF").format(new Date())</script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="CreateMomentForSurvivorPointMerge" id="57cfaab4-b978-455f-8ebb-acc1116463ef">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/momentmgmt" methodName="AddMoment" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest id="a1688ce7-78e7-40b0-a3d3-fdae0cd31567" mediaType="application/json" name="CreateMomentForSurvivorPointMerge" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://q3alin-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
  "MomentCode": "${EggTypeMoment#MomentCode}${GenerateARandomNumber#result}",
  "MomentResponseValues": [
    {
      "MomentCode": "${EggTypeMoment#MomentCode}${GenerateARandomNumber#result}",
      "MomentType": "${EggTypeMoment#MomentType}",
      "ResponsePropertyName": "BASE INDICATOR",
      "ResponsePropertyValue": "${EggTypeMoment#BaseInd}",
      "Status": "P"
      
    },
    {
      "MomentCode": "${EggTypeMoment#MomentCode}${GenerateARandomNumber#result}",
      "MomentType": "${EggTypeMoment#MomentType}",
      "ResponsePropertyName": "POINT SUBTYPE",
      "ResponsePropertyValue": "${GetReferencePointType#Response#$['PointSubTypes'][0]['PointSubTypeId']}",
      "Status": "P"
      
    },
    {
      "MomentCode": "${EggTypeMoment#MomentCode}${GenerateARandomNumber#result}",
      "MomentType": "${EggTypeMoment#MomentType}",
      "ResponsePropertyName": "POINT TYPE",
      "ResponsePropertyValue": "${#[FeaturesProfileMerge#GetPointTypeId#FetchingPointTypeId]#Response#$[0]['RefPointTypeId']}",
      "Status": "P"
      
    }
  ],
  "StartDate": "${EggTypeMoment#StartDate}",
  "EndDate": "${EggTypeMoment#EndDate}",
  "Description": "${EggTypeMoment#Description}",
  "MomentType": "${EggTypeMoment#MomentType}",
  "MomentEvent": {
    "MomentCode": "${EggTypeMoment#MomentCode}${GenerateARandomNumber#result}",
    "EventType": "${EggTypeMoment#EventType}",
    "MomentQualifyingDateAttribute": "${EggTypeMoment#QualifyingDateAttribute}",
    "MomentQualifyingDateAttributeDrools": "${EggTypeMoment#QualifyingDateAttributeDrools}",
    "MomentOffers": [
      {
        "MomentCode": "${EggTypeMoment#MomentCode}${GenerateARandomNumber#result}",
        "OfferName": "${EggTypeMoment#MomentCode}${GenerateARandomNumber#result}",
        "EventType": "${EggTypeMoment#EventType}",
        "Description": "${EggTypeMoment#Description}",
        "MomentOutcome": {
          "MomentCode": "${EggTypeMoment#MomentCode}${GenerateARandomNumber#result}",
          "EventType": "${EggTypeMoment#EventType}",
          "OfferName": "${EggTypeMoment#MomentCode}${GenerateARandomNumber#result}",
		  "OutcomeEquationUi": "${EggTypeMoment#OutcomeEquationUi}",
          "CalculationTemplate": "${EggTypeMoment#CalculationTemplate}",
          "OutcomeEquationTemplate": "${EggTypeMoment#OutcomeEquationTemplate}",
          "OutcomeEquationDrools": "${EggTypeMoment#OutcomeEquationDrools1}${EggTypeMoment#MomentCode}${GenerateARandomNumber#result}${EggTypeMoment#OutcomeEquationDrools2}${EggTypeMoment#MomentCode}${GenerateARandomNumber#result}${EggTypeMoment#OutcomeEquationDrools3}",
          "FormulaName": "${EggTypeMoment#FormulaName}",
		  "Status": "P"
        },
        "MomentQualifyingRule": {
          "MomentCode": "${EggTypeMoment#MomentCode}${GenerateARandomNumber#result}",
          "EventType": "${EggTypeMoment#EventType}",
          "OfferName": "${EggTypeMoment#MomentCode}${GenerateARandomNumber#result}",
          "RuleEquationUI": "${EggTypeMoment#RuleEquationUI}",
          "RuleEquationDrools": "${EggTypeMoment#RuleEquationDrools}",
          "Status": "P"         
        }
      }
    ]
  },
  "ReleaseState": "P"
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/momentmgmt</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="88474cd3-f0d4-4576-883e-a8ce3beae2a7" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>201</codes>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="contant-type" value="application/json"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>contant-type</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="d653788f-b849-4013-8db6-47ad297cdee5">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c955a23-3567-47af-b6e9-aacfcca8d9aa">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="ActivateMomentForSurvivorPointMerge" id="f86504ed-ced3-4c06-9f60-c4869ef6b8ba">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/momentmgmt/{momentId}/activate" methodName="ActivateMoment" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest id="ce0a792b-c6e9-44d0-82d5-5bba6cfc49b9" mediaType="application/json" name="ActivateMomentForSurvivorPointMerge" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://q3alin-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/momentmgmt/e33c9f50-ce4a-4b3a-b62e-3547404aa837/activate</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="3553c8f5-0fd0-423d-9601-c79b9adfe691" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>204</codes>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="momentId" value="${CreateMomentForSurvivorPointMerge#Response#$['MomentId']}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>momentId</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>Accept-Language</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="d653788f-b849-4013-8db6-47ad297cdee5">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c955a23-3567-47af-b6e9-aacfcca8d9aa">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="ReloadMomentEngineForSurvivorPointMerge" id="e87d9c22-7f77-4b14-8316-376a5909906d">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/operations/engine/refresh" methodName="RefreshEngine" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest id="57c47b89-fe65-498e-93ba-cc0119906e4b" mediaType="application/json" name="ReloadMomentEngineForSurvivorPointMerge" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://q3alin-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/operations/engine/refresh</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="ddbb9ddb-c8ec-445e-8b47-01901233c031" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>201</codes>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="isSyncProcess" value="True"/>
          <con:entry key="refreshAllEngines" value="True"/>
          <con:entry key="Accept-Language" value="en-US"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>refreshAllEngines</con:entry>
          <con:entry>isSyncProcess</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="d653788f-b849-4013-8db6-47ad297cdee5">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c955a23-3567-47af-b6e9-aacfcca8d9aa">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep id="2e45aabe-3654-48a5-8378-97a0933f9871" name="AddPurchaseTransactionForSurvivorProfile" type="restrequest">
    <con:settings/>
    <con:config xsi:type="con:RestRequestStep" methodName="ProcessTransaction" resourcePath="/api/v2/transaction" service="RestAPIs" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest id="718bd064-a7af-4380-abb6-72819bd0b41a" mediaType="application/json" name="AddPurchaseTransactionForSurvivorProfile" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:request>{  
   "TransactionTypeCode":"PR",
   "ProfileId":"${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}",
   "GrossAmount":100.00,
   "TransactionTotalTax":0.00,
   "ShippingAndHandling":0.0,
   "Gratuity":0.0,
   "PostSalesAdjustment":0.0,
   "TransactionNetTotal":100.00,
   "TransactionEligible":100,
   "DiscountAmount":0.00,
   "TransactionNumber":"${=java.util.UUID.randomUUID()}",
   "TransactionDateTime":"${=new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ").format(new Date()+4)}",
   "StoreCode":"PP1501",
   "CurrencyCode":"USD",
   "TransactionDescription":"PR Transaction",
   
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v2/transaction</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="1a8e63d8-5393-464d-b0d5-5c56f76f1c3f" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Program-Code</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="d653788f-b849-4013-8db6-47ad297cdee5">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c955a23-3567-47af-b6e9-aacfcca8d9aa">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="GetPointSummaryForSurvivorProfile" id="c462dc37-18e6-4ebb-ac27-442265f742ed">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/profiles/{profileId}/points/summary" methodName="GetPointsSummary" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="GetPointSummaryForSurvivorProfile" id="90aa5f43-a530-41eb-9446-2dde6c33780e" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/profiles/05ce7ac3-6679-45ad-9ae7-c2287ffd649f/points/summary</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="a2b57955-3fde-4c66-adb1-90891f423c99" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="a9bab836-96dd-4151-b056-c57d1dc0d122" name="JSONPath Match">
          <con:configuration>
            <path>$.[?(@.MomentId == '${CreateMomentForSurvivorPointMerge#Response#$['MomentId']}' &amp;&amp; @.ActTransactionId == '${AddPurchaseTransactionForSurvivorProfile#Response#$['TransactionId']}')].PointsAmount</path>
            <content>[200.0]</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="status" value="A"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>profileId</con:entry>
          <con:entry>status</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Merge Profiles" id="956be928-8ee1-4693-a80d-60236f47d9d3">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>a8cd971b-fab6-43b8-87bd-9544f8860872</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>Body</con:name>
          <con:value>{   "SecondaryId": "${#[Profile#AddVictimProfileRGR#AddProfileRGR]#Response#$['ProfileId']}" }</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="GetPointSummaryForVictimProfileAfterSurvivorPointMerge" id="02da1e4c-0c87-429f-86b8-7b74fce867a1">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/profiles/{profileId}/points/summary" methodName="GetPointsSummary" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="GetPointSummaryForVictimProfileAfterSurvivorPointMerge" id="90aa5f43-a530-41eb-9446-2dde6c33780e" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/profiles/05ce7ac3-6679-45ad-9ae7-c2287ffd649f/points/summary</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="a2b57955-3fde-4c66-adb1-90891f423c99" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="Simple Equals" id="8f7cd02f-db15-46de-92d2-36d53b940e5a" name="Equals">
          <con:configuration>
            <patternText>null</patternText>
            <caseSensitive>true</caseSensitive>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${#[Profile#AddVictimProfileRGR#AddProfileRGR]#Response#$['ProfileId']}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="status" value="A"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>profileId</con:entry>
          <con:entry>status</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="GetPointSummaryForSurvivorProfileAfterSurvivorPointMerge" id="7cb376d8-390e-4112-b674-09a1aebeaa59">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/profiles/{profileId}/points/summary" methodName="GetPointsSummary" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="GetPointSummaryForSurvivorProfileAfterSurvivorPointMerge" id="90aa5f43-a530-41eb-9446-2dde6c33780e" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/profiles/05ce7ac3-6679-45ad-9ae7-c2287ffd649f/points/summary</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="a2b57955-3fde-4c66-adb1-90891f423c99" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="d0bd6514-15f2-44d2-9872-15e0850b921d" name="JSONPath Match">
          <con:configuration>
            <path>$.[?(@.MomentId == '${CreateMomentForSurvivorPointMerge#Response#$['MomentId']}' &amp;&amp; @.ActTransactionId == '${AddPurchaseTransactionForSurvivorProfile#Response#$['TransactionId']}')].PointsAmount</path>
            <content>[200.0]</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="status" value="A"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>profileId</con:entry>
          <con:entry>status</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Deactivate Moment" id="e8bb479f-dee0-47fa-aa17-72c05e0bc119">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>c903534c-32ad-44dc-9cb6-a72fc8de1482</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>MomentId</con:name>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>86f3892d-e228-4868-a1fc-3ce6a924f63a</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>ca834cd3-767e-477d-865b-46405bc585c1</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>94c96d1c-10ea-4998-a962-2c4e34109787</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>956be928-8ee1-4693-a80d-60236f47d9d3</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>6202dae5-9dda-4f34-9b6a-f32b66a09c4c</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
</con:testCase>
