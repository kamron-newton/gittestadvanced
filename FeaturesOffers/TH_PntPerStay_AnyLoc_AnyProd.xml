<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="066759b1-f7f2-4015-9de4-30c0a1785627" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="TH_PntPerStay_AnyLoc_AnyProd" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="066759b1-f7f2-4015-9de4-30c0a1785627fileName">TH_PntPerStay_AnyLoc_AnyProd</con:setting>
  </con:settings>
  <con:testStep type="restrequest" name="ProcessMarketingEvent" id="6702d745-b3f2-426e-b867-51324abd4e28">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/engage/marketingevent" methodName="ProcessMarketingEvent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="ProcessMarketingEvent" id="c3da61b0-81ba-449f-abb7-d1e58290c294" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request><![CDATA[{
  "MarketingEventChannels": [
    {
      "MarketingEventChannelId": "bce4fc4f-1b7d-2d49-b498-cea4e90a6105",
      "ChannelName": "No Channel"
    }
  ],
   "EventName": "PNT_PER_STAY_OFFER_${=new java.text.SimpleDateFormat("mmddyyyyhhmmssmmm").format(new Date())}",
  "EventCode": "PNT_PER_STAY_OFFER_${=new java.text.SimpleDateFormat("mmddyyyyhhmmssmmm").format(new Date())}",
  "EventStatus": "DRAFT",
  "ProgramCode": "PP",
  "PackagedAudience": {
    "PackagedAudienceId": "7ae1f987-515e-4669-e053-5ca8e70ad3ee",
    "AudienceName": "All Members",
    "AudienceDescription": "All enrolled members with an active profile status",
    "HarmonyTemplate": {
      "type": "AND",
      "groupType": "GROUP",
      "conditions": [
        {
          "type": "AND",
          "groupType": "GROUP",
          "conditions": [
            {
              "type": "ATTRIBUTE",
              "attributeName": "PROGRAMCODE",
              "attributeId": "/{/{PROFILE_MASTER~PROGRAMCODE~ID/}/}",
              "operator": "EQ",
              "values": [
                "/{/{PROGRAMCODE/}/}"
              ],
              "tableId": "PROFILE_MASTER",
              "caseSensitive": false
            },
            {
              "type": "ATTRIBUTE",
              "attributeName": "ENROLLMENTSTATUS",
              "attributeId": "/{/{PROFILE_MASTER~ENROLLMENTSTATUS~ID/}/}",
              "operator": "EQ",
              "values": [
                "A"
              ],
              "tableId": "PROFILE_MASTER",
              "caseSensitive": false
            }
          ]
        },
        {
          "type": "ATTRIBUTE",
          "attributeName": "PROFILESTATUS",
          "attributeId": "/{/{PROFILE_MASTER~PROFILESTATUS~ID/}/}",
          "operator": "EQ",
          "values": [
            "A"
          ],
          "tableId": "PROFILE_MASTER",
          "caseSensitive": false
        }
      ]
    },
    "PackagedAudienceParams": [
      {
        "PackagedAudienceParamId": "f0a885b4-b773-5c52-e053-5dedef0a74de",
        "PackagedAudienceId": "7ae1f987-515e-4669-e053-5ca8e70ad3ee",
        "ParamName": "All Members",
        "ParamCode": "ALLMEMBERS_AUDIPRAM",
        "ParamDescription": "All Members",
        "DataType": "Label",
        "ParamControl": "Label",
        "IsRequired": false
      }
    ],
    "AudienceMomentEligibleCriteriaPart": "PurchaseTxn.Enrollment.MemberStatus == \\\"A\\\"",
    "SurveyMomentEligibleCriteriaPart": "ProfileSurveyResponse.Enrollment.MemberStatus == \\\"A\\\""
  },
  "AudienceSource": "PACKAGED_AUDIENCE",
  "PackagedOffer": {
    "PackagedOfferId": "e43cdcc4-f073-7a37-e053-40f1ef0aefa2",
    "PackagedOfferCode": "FIXED_POINTS_PER_STAY",
    "PackagedOfferName": "Earn points for stay purchased",
    "PackagedOfferDescription": "Earn points for staying at a property",
    "MomentTemplate": "{\n\"MomentCode\": \"/{/{MOMENTCODE/}/}\",\n\"StartDate\": \"/{/{STARTDATE/}/}\",\n\"EndDate\": \"/{/{ENDDATE/}/}\",\n\"Description\": \"/{/{DESCRIPTION/}/}\",\n\"MomentType\": \"PROMOTIONAL_CURRENCY\",\n\"MomentStatus\": \"A\",\n\"MomentResponseValues\": [\n{\n\"MomentCode\": \"/{/{MOMENTCODE/}/}\",\n\"MomentType\": \"PROMOTIONAL_CURRENCY\",\n\"ResponsePropertyName\": \"BASE INDICATOR\",\n\"ResponsePropertyValue\": \"N\",\n\"Status\": \"P\"\n},\n{\n\"MomentCode\": \"/{/{MOMENTCODE/}/}\",\n\"MomentType\": \"PROMOTIONAL_CURRENCY\",\n\"ResponsePropertyName\": \"ENGAGE INDICATOR\",\n\"ResponsePropertyValue\": \"Y\",\n\"Status\": \"P\"\n},\n{\n\"MomentCode\": \"/{/{MOMENTCODE/}/}\",\n\"MomentType\": \"PROMOTIONAL_CURRENCY\",\n\"ResponsePropertyName\": \"POINT SUBTYPE\",\n\"ResponsePropertyValue\": \"/{/{DEFAULTPOINTSUBTYPEID/}/}\",\n\"Status\": \"P\"\n},\n{\n\"MomentCode\": \"/{/{MOMENTCODE/}/}\",\n\"MomentType\": \"PROMOTIONAL_CURRENCY\",\n\"ResponsePropertyName\": \"POINT TYPE\",\n\"ResponsePropertyValue\": \"/{/{DEFAULTPOINTTYPEID/}/}\",\n\"Status\": \"P\"\n}\n],\n\"MomentEvent\": {\n\"MomentCode\": \"/{/{MOMENTCODE/}/}\",\n\"EventType\": \"PurchaseTxn\",\n\"MomentQualifyingDateAttribute\": \"PurchaseTxn.TransactionDateTime\",\n\"MomentOffers\": [\n{\n\"MomentCode\": \"/{/{MOMENTCODE/}/}\",\n\"EventType\": \"PurchaseTxn\",\n\"OfferName\": \"/{/{MOMENTCODE/}/}\",\n\"Description\": \"/{/{DESCRIPTION/}/}\",\n\"MomentOutcome\": {\n \"MomentCode\": \"/{/{MOMENTCODE/}/}\",\n \"EventType\": \"PurchaseTxn\",\n \"OfferName\": \"/{/{MOMENTCODE/}/}\",\n \"OutcomeEquationUi\": \"/{/{POINT_AMT/}/}\",\n \"CalculationTemplate\": \"<fixedpoints,[Number]>\",\n \"OutcomeEquationTemplate\": \"%5B%7B%22name%22%3A%22fixedpoints%22%2C%22type%22%3A%22Number%22%2C%22objType%22%3A%22var%22%2C%22id%22%3A%22variable_0%22%2C%22value%22%3A%22100%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22%22%2C%22filterType%22%3A%22%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%7D%2C%7B%22name%22%3A%22%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22drools%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22String.valueOf(100)%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22%22%2C%22filterType%22%3A%22%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%7D%5D\",\n \"FormulaName\": \"FIXEDAMT\",\n \"Status\": \"A\"\n},\n\"MomentQualifyingRule\": {\n \"MomentCode\": \"/{/{MOMENTCODE/}/}\",\n \"EventType\": \"PurchaseTxn\",\n \"OfferName\": \"/{/{MOMENTCODE/}/}\",\n \"RuleEquationUI\": \"PurchaseTxn.ProgramCode == \\\"/{/{PROGRAMCODE/}/}\\\" && /{/{MOMENT_ELIGIBILITY_CRITERIA_PART/}/} && PurchaseTxn.TransactionDetails.EligibleRevenue >= 0 && PurchaseTxn./{/{OPTIONALLOCATION/}/} && PurchaseTxn.TransactionDetails./{/{OPTIONALPRODUCT/}/} && PurchaseTxn.Nights >= /{/{MINIMUM_NIGHTS/}/}\",\n \"MomentCap\": [/{/{MAX_OFFERS_PER_MEMBER_TEMPLATE/}/}/{/{MAX_POINTS_PER_MEMBER_TEMPLATE/}/}]\n},\n \"Status\": \"A\"\n }\n ]\n},\n\"Status\": \"A\",\n\"BestOfferIndicator\": false,\n\"AdvancedModeIndicator\": false,\n\"IsTestUser\": false,\n\"ReleaseState\": \"P\"\n}",
    "SimulationQueryTemplate": "SELECT\nCOUNT(distinct profile_id) AS unique_customers,\nSUM(profile_trans) AS total_offers,\nsum(profile_points) as total_points,\nceil(SUM(profile_trans)//{/{SIMULATION_DATE_DIFF/}/}) AS avg_offers_per_day,\nceil(SUM(profile_points)//{/{SIMULATION_DATE_DIFF/}/}) AS avg_points_per_day,\nceil((SUM(profile_trans)//{/{SIMULATION_DATE_DIFF/}/})*/{/{OFFER_DATE_DIFF/}/}) AS projected_total_offers,\nceil((SUM(profile_points)//{/{SIMULATION_DATE_DIFF/}/})*/{/{OFFER_DATE_DIFF/}/}) AS projected_total_points\nFROM\n(\n /{/{OFFERS_QUERY/}/}\n FROM T_ACT_TRANSACTION INNER JOIN V_TRANSACTION on V_TRANSACTION.TRANSACTION_ID = T_ACT_TRANSACTION.TRANSACTION_ID\n /{/{PRODUCTSUBQUERY/}/}\n\t\t\t/{/{LOCATIONSUBQUERY/}/}\n WHERE T_ACT_TRANSACTION.PROGRAM_CODE = :ProgramCode AND T_ACT_TRANSACTION.STATUS IN('A','P') and(T_ACT_TRANSACTION.TRANSACTION_TYPE_CODE IN('PR', 'EP') OR(T_ACT_TRANSACTION.TRANSACTION_TYPE_CODE IN('RT', 'ER', 'EX') and ACT_TRANSACTION_XREF_ID is null))\n AND T_ACT_TRANSACTION.TRANSACTION_DATE >= :SIMULATION_START_DATE and T_ACT_TRANSACTION.TRANSACTION_DATE < :SIMULATION_END_DATE \n\t\t\tAND V_TRANSACTION.NIGHTS>=/{/{MINIMUM_NIGHTS/}/}\n AND /{/{PRODUCT_HIERARCHY/}/} AND (SELECT PARAMETER_VALUE from T_SYS_CONFIG_DEFAULT where PARAMETER_NAME = 'MOMENT_ITEM_NUMBER_TYPE') = T_ACT_TRANSACTION_DETAIL.ITEM_NUMBER_TYPE_CODE \t\t\t\n AND /{/{TRANSACTION_LOCATION/}/}\t\t\t\n /{/{AUDIENCE_QUERY/}/}\n /{/{OFFER_QUERY_GROUP_BY/}/}\n)",
    "OfferMomentEligibleCriteriaPart": "PurchaseTxn.Offers.OfferCode == \\\"/{/{OFFERCODEOFFERNAME/}/}\\\"",
    "PackagedOfferParams": [
      {
        "PackagedOfferParamId": "e43cdcc4-f673-7a37-e053-40f1ef0aefa2",
        "PackagedOfferId": "e43cdcc4-f073-7a37-e053-40f1ef0aefa2",
        "ParamName": "Minimum nights (optional)",
        "ParamCode": "MINIMUM_NIGHTS",
        "ParamDescription": "0",
        "DefaultValue": "0",
        "DataType": "input",
        "ParamControl": "number",
        "IsRequired": false,
        "Value": "2",
        "PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_ACTIVITY"
      },
      {
        "PackagedOfferParamId": "e43cdcc4-f373-7a37-e053-40f1ef0aefa2",
        "PackagedOfferId": "e43cdcc4-f073-7a37-e053-40f1ef0aefa2",
        "ParamName": "Point Amount",
        "ParamCode": "POINT_AMT",
        "ParamDescription": "0",
        "DefaultValue": "0",
        "DataType": "input",
        "ParamControl": "number",
        "IsRequired": false,
        "Value": "10",
        "PanelId": "e0e698ac-4291-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_REWARD"
      },
      {
        "PackagedOfferParamId": "e43cdcc4-f273-7a37-e053-40f1ef0aefa2",
       "PackagedOfferId": "e43cdcc4-f073-7a37-e053-40f1ef0aefa2",
        "ParamName": "Maximum offers per member (optional)",
        "ParamCode": "MAX_OFFERS_PER_MEMBER",
        "ParamDescription": "0",
        "DataType": "input",
        "ParamControl": "number",
        "IsRequired": false,
        "Value": "1",
        "PanelId": "e0e698ac-4391-d25d-e053-5dedef0ac6ef",
        "PanelCode": "OFFER_LIMITS"
      },
      {
        "PackagedOfferParamId": "e43cdcc4-f573-7a37-e053-40f1ef0aefa2",
        "PackagedOfferId": "e43cdcc4-f073-7a37-e053-40f1ef0aefa2",
        "ParamName": "Purchase",
        "ParamCode": "OPTIONALPRODUCT",
        "DataType": "custom",
        "ParamControl": "optionalproduct",
        "IsRequired": true,
        "Value": "Any rate code / product category",
        "ParamCustomValue": {
          "ProductLevelList": [],
          "ProductCode": [],
          "DisplayProductCode": [],
          "ProductSelectType": 2
        },
        "PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_ACTIVITY"
      },
      {
        "PackagedOfferParamId": "e43cdcc4-f173-7a37-e053-40f1ef0aefa2",
        "PackagedOfferId": "e43cdcc4-f073-7a37-e053-40f1ef0aefa2",
        "ParamName": "Maximum points issued per member (optional)",
        "ParamCode": "MAX_POINTS_PER_MEMBER",
        "ParamDescription": "0",
        "DataType": "input",
        "ParamControl": "number",
        "IsRequired": false,
        "PanelId": "e0e698ac-4391-d25d-e053-5dedef0ac6ef",
        "PanelCode": "OFFER_LIMITS"
      },
      {
        "PackagedOfferParamId": "e43cdcc4-f473-7a37-e053-40f1ef0aefa2",
        "PackagedOfferId": "e43cdcc4-f073-7a37-e053-40f1ef0aefa2",
        "ParamName": "Visit",
        "ParamCode": "OPTIONALLOCATION",
        "DataType": "custom",
        "ParamControl": "optionallocation",
        "IsRequired": true,
        "Value": "Any location",
        "ParamCustomValue": {
          "StoreCode": [],
          "DisplayStoreCode": [],
          "LocationSelectType": 2
        },
        "PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_ACTIVITY"
      }
    ],
    "PackagedOfferCategoryId": "17872aea-5187-8d43-a4be-555c17300611",
    "PackagedOfferCategoryCode": "TEMPLATES"
  },
  "OfferStartDate": "${=new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ").format(new Date()-5)}",
	"OfferEndDate": "${=new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ").format(new Date()+2)}",
  "OptInStatus": false,
  "AddOnlineMessageToEmail": false,
  "BusinessUnitTimeZone": "UTC",
  "Status": "A"
}]]></con:request>
        <con:originalUri>https://d2aldv-pveapi.skynetlowerenv.com/api/v1/engage/marketingevent</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="146d80c7-ce19-4c75-89f1-6b3cd1149cfd" name="Smart Assertion for HTTP status code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Wed, 18 May 2022 08:19:33 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>7770</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>d7eb7153-7645-bc20-7c04-fcea2c6bd5f1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1029ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMHO9PRKU0GP:000002E6</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Wed, 18 May 2022 08:19:33 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"7770","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"d7eb7153-7645-bc20-7c04-fcea2c6bd5f1","content-type":"application/json; charset=utf-8","process-time":"1029ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMHO9PRKU0GP:000002E6"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="validateOffer" value="false"/>
          <con:entry key="validateAudience" value="false"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>validateAudience</con:entry>
          <con:entry>validateOffer</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
          <con:entry>Program-Code</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="ApproveMarketingEvent" id="d1d2b1b8-e145-42bc-9bf5-5d5ca3ffaa59">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>ac44e245-733a-4139-a950-3f774b513c3b</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>EventCode</con:name>
          <con:value>${ProcessMarketingEvent#Response#$['EventCode']}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="Delay 2s" id="1cbbe2f8-aa03-4527-9c6b-e3ccbb8fe24b">
    <con:settings/>
    <con:config>
      <delay>2000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="DeployMarketingEvent" id="044e03ca-4963-46e2-a5cd-46a157c868ab">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>4e31c31c-5e5f-4dab-8caf-7c5cf7fef68f</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>EventCode</con:name>
          <con:value>${ProcessMarketingEvent#Response#$['EventCode']}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="WaitForBatchJob" id="080c6a9a-8ef7-4046-90a0-68b6d8e85b83">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>1525e308-cfae-4277-af49-4908cfbd9e1d</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>JobId</con:name>
          <con:value>${#[OffersPrerequisite#DeployMarketingPromotion#DeployMarketingPromotion]#Response#$['BatchJobId']}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="GetMarketingEventbyEventCode" id="413f4b6c-417a-46d3-a249-c992ef260cf6">
    <con:settings/>
    <con:config service="RestAPIs" methodName="GetMarketingEventbyEventCode" resourcePath="/api/v1/engage/marketingevent/eventdetails/{eventCode}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="GetMarketingEventbyEventCode" id="65238c02-5ba1-41b4-90f5-cc1d0ca30e98" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/engage/marketingevent/eventdetails/PROMO_CODE763287613</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="5f5cfc1a-2b2f-40df-ab74-ddbf4b4e2d03" name="Smart Assertion for HTTP status code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Tue, 05 Apr 2022 07:05:24 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>8879</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>e4c1840c-acd9-1a74-2f84-658961b0dee4</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>40ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMGMGV10NOG2:00000019</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Tue, 05 Apr 2022 07:05:24 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"8879","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"e4c1840c-acd9-1a74-2f84-658961b0dee4","content-type":"application/json; charset=utf-8","process-time":"40ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMGMGV10NOG2:00000019"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="eventCode" value="${ProcessMarketingEvent#Response#$['EventCode']}"/>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
        </con:parameters>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="GetMomentByCode" id="4c9fe7ea-c3a8-414f-aae4-966e9095c150">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>f4019890-b4bf-40e5-b64c-59b6bbe7b94d</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>EventCode</con:name>
          <con:value>${ProcessMarketingEvent#Response#$['EventCode']}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
</con:testCase>
