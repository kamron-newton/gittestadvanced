<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="c1354b07-7b76-4973-8147-53cc0d233314" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="Verify Transaction Process respects EXCLUDE_FROM_BASE_IND configured through Admin UI apis instead of batch load" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="c1354b07-7b76-4973-8147-53cc0d233314fileName">Verify-Transaction-Process-respects-EXCLUDE_FROM_BASE_IND-configured-through-Admin-UI-apis-instead-of-batch-load</con:setting>
  </con:settings>
  <con:testStep type="restrequest" name="Set transaction program settings" id="445a1aec-8b82-441c-a68a-37f1d66018f1">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/referencedata/programs/programsettings" methodName="UpdateProgramSettings" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest id="d3640b0f-5085-4ed6-8b0e-f59fb4fdaab6" mediaType="application/json" name="Set transaction program settings" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          <con:setting id="RecordRequestRepresentations">true</con:setting>
        </con:settings>
        <con:endpoint>https://q3alin-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>[{
  "ParameterName": "MOMENT_TRANSACTION_BYPASS",
  "ParameterValue": "N"
},
{
  "ParameterName": "ENROLLMENT_ACTIVATION",
  "ParameterValue": "N"
},
{
  "ParameterName": "USE_PRODUCT_HIERARCHY",
  "ParameterValue": "Y"
}]</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/referencedata/programs/programsettings</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="1435fc56-5ad1-452e-b31e-9ec75e6d0721" name="Verify 200 HTTP Status">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Tue, 19 Apr 2022 22:14:46 GMT</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Microsoft-IIS/10.0</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>131857</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-powered-by']</con:path>
              <con:element>x-powered-by</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>ASP.NET</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>6469c0a5-7d3e-465a-ee43-6c4ff726bb8b</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>3910ms</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>80000017-000a-fb00-b63f-84710c7967bb</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Tue, 19 Apr 2022 22:14:46 GMT","server":"Microsoft-IIS/10.0","content-length":"131857","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","x-powered-by":"ASP.NET","correlationid":"6469c0a5-7d3e-465a-ee43-6c4ff726bb8b","content-type":"application/json; charset=utf-8","process-time":"3910ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"80000017-000a-fb00-b63f-84710c7967bb"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>Authorization</con:entry>
          <con:entry>Program-Code</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>content-type</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="d653788f-b849-4013-8db6-47ad297cdee5">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c955a23-3567-47af-b6e9-aacfcca8d9aa">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="Generate SKU" id="bd5ac173-d1ad-4c1c-b981-a94d21dd0702">
    <con:settings/>
    <con:config>
      <script>java.util.UUID.randomUUID().toString().substring(0,30)</script>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Add Product" id="c25fcff7-acf1-4fa7-bfbf-fdcf06cc1c38">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>7787e529-4236-4e55-85ad-64030771572e</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>AccountSourceCode</con:name>
        </con:property>
        <con:property>
          <con:name>ActiveIndicator</con:name>
        </con:property>
        <con:property>
          <con:name>ActivityDate</con:name>
        </con:property>
        <con:property>
          <con:name>AlternateSKU</con:name>
        </con:property>
        <con:property>
          <con:name>BrandCode</con:name>
        </con:property>
        <con:property>
          <con:name>BrandName</con:name>
        </con:property>
        <con:property>
          <con:name>BrandOrgCode</con:name>
        </con:property>
        <con:property>
          <con:name>ChainName</con:name>
        </con:property>
        <con:property>
          <con:name>ColorCode</con:name>
        </con:property>
        <con:property>
          <con:name>CreateFileId</con:name>
        </con:property>
        <con:property>
          <con:name>CreateRecordNumber</con:name>
        </con:property>
        <con:property>
          <con:name>CustomProductCode</con:name>
        </con:property>
        <con:property>
          <con:name>Description</con:name>
        </con:property>
        <con:property>
          <con:name>EndDate</con:name>
        </con:property>
        <con:property>
          <con:name>ExcludeFromBaseIndicator</con:name>
          <con:value>Y</con:value>
        </con:property>
        <con:property>
          <con:name>FullImageLarge</con:name>
        </con:property>
        <con:property>
          <con:name>FullImageMedium</con:name>
        </con:property>
        <con:property>
          <con:name>FullImageSmall</con:name>
        </con:property>
        <con:property>
          <con:name>Gender</con:name>
        </con:property>
        <con:property>
          <con:name>GLCategory</con:name>
        </con:property>
        <con:property>
          <con:name>GLDivision</con:name>
        </con:property>
        <con:property>
          <con:name>JsonExternalData</con:name>
        </con:property>
        <con:property>
          <con:name>ListPrice</con:name>
        </con:property>
        <con:property>
          <con:name>ProdHierarchyName</con:name>
        </con:property>
        <con:property>
          <con:name>ProductCode</con:name>
        </con:property>
        <con:property>
          <con:name>ProductComment</con:name>
        </con:property>
        <con:property>
          <con:name>ProductId</con:name>
          <con:value>60902e54-c0ae-4e90-a7d6-82e65fb09297</con:value>
        </con:property>
        <con:property>
          <con:name>ProductImage</con:name>
        </con:property>
        <con:property>
          <con:name>ProductLargeImage</con:name>
        </con:property>
        <con:property>
          <con:name>ProductLongDescription</con:name>
        </con:property>
        <con:property>
          <con:name>ProductName</con:name>
        </con:property>
        <con:property>
          <con:name>ProductSmallImage</con:name>
        </con:property>
        <con:property>
          <con:name>Season</con:name>
        </con:property>
        <con:property>
          <con:name>SizeCode</con:name>
        </con:property>
        <con:property>
          <con:name>SKU</con:name>
          <con:value>${Generate SKU#result}</con:value>
        </con:property>
        <con:property>
          <con:name>SKUDesc</con:name>
        </con:property>
        <con:property>
          <con:name>SKUName</con:name>
        </con:property>
        <con:property>
          <con:name>SKUOption1</con:name>
        </con:property>
        <con:property>
          <con:name>SKUOption2</con:name>
        </con:property>
        <con:property>
          <con:name>SKUOption3</con:name>
        </con:property>
        <con:property>
          <con:name>SourceAccountNumber</con:name>
        </con:property>
        <con:property>
          <con:name>StartDate</con:name>
        </con:property>
        <con:property>
          <con:name>UnitCode</con:name>
        </con:property>
        <con:property>
          <con:name>UOM</con:name>
        </con:property>
        <con:property>
          <con:name>UPC</con:name>
        </con:property>
        <con:property>
          <con:name>UpdateFileId</con:name>
        </con:property>
        <con:property>
          <con:name>UpdateRecordNumber</con:name>
        </con:property>
        <con:property>
          <con:name>VendorCode</con:name>
        </con:property>
        <con:property>
          <con:name>VendorName</con:name>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>ProductId</con:entry>
      </con:returnProperties>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Add Product Categories" id="1fe0d326-9fd2-402c-b48c-ee83a605da6a">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>81cf1b69-9ace-4462-8768-2ed6c7604124</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>Sku</con:name>
          <con:value>${Generate SKU#result}</con:value>
        </con:property>
        <con:property>
          <con:name>Upc</con:name>
        </con:property>
        <con:property>
          <con:name>CustomProductCode</con:name>
        </con:property>
        <con:property>
          <con:name>ChainName</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>CategoryScheme</con:name>
        </con:property>
        <con:property>
          <con:name>Level1Code</con:name>
        </con:property>
        <con:property>
          <con:name>ProductCategoryId</con:name>
          <con:value/>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Add Profile" id="d5b5090c-5a7f-46af-ae54-7349b20b192e">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>09d0b29f-fbfa-4136-9573-3b813c1795b3</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>ProfileId</con:name>
          <con:value>bda2a129-c00c-4a18-948a-305aca2db29e</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>ProfileId</con:entry>
      </con:returnProperties>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="GetPointTypes" id="c5e9063e-1c2c-4893-b42b-d073c8e8291c">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>3c8dc93b-cef5-4586-8b89-819d8b4ef5b9</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>PointsId</con:name>
          <con:value>3302f891-4e3c-47d3-8a77-08271ed95816</con:value>
        </con:property>
        <con:property>
          <con:name>EggsId</con:name>
          <con:value>eb20ebb5-c7c2-41bf-8ea2-c49f58daee03</con:value>
        </con:property>
        <con:property>
          <con:name>StdPointsId</con:name>
          <con:value>46c30e1c-463f-4cef-9acd-afb38d0ac269</con:value>
        </con:property>
        <con:property>
          <con:name>PromoPointsId</con:name>
          <con:value>6e18ffa0-840a-4fba-89e2-7b40fe728eef</con:value>
        </con:property>
        <con:property>
          <con:name>HatchedEggsId</con:name>
          <con:value>e05d456f-502d-4bcb-9ac8-fdd3b172a70b</con:value>
        </con:property>
        <con:property>
          <con:name>UnhatchedEggsId</con:name>
          <con:value>326640e3-61ac-49d5-bf83-d7815e4c1e18</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>PointsId</con:entry>
        <con:entry>EggsId</con:entry>
        <con:entry>StdPointsId</con:entry>
        <con:entry>PromoPointsId</con:entry>
        <con:entry>HatchedEggsId</con:entry>
        <con:entry>UnhatchedEggsId</con:entry>
      </con:returnProperties>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Upsert Moment" id="95683f69-baad-4d20-8764-4db48f22d75a">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>58a85117-5558-4be0-b68f-214c9fbde4c3</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>MomentName</con:name>
          <con:value>ELIGIBLE_CLOTHES</con:value>
        </con:property>
        <con:property>
          <con:name>CreateBody</con:name>
          <con:value><![CDATA[{    "MomentTypeId":"2e240dd2-4402-446a-8f93-1a6749d696df",    "Description":"Moment that earns from eligible revenue on line items",    "MomentCode":"$${#TestCase#MomentName}",    "MomentResponseValues":[       {          "MomentCode":"$${#TestCase#MomentName}",          "MomentType":"PROMOTIONAL_CURRENCY",          "ResponsePropertyName":"BASE INDICATOR",          "ResponsePropertyValue":"N",          "Status":"A"       },       {          "MomentCode":"$${#TestCase#MomentName}",          "MomentType":"PROMOTIONAL_CURRENCY",          "ResponsePropertyName":"ENGAGE INDICATOR",          "ResponsePropertyValue":"N",          "Status":"A"       },       {          "MomentCode":"$${#TestCase#MomentName}",          "MomentType":"PROMOTIONAL_CURRENCY",          "ResponsePropertyName":"NEGATE OUTCOME",          "ResponsePropertyValue":"N",          "Status":"A"       },       {          "MomentCode":"$${#TestCase#MomentName}",          "MomentType":"PROMOTIONAL_CURRENCY",          "ResponsePropertyName":"POINT SUBTYPE",          "ResponsePropertyValue":"${GetPointTypes#HatchedEggsId}",          "Status":"A"       },       {          "MomentCode":"$${#TestCase#MomentName}",          "MomentType":"PROMOTIONAL_CURRENCY",          "ResponsePropertyName":"POINT TYPE",          "ResponsePropertyValue":"${GetPointTypes#EggsId}",          "Status":"A"       }    ],    "MomentType":"PROMOTIONAL_CURRENCY",    "StartDate":"2021-12-01T00:00:00Z",    "EndDate":"2031-12-31T00:00:00Z",    "MomentStatus":"A",    "MomentEvent":{       "MomentCode":"$${#TestCase#MomentName}",       "EventType":"PurchaseTxn",       "EventId":"07df3fa2-32c0-4d35-841d-6dcfa4ef3538",       "MomentQualifyingDateAttribute":"PurchaseTxn.TransactionDateTime",       "MomentQualifyingDateAttributeDrools":"$PurchaseTxn:PurchaseTxnC(isItBetween(TransactionDateTime,\"12/01/2021 12:00:00 AM\",\"12/31/2031 12:00:00 AM\"))",       "MomentOffers":[          {             "MomentOfferId":null,             "MomentCode":"$${#TestCase#MomentName}",             "EventType":"PurchaseTxn",             "OfferName":"$${#TestCase#MomentName}",             "Description":"Testing",             "MomentOutcome":{                "MomentCode":"$${#TestCase#MomentName}",                "EventType":"PurchaseTxn",                "OfferName":"$${#TestCase#MomentName}",                "OutcomeEquationUi":"round(1 * sumQualifiedItems(PurchaseTxn.TransactionDetails.EligibleRevenue))",                "CalculationTemplate":"round(<VariableFactor,[Number]> * sumQualifiedItems(<DollarValueGross,[Number]>))",                "OutcomeEquationTemplate":"%5B%7B%22name%22%3A%22round%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22func%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22Math.round%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22filterType%22%3A%22A%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22(%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22A%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22VariableFactor%22%2C%22type%22%3A%22Number%22%2C%22objType%22%3A%22var%22%2C%22id%22%3A%22variable_0%22%2C%22value%22%3A%221%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22filterType%22%3A%22A%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%7D%2C%7B%22name%22%3A%22%20%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22A%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22*%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22A%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22%20%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22A%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22sumQualifiedItems%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22func%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22sumQualifiedItems%22%2C%22filterType%22%3A%22C%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22(%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22sumQualifiedItems%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22C%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22DollarValueGross%22%2C%22type%22%3A%22Number%22%2C%22objType%22%3A%22var%22%2C%22id%22%3A%22variable_1%22%2C%22value%22%3A%22PurchaseTxn.TransactionDetails.EligibleRevenue%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22sumQualifiedItems%22%2C%22filterType%22%3A%22C%22%2C%22drools%22%3A%22%24sumOfItems.doubleValue()%22%2C%22collectionAttribute%22%3Atrue%2C%22refId%22%3A%22%22%7D%2C%7B%22name%22%3A%22)%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22sumQualifiedItems%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22C%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22)%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22A%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22drools%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22String.valueOf(new%20Double(Math.round(1%20*%20new%20Double((%24sumOfItems.doubleValue())))))%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22%22%2C%22filterType%22%3A%22%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%7D%5D",                "OutcomeEquationDrools":"MomentParam[] params = new MomentParam[] {new MomentParam(\"OfferName\",\"TESTING\"),new MomentParam(\"QualifyingDateAttributeValue\",$PurchaseTxn.getTransactionDateTime())};\nMomentParam[] outcomeValues = null;\nmo.add(new MomentOutcome(\"TESTING\",String.valueOf(new Double(Math.round(1 * new Double(($sumQualifiedItems_PurchaseTxnTransactionDetailsEligibleRevenue.doubleValue()))))),params, outcomeValues));\n",                "FormulaName":"SUM_QUALIFIED_ITEMS",                "Status":"A"             },             "MomentQualifyingRule":{                "MomentCode":"$${#TestCase#MomentName}",                "EventType":"PurchaseTxn",                "OfferName":"$${#TestCase#MomentName}",                "RuleEquationUI":"PurchaseTxn.ProgramCode==\"PP\"&&PurchaseTxn.TransactionDetails.EligibleRevenue>0",                "RuleEquationDrools":"PurchaseTxnC(ProgramCode == \"PP\") && ($PurchaseTxnTransactionDetails : PurchaseTxn.TransactionDetailsC(EligibleRevenue > 0) from $PurchaseTxn.TransactionDetails)\n accumulate($item : PurchaseTxn.TransactionDetailsC(EligibleRevenue > 0) from $PurchaseTxn.TransactionDetails, $sumQualifiedItems_PurchaseTxnTransactionDetailsEligibleRevenue : sum($item.getEligibleRevenue()))",                "MomentCap":[                                   ],                "TimeRangeCap":[                   {                      "CapId":null,                      "MomentCode":"$${#TestCase#MomentName}",                      "EventType":"PurchaseTxn",                      "OfferName":"$${#TestCase#MomentName}",                      "CapName":"MonthlyIssuedCount",                      "CapValue":null,                      "CapType":"OUTCOMEISSUED",                      "IsTimeRangeCap":true,                      "Duration":"Monthly",                      "DurationDescription":"Month (1st day-last day of the month)",                      "IsDisplayed":false,                      "Status":"A"                   },                   {                      "CapId":null,                      "MomentCode":"$${#TestCase#MomentName}",                      "EventType":"PurchaseTxn",                      "OfferName":"$${#TestCase#MomentName}",                      "CapName":"DailyIssuedCount",                      "CapValue":null,                      "CapType":"OUTCOMEISSUED",                      "IsTimeRangeCap":true,                      "Duration":"Daily",                      "DurationDescription":"Day (12:00am-11:59pm)",                      "IsDisplayed":false,                      "Status":"A"                   },                   {                      "CapId":null,                      "MomentCode":"$${#TestCase#MomentName}",                      "EventType":"PurchaseTxn",                      "OfferName":"$${#TestCase#MomentName}",                      "CapName":"WeeklyIssuedCount",                      "CapValue":null,                      "CapType":"OUTCOMEISSUED",                      "IsTimeRangeCap":true,                      "Duration":"Weekly",                      "DurationDescription":"Week (Sunday-Saturday)",                      "IsDisplayed":false,                      "Status":"A"                   }                ],                "Status":"A"             },             "Status":"A"          }       ],       "Status":"A"    },    "BestOfferIndicator":false,    "AdvancedModeIndicator":false,    "ReleaseState":"P",    "IsTestUser":false,    "Status":"A" }]]></con:value>
        </con:property>
        <con:property>
          <con:name>UpdateBody</con:name>
          <con:value><![CDATA[{    "MomentTypeId":"2e240dd2-4402-446a-8f93-1a6749d696df",    "Description":"Moment that earns from eligible revenue on line items",    "MomentCode":"$${#TestCase#MomentName}",    "MomentResponseValues":[       {          "MomentCode":"$${#TestCase#MomentName}",          "MomentType":"PROMOTIONAL_CURRENCY",          "ResponsePropertyName":"BASE INDICATOR",          "ResponsePropertyValue":"N",          "Status":"A"       },       {          "MomentCode":"$${#TestCase#MomentName}",          "MomentType":"PROMOTIONAL_CURRENCY",          "ResponsePropertyName":"ENGAGE INDICATOR",          "ResponsePropertyValue":"N",          "Status":"A"       },       {          "MomentCode":"$${#TestCase#MomentName}",          "MomentType":"PROMOTIONAL_CURRENCY",          "ResponsePropertyName":"NEGATE OUTCOME",          "ResponsePropertyValue":"N",          "Status":"A"       },       {          "MomentCode":"$${#TestCase#MomentName}",          "MomentType":"PROMOTIONAL_CURRENCY",          "ResponsePropertyName":"POINT SUBTYPE",          "ResponsePropertyValue":"${GetPointTypes#HatchedEggsId}",          "Status":"A"       },       {          "MomentCode":"$${#TestCase#MomentName}",          "MomentType":"PROMOTIONAL_CURRENCY",          "ResponsePropertyName":"POINT TYPE",          "ResponsePropertyValue":"${GetPointTypes#EggsId}",          "Status":"A"       }    ],    "MomentType":"PROMOTIONAL_CURRENCY",    "StartDate":"2021-12-01T00:00:00Z",    "EndDate":"2031-12-31T00:00:00Z",    "MomentStatus":"A",    "MomentEvent":{       "MomentCode":"$${#TestCase#MomentName}",       "EventType":"PurchaseTxn",       "EventId":"07df3fa2-32c0-4d35-841d-6dcfa4ef3538",       "MomentQualifyingDateAttribute":"PurchaseTxn.TransactionDateTime",       "MomentQualifyingDateAttributeDrools":"$PurchaseTxn:PurchaseTxnC(isItBetween(TransactionDateTime,\"12/01/2021 12:00:00 AM\",\"12/31/2031 12:00:00 AM\"))",       "MomentOffers":[          {             "MomentOfferId":null,             "MomentCode":"$${#TestCase#MomentName}",             "EventType":"PurchaseTxn",             "OfferName":"$${#TestCase#MomentName}",             "Description":"Testing",             "MomentOutcome":{                "MomentCode":"$${#TestCase#MomentName}",                "EventType":"PurchaseTxn",                "OfferName":"$${#TestCase#MomentName}",                "OutcomeEquationUi":"round(1 * sumQualifiedItems(PurchaseTxn.TransactionDetails.EligibleRevenue))",                "CalculationTemplate":"round(<VariableFactor,[Number]> * sumQualifiedItems(<DollarValueGross,[Number]>))",                "OutcomeEquationTemplate":"%5B%7B%22name%22%3A%22round%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22func%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22Math.round%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22filterType%22%3A%22A%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22(%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22A%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22VariableFactor%22%2C%22type%22%3A%22Number%22%2C%22objType%22%3A%22var%22%2C%22id%22%3A%22variable_0%22%2C%22value%22%3A%221%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22filterType%22%3A%22A%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%7D%2C%7B%22name%22%3A%22%20%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22A%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22*%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22A%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22%20%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22A%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22sumQualifiedItems%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22func%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22sumQualifiedItems%22%2C%22filterType%22%3A%22C%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22(%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22sumQualifiedItems%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22C%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22DollarValueGross%22%2C%22type%22%3A%22Number%22%2C%22objType%22%3A%22var%22%2C%22id%22%3A%22variable_1%22%2C%22value%22%3A%22PurchaseTxn.TransactionDetails.EligibleRevenue%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22sumQualifiedItems%22%2C%22filterType%22%3A%22C%22%2C%22drools%22%3A%22%24sumOfItems.doubleValue()%22%2C%22collectionAttribute%22%3Atrue%2C%22refId%22%3A%22%22%7D%2C%7B%22name%22%3A%22)%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22sumQualifiedItems%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22C%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22)%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22obj%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22round%22%2C%22drools%22%3A%22%22%2C%22filterType%22%3A%22A%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%2C%22attributes%22%3A%5B%5D%7D%2C%7B%22name%22%3A%22%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22drools%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22String.valueOf(new%20Double(Math.round(1%20*%20new%20Double((%24sumOfItems.doubleValue())))))%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22%22%2C%22filterType%22%3A%22%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%7D%5D",                "OutcomeEquationDrools":"MomentParam[] params = new MomentParam[] {new MomentParam(\"OfferName\",\"TESTING\"),new MomentParam(\"QualifyingDateAttributeValue\",$PurchaseTxn.getTransactionDateTime())};\nMomentParam[] outcomeValues = null;\nmo.add(new MomentOutcome(\"TESTING\",String.valueOf(new Double(Math.round(1 * new Double(($sumQualifiedItems_PurchaseTxnTransactionDetailsEligibleRevenue.doubleValue()))))),params, outcomeValues));\n",                "FormulaName":"SUM_QUALIFIED_ITEMS",                "Status":"A"             },             "MomentQualifyingRule":{                "MomentCode":"$${#TestCase#MomentName}",                "EventType":"PurchaseTxn",                "OfferName":"$${#TestCase#MomentName}",                "RuleEquationUI":"PurchaseTxn.ProgramCode==\"PP\"&&PurchaseTxn.TransactionDetails.EligibleRevenue>0",                "RuleEquationDrools":"PurchaseTxnC(ProgramCode == \"PP\") && ($PurchaseTxnTransactionDetails : PurchaseTxn.TransactionDetailsC(EligibleRevenue > 0) from $PurchaseTxn.TransactionDetails)\n accumulate($item : PurchaseTxn.TransactionDetailsC(EligibleRevenue > 0) from $PurchaseTxn.TransactionDetails, $sumQualifiedItems_PurchaseTxnTransactionDetailsEligibleRevenue : sum($item.getEligibleRevenue()))",                "MomentCap":[                                   ],                "TimeRangeCap":[                   {                      "CapId":null,                      "MomentCode":"$${#TestCase#MomentName}",                      "EventType":"PurchaseTxn",                      "OfferName":"$${#TestCase#MomentName}",                      "CapName":"MonthlyIssuedCount",                      "CapValue":null,                      "CapType":"OUTCOMEISSUED",                      "IsTimeRangeCap":true,                      "Duration":"Monthly",                      "DurationDescription":"Month (1st day-last day of the month)",                      "IsDisplayed":false,                      "Status":"A"                   },                   {                      "CapId":null,                      "MomentCode":"$${#TestCase#MomentName}",                      "EventType":"PurchaseTxn",                      "OfferName":"$${#TestCase#MomentName}",                      "CapName":"DailyIssuedCount",                      "CapValue":null,                      "CapType":"OUTCOMEISSUED",                      "IsTimeRangeCap":true,                      "Duration":"Daily",                      "DurationDescription":"Day (12:00am-11:59pm)",                      "IsDisplayed":false,                      "Status":"A"                   },                   {                      "CapId":null,                      "MomentCode":"$${#TestCase#MomentName}",                      "EventType":"PurchaseTxn",                      "OfferName":"$${#TestCase#MomentName}",                      "CapName":"WeeklyIssuedCount",                      "CapValue":null,                      "CapType":"OUTCOMEISSUED",                      "IsTimeRangeCap":true,                      "Duration":"Weekly",                      "DurationDescription":"Week (Sunday-Saturday)",                      "IsDisplayed":false,                      "Status":"A"                   }                ],                "Status":"A"             },             "Status":"A"          }       ],       "Status":"A"    },    "BestOfferIndicator":false,    "AdvancedModeIndicator":false,    "ReleaseState":"P",    "IsTestUser":false,    "Status":"A" }]]></con:value>
        </con:property>
        <con:property>
          <con:name>MomentId</con:name>
          <con:value>2d718da7-2e15-43e0-b4fc-96ff2f1858e6</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>MomentId</con:entry>
      </con:returnProperties>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Add Transaction" id="d2d7462b-e78f-4a3b-8167-d9b59a9a1f28">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>5cc25b5b-95a4-4650-ac0b-b462934eb8d8</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>TransactionNumber</con:name>
          <con:value>${=java.util.UUID.randomUUID()}</con:value>
        </con:property>
        <con:property>
          <con:name>ProfileId</con:name>
          <con:value>${Add Profile#ProfileId}</con:value>
        </con:property>
        <con:property>
          <con:name>TransactionDate</con:name>
          <con:value>${=new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ").format(new Date())}</con:value>
        </con:property>
        <con:property>
          <con:name>RawTransactionId</con:name>
          <con:value>4bd191c9-536d-4cde-9572-ff0f7fbc9c03</con:value>
        </con:property>
        <con:property>
          <con:name>ItemNumber</con:name>
          <con:value>${Generate SKU#result}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>RawTransactionId</con:entry>
      </con:returnProperties>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="Get Transaction By Id" id="cd9e9fb0-4754-4099-add5-0dc0c6c01d7e">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v2/transaction/rawtransactions/{rawtransactionid}" methodName="GetTransactionById" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="Get Transaction By Id" id="d866248f-9e10-4bc6-824e-b2fc2f226a21" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://q3alin-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://d8alqa-pveapi.epsilonagilityloyalty.com/api/v2/transaction/rawtransactions/c98a9325-2d5c-4192-b311-ec4357242c87</con:originalUri>
        <con:assertion type="JsonPath Existence Match" id="96ed16ac-2591-4d54-94e2-323863210ab0" name="Ensure Moment Id does not exist in response">
          <con:configuration>
            <path>$.Moments.[?(@.MomentId == '${Upsert Moment#MomentId}')]</path>
            <content>false</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="DataAndMetadataAssertion" id="5f65cd40-93c8-4439-9cf9-341c8865d27b" name="Validate 200 HTTP Status">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Tue, 19 Apr 2022 22:17:03 GMT</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Microsoft-IIS/10.0</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>3475</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-powered-by']</con:path>
              <con:element>x-powered-by</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>ASP.NET</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>02a163ce-439e-6b29-7bea-3f2651d25851</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>5284ms</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>8000001a-0000-ff00-b63f-84710c7967bb</con:expectedValue>
              <con:caseSensitive>false</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Tue, 19 Apr 2022 22:17:03 GMT","server":"Microsoft-IIS/10.0","content-length":"3475","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","x-powered-by":"ASP.NET","correlationid":"02a163ce-439e-6b29-7bea-3f2651d25851","content-type":"application/json; charset=utf-8","process-time":"5284ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"8000001a-0000-ff00-b63f-84710c7967bb"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileid" value="${Add Profile#ProfileId}"/>
          <con:entry key="rawtransactionid" value="${Add Transaction#RawTransactionId}"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>Authorization</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Program-Code</con:entry>
          <con:entry>rawtransactionid</con:entry>
          <con:entry>profileid</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="d653788f-b849-4013-8db6-47ad297cdee5">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c955a23-3567-47af-b6e9-aacfcca8d9aa">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Deactivate Moment" id="616f61e8-38a2-4378-982f-10ebfe1d3493">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>c903534c-32ad-44dc-9cb6-a72fc8de1482</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>MomentId</con:name>
          <con:value>${Upsert Moment#MomentId}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
</con:testCase>
