<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="0640b602-c219-4025-a2be-0a3d4a1148a4" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="MktEvtMaxLenEvtCodeNeg" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="0640b602-c219-4025-a2be-0a3d4a1148a4fileName">MktEvtMaxLenEvtCodeNeg</con:setting>
  </con:settings>
  <con:testStep type="datasource" name="ProcessMarketingEventData" id="d48e7e20-d136-40c5-8c41-cd851a5ecbd8">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="File">
        <con:configuration>
          <fileName>${#Project#ProjectPath}/References/ProcessMarketingEvent.csv</fileName>
          <separator>,</separator>
          <trim>true</trim>
          <charset>Cp1252</charset>
          <quotedValues>false</quotedValues>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>MarketingEventChannelId</con:property>
      <con:property>ChannelName</con:property>
      <con:property>PackagedAudienceId</con:property>
      <con:property>AudienceName</con:property>
      <con:property>AudienceSource</con:property>
      <con:property>PanelIdCustAct</con:property>
      <con:property>PanelCodeCustAct</con:property>
      <con:property>PanelIdCustRew</con:property>
      <con:property>PanelCodeCustRew</con:property>
      <con:property>PanelIdOfferLim</con:property>
      <con:property>PanelCodeOfferLim</con:property>
      <con:property>PackagedOfferCategoryId</con:property>
      <con:property>PackagedOfferCategoryCode</con:property>
      <con:startRow>1</con:startRow>
      <con:endRow/>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
    </con:config>
  </con:testStep>
  <con:testStep type="datasource" name="MarketingEventsErrorCodes" id="72fdb774-57b9-44b3-a7ea-930a146ea683">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="File">
        <con:configuration>
          <fileName>${#Project#ProjectPath}/References/MarketingEventsErrorCodes.csv</fileName>
          <separator>,</separator>
          <trim>true</trim>
          <charset>Cp1252</charset>
          <quotedValues>false</quotedValues>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>ErrorCodeModelStateValidation</con:property>
      <con:property>ModelStateMaxLengthEventCode</con:property>
      <con:property>ModelStateEventNameRqd</con:property>
      <con:property>ModelStateEventCodeRqd</con:property>
      <con:property>OnlineMessageStartDateRequired</con:property>
      <con:property>OnlineMessageEndDateRequired</con:property>
      <con:property>ScheduleDateGreaterThanCurrent</con:property>
      <con:property>HeaderRequired</con:property>
      <con:property>AudienceSourceInCorrect</con:property>
      <con:property>Please select a date</con:property>
      <con:property>Please select a tier</con:property>
      <con:property>Please enter a minimum transaction amount</con:property>
      <con:property>Please select a certificate to reward</con:property>
      <con:property>Please enter a point amount to reward</con:property>
      <con:property>Please enter a threshold amount for all transactions</con:property>
      <con:property>NegSurveyApp</con:property>
      <con:property>NegFileExportApprove</con:property>
      <con:property>SaveWith222CharFileSettingName</con:property>
      <con:property>ApproveWithoutOfferDate</con:property>
      <con:property>AddOfferWithoutChannel</con:property>
      <con:startRow>1</con:startRow>
      <con:endRow/>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="ProcessMarketingEvent" id="780d7dec-284f-4df5-91ed-8ef17b9e4ca3">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/engage/marketingevent" methodName="ProcessMarketingEvent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="ProcessMarketingEvent" id="c3da61b0-81ba-449f-abb7-d1e58290c294" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
	"MarketingEventType": {
		"MarketingEventTypeId": "c940eb29-616f-4941-a9c9-8421ab49eaab",
		"TypeName": "Offer"
	},
	"MarketingEventChannels": [
		{
			"MarketingEventChannelId": "${ProcessMarketingEventData#MarketingEventChannelId}",
			"Status": "A"
		},
		{
			"MarketingEventChannelId": "${ProcessMarketingEventData#MarketingEventChannelId}",
			"Status": "A"
		}
	],
	"EventName": "OFFER_NAME${=new java.text.SimpleDateFormat("mmddyyyyhhmmssmmm").format(new Date())}",
	"EventCode": "${#TestCase#EventCode}"
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/engage/marketingevent</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="9ccc6c55-d7b1-40d3-bf5c-5071b6fc0c8f" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>400</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="cad50016-6b18-4685-a1ed-858f437400cb" name="ModelStateValidationAssert">
          <con:configuration>
            <path>$['ErrorCode']</path>
            <content>"ModelStateValidation"</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="d476a083-ea42-4963-995a-a57fd1c690f3" name="MaxLengthAssert">
          <con:configuration>
            <path>$['ModelState'][0]['Message']</path>
            <content>"Maximum length is 50 character(s)."</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="validateOffer" value="false"/>
          <con:entry key="validateAudience" value="false"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>validateAudience</con:entry>
          <con:entry>validateOffer</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
          <con:entry>Program-Code</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="GetMarketingEventbyEventCode" id="7d6b9389-9f9b-4b58-a295-5e30acb80204">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/engage/marketingevent/eventdetails/{eventCode}" methodName="GetMarketingEventbyEventCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="GetMarketingEventbyEventCode" id="471c557e-ad15-4e9a-a9f1-2d173dd4c5cf" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/engage/marketingevent/eventdetails/ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890123456789012345</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="0f7a44e2-89ac-418d-8000-d78c350d6fb7" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>404</codes>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="eventCode" value="${#TestCase#EventCode}"/>
        </con:parameters>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>EventCode</con:name>
      <con:value>ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890123456789012345</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
</con:testCase>
