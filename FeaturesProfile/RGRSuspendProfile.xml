<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="bbd1b470-def7-4094-a9fe-701a7fef870c" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="RGRSuspendProfile" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="bbd1b470-def7-4094-a9fe-701a7fef870cfileName">RGRSuspendProfile</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="datasource" name="RandomProfile" id="3fb50766-9e61-458f-8331-dec5ed1a41e5">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="File">
        <con:configuration>
          <fileName>${#Project#ProjectPath}/References/SearchProfile.csv</fileName>
          <separator>,</separator>
          <trim>false</trim>
          <charset>Cp1252</charset>
          <quotedValues>false</quotedValues>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>Row</con:property>
      <con:property>ProgramCode</con:property>
      <con:property>Prefix</con:property>
      <con:property>FirstName</con:property>
      <con:property>MiddleInit</con:property>
      <con:property>LastName</con:property>
      <con:property>Suffix</con:property>
      <con:property>CardNumber</con:property>
      <con:property>GlobalOptOut</con:property>
      <con:property>GlobalOptDate</con:property>
      <con:property>GlobalOptSource</con:property>
      <con:property>LanguageCode</con:property>
      <con:property>MaritalStatus</con:property>
      <con:property>Gender</con:property>
      <con:property>BirthDate</con:property>
      <con:property>CompanyName</con:property>
      <con:property>Country</con:property>
      <con:property>UpdatedCountry</con:property>
      <con:property>AddressLine1</con:property>
      <con:property>AddressLine2</con:property>
      <con:property>AddressLine3</con:property>
      <con:property>City</con:property>
      <con:property>StateCode</con:property>
      <con:property>CountryCode</con:property>
      <con:property>PostalCode</con:property>
      <con:property>AddressChannelCode</con:property>
      <con:property>AddressLocationCode</con:property>
      <con:property>AddressIsPreferred</con:property>
      <con:property>AddressDeliveryStatus</con:property>
      <con:property>DoNotStandardize</con:property>
      <con:property>EmailAddress</con:property>
      <con:property>EmailChannelCode</con:property>
      <con:property>EmailLocationCode</con:property>
      <con:property>EmailIsPreferred</con:property>
      <con:property>EmailDeliveryStatus</con:property>
      <con:property>PhoneNumber</con:property>
      <con:property>PhoneCountryCode</con:property>
      <con:property>AcceptsText</con:property>
      <con:property>Frequency</con:property>
      <con:property>PhoneChannelCode</con:property>
      <con:property>PhoneLocationCode</con:property>
      <con:property>PhoneIsPreferred</con:property>
      <con:property>PhoneDeliveryStatus</con:property>
      <con:property>SourceCode</con:property>
      <con:property>JoinDate</con:property>
      <con:property>EnrollChannelCode</con:property>
      <con:property>TierCode</con:property>
      <con:property>Username</con:property>
      <con:property>Password</con:property>
      <con:property>TermsConditionsAcceptedInd</con:property>
      <con:property>ActivityDate</con:property>
      <con:property>CreateFileId</con:property>
      <con:property>CreateRecordNumber</con:property>
      <con:property>UpdateFileId</con:property>
      <con:property>UpdateRecordNumber</con:property>
      <con:property>AutoRewardOptInInd</con:property>
      <con:property>GamerAlias</con:property>
      <con:property>GamerAvatar</con:property>
      <con:property>PostingKeyCode</con:property>
      <con:property>PostingKeyValue</con:property>
      <con:property>PerformLinkSearch</con:property>
      <con:property>ExpiredPostingKeysCardNumber</con:property>
      <con:property>PendingProfileCardNumber</con:property>
      <con:property>ProfileCardNumberForPurTxn</con:property>
      <con:property>ProfileCardNumberForVdTxn</con:property>
      <con:property>ProfileCardNumberForSupndTxn</con:property>
      <con:startRow>1</con:startRow>
      <con:endRow/>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="CreateProfileInSuspendedStatus" id="56b2cfdf-0c27-4c0e-9a52-97bec6852fab">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v2/profiles" methodName="ProcessProfile" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest id="7ffc0d09-b764-4db2-b34a-6840828b8ab9" mediaType="application/json" name="CreateProfileInSuspendedStatus" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://q3alin-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
    "EnrollmentStatus" : "S",
  "StatusChangeReason": "SSPNDFRD",
   "Prefix" : "${RandomProfile#Prefix}",
   "FirstName" : "${RandomProfile#FirstName}",
   "MiddleInit" : "",
   "LastName" : "${RandomProfile#LastName}",
   "CardNumber" : "${=java.util.UUID.randomUUID()}",
   "Suffix" : "",
   "GlobalOptOut" : "${RandomProfile#GlobalOptOut}",
   "GlobalOptDate" : "${RandomProfile#GlobalOptDate}",
   "GlobalOptSource" : "${RandomProfile#GlobalOptSource}",
   "LanguageCode" : "${RandomProfile#LanguageCode}",
   "MaritalStatus" : "${RandomProfile#MaritalStatus}",
   "Gender" : "${RandomProfile#Gender}",
   "BirthDate" : "${RandomProfile#BirthDate}",
   "CompanyName" : "${RandomProfile#CompanyName}",
   "Country" : "${RandomProfile#UpdatedCountry}",
   "Addresses" : [
      {
         "AddressLine1" : "${RandomProfile#AddressLine1}",
         "AddressLine2" : "${RandomProfile#AddressLine2}",
         "AddressLine3" : "",
         "City" : "${RandomProfile#City}",
         "StateCode" : "${RandomProfile#StateCode}",
         "CountryCode" : "${RandomProfile#CountryCode}",
         "PostalCode" : "${RandomProfile#PostalCode}",
         "ChannelCode" : "${RandomProfile#AddressChannelCode}",
         "LocationCode" : "${RandomProfile#AddressLocationCode}",
         "IsPreferred" : "${RandomProfile#AddressIsPreferred}",
         "DeliveryStatus" : "${RandomProfile#AddressDeliveryStatus}",
         "DoNotStandardize" : "${RandomProfile#DoNotStandardize}"
      }
   ],
   "Emails" : [
      {
         "EmailAddress" : "${RandomProfile#EmailAddress}",
         "ChannelCode" : "${RandomProfile#EmailChannelCode}",
         "LocationCode" : "${RandomProfile#EmailLocationCode}",
         "IsPreferred" : "${RandomProfile#EmailIsPreferred}",
         "DeliveryStatus" : "${RandomProfile#EmailDeliveryStatus}"
      }
   ],
   "Phones" : [
      {
         "PhoneNumber" : "${RandomProfile#PhoneNumber}",
         "PhoneCountryCode" : "${RandomProfile#PhoneCountryCode}",
         "AcceptsText" : "${RandomProfile#AcceptsText}",
         "Frequency" : "${RandomProfile#Frequency}",
         "ChannelCode" : "${RandomProfile#PhoneChannelCode}",
         "LocationCode" : "${RandomProfile#PhoneLocationCode}",
         "IsPreferred" : "${RandomProfile#PhoneIsPreferred}",
         "DeliveryStatus" : "${RandomProfile#PhoneDeliveryStatus}"
      }
   ],
   "SourceCode" : "${RandomProfile#SourceCode}",
   "EnrollChannelCode" : "${RandomProfile#EnrollChannelCode}",
   "AutoRewardOptInInd" : "${RandomProfile#AutoRewardOptInInd}",
   "Status":"A",
   "TermsConditionsAcceptedInd" : "${RandomProfile#TermsConditionsAcceptedInd}"
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v2/profiles</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="16baf79b-696a-4f17-827f-70b8e65342ff" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>Authorization</con:entry>
          <con:entry>Program-Code</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>content-type</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="d653788f-b849-4013-8db6-47ad297cdee5">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c955a23-3567-47af-b6e9-aacfcca8d9aa">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="UpdateEnrollStatusToActive" id="285bf953-e527-49de-aac9-59202539528a">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/profiles/{profileId}/enrollments" methodName="UpdateEnrollmentToActive" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="UpdateEnrollStatusToActive" id="d4caf92c-fe61-4fea-9f40-a9f55bba41e8" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
  "EnrollmentStatus":"A",
  "StatusChangeReasonCode":"CUSREACT"
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/profiles/99e872c1-9883-45a5-b3ac-81a0b6f9135e/enrollments</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="c8e36f24-0214-4379-b128-424e34894388" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${CreateProfileInSuspendedStatus#Response#$['ProfileId']}"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>profileId</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>Program-Code</con:entry>
          <con:entry>Accept-Language</con:entry>
        </con:parameterOrder>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="VerifyActiveEnrollmentStatus" id="ae066e47-eadf-46c7-a11c-0e9766d8d827">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/profiles/{profileId}" methodName="GetProfileByID" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="VerifyActiveEnrollmentStatus" id="d9eece0d-c4d6-4e17-a4e6-92e9d8065aca" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/profiles/profileId</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="5a4d4db9-16d5-46c3-b45a-51ec2915c63e" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" name="JSONPath Match" id="1d7429a3-926b-4575-b6e4-b7f53bc09ca3">
          <con:configuration>
            <path>$['EnrollmentStatus']</path>
            <content>"A"</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${UpdateEnrollStatusToActive#Response#$['ProfileId']}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>profileId</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>Accept-Language</con:entry>
        </con:parameterOrder>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>3fb50766-9e61-458f-8331-dec5ed1a41e5</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>c63a1125-1d4a-4c99-b510-ed5ce7fe7a93</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
</con:testCase>
