<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="60e6c128-c094-4287-88a1-9e6ee247edae" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="UpdEventAttrTrxElig" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="60e6c128-c094-4287-88a1-9e6ee247edaefileName">UpdEventAttrTrxElig</con:setting>
  </con:settings>
  <con:testStep type="calltestcase" name="GetEventAttributesByEvent" id="f9b58198-e350-41ac-8904-ba8b344d49f3">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>bd77f049-74f7-4fd6-9df5-554d9e08bff9</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>eventType</con:name>
          <con:value>PurchaseTxn</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="TransactionEligibleEventId" id="d8e23ce1-22ad-4f58-8075-4f9da6239c57">
    <con:settings/>
    <con:config>
      <script>def TransactionEligibleEventId = context.expand( '${#[OffersPrerequisite#GetEventAttributesByEventType#GetEventAttributesByEventType]#Response#$[?(@.AttributeName==\'TransactionEligible\')].EventAttributeId[0]}' )</script>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="UpdateEventAttributes(TransactionEligible)" id="812993d2-7216-4539-b5fb-9f1ddf3d6734">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>73646b48-d758-4ca3-82ee-3a8ec2812b9b</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>AttributeJSON</con:name>
          <con:value>{    "EventAttributeId" : "${TransactionEligibleEventId#result}",    "EventType" : "PurchaseTxn",    "CyclicIndicator": true,   "CapIndicator": false,   "CyclicMapField": "EligibleRevenue",   "IsLineItem": false,   "CollectionIndicator": false,   "DataTypeDrl": "Double",   "DataTypeUi": "Number",   "EventType": "PurchaseTxn",   "AttributeFqn": "PurchaseTxn.TransactionEligible",   "DroolsVariableName": "$PurchaseTxn",   "CollectionAttribute": false,   "UsedAsCyclic": false,   "ReturnAttribute": false,   "IsValueGroupHierarchy": false,   "IsEnrichmentLinkedAttribute": false,   "IsEnrichmentAttribute": false,   "Status": "A"  }</con:value>
        </con:property>
        <con:property>
          <con:name>eventType</con:name>
          <con:value>PurchaseTxn</con:value>
        </con:property>
        <con:property>
          <con:name>attributeName</con:name>
          <con:value>TransactionEligible</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="VisitEventId" id="dd7ab530-c299-4c4b-ab39-59c3dbb3c7de">
    <con:settings/>
    <con:config>
      <script>def VisitEventId = context.expand( '${#[OffersPrerequisite#GetEventAttributesByEventType#GetEventAttributesByEventType]#Response#$[?(@.AttributeName==\'Visits\')].EventAttributeId[0]}' )</script>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="UpdateEventAttributes(Visit)" id="8f7c1138-115a-41ff-9127-d7a37cca4e91">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>73646b48-d758-4ca3-82ee-3a8ec2812b9b</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>AttributeJSON</con:name>
          <con:value>{   "EventAttributeId": "${VisitEventId#result}",   "AttributeName": "Visits",   "CyclicIndicator": true,   "CapIndicator": false,   "CyclicMapField": "Visits",   "IsLineItem": false,   "CollectionIndicator": false,   "DataTypeDrl": "Double",   "DataTypeUi": "Number",   "EventType": "PurchaseTxn",   "AttributeFqn": "PurchaseTxn.Visits",   "DroolsVariableName": "$PurchaseTxn",   "CollectionAttribute": false,   "UsedAsCyclic": false,   "ReturnAttribute": false,   "IsValueGroupHierarchy": false,   "IsEnrichmentLinkedAttribute": false,   "IsEnrichmentAttribute": false,   "Status": "A"   }</con:value>
        </con:property>
        <con:property>
          <con:name>eventType</con:name>
          <con:value>PurchaseTxn</con:value>
        </con:property>
        <con:property>
          <con:name>attributeName</con:name>
          <con:value>Visits</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
</con:testCase>
