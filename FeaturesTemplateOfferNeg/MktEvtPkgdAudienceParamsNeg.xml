<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="915f4bf0-1a6e-4d56-af70-1e042aec806d" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="MktEvtPkgdAudienceParamsNeg" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="915f4bf0-1a6e-4d56-af70-1e042aec806dfileName">MktEvtPkgdAudienceParamsNeg</con:setting>
  </con:settings>
  <con:testStep type="restrequest" name="ProcessMarketingEventNewMem" id="8e092b32-f7f6-4763-bc7d-54dbe03711f6">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/engage/marketingevent" methodName="ProcessMarketingEvent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="ProcessMarketingEventNewMem" id="c3da61b0-81ba-449f-abb7-d1e58290c294" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
	"MarketingEventChannels": [
		{
			"MarketingEventId": "b95c3533-d2b4-4d31-945b-a7a51b40ffdd",
			"MarketingEventChannelId": "df85ae0f-5596-6e49-96a4-ced889259511",
			"ChannelName": "Online Message",
			"ChannelCode": "ONLINE_MESSAGE"
		},
		{
			"MarketingEventId": "b95c3533-d2b4-4d31-945b-a7a51b40ffdd",
			"MarketingEventChannelId": "7513b49c-2096-3344-abfe-70e8bbcefc5b",
			"ChannelName": "Email",
			"ChannelCode": "EMAIL"
		}
	],
	"EventName": "OFFER_NAME${=new java.text.SimpleDateFormat("mmddyyyyhhmmssmmm").format(new Date())}",
	"EventCode": "OFFER_CODE${=new java.text.SimpleDateFormat("mmddyyyyhhmmssmmm").format(new Date())}",
	"ProgramCode": "${#Project#ProgramCode}",
	"PackagedAudience": {
		"PackagedAudienceId": "7ae1f987-5b5e-4669-e053-5ca8e70ad3ee",
		"AudienceName": "New Members",
		"PackagedAudienceParams": [
			{
				"PackagedAudienceParamId": "ee8ea189-ebfb-c208-e053-5ca8e70a5b0b",
				"PackagedAudienceId": "7ae1f987-5b5e-4669-e053-5ca8e70ad3ee",
				"ParamName": "New members who have enrolled on or after",
				"ParamCode": "MEMBERSENROLLED",
				"Value": ""
			}
		]
	},
        "AudienceSource": "PACKAGED_AUDIENCE",
        "PackagedOffer": {
		"PackagedOfferId": "0625dcba-a576-48d6-9208-cec6f0be9235"
	},
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/engage/marketingevent</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="9ccc6c55-d7b1-40d3-bf5c-5071b6fc0c8f" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>400</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="8803868e-4da4-45d5-9765-505b8dedff28" name="EnterJoinDate">
          <con:configuration>
            <path>$['ErrorCode']</path>
            <content>"Please enter a date"</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="validateOffer" value="false"/>
          <con:entry key="validateAudience" value="true"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>validateAudience</con:entry>
          <con:entry>validateOffer</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
          <con:entry>Program-Code</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="ProcessMarketingEventMemTier" id="a5cf4f0d-1837-446a-bc92-464a08c62b07">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/engage/marketingevent" methodName="ProcessMarketingEvent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="ProcessMarketingEventMemTier" id="c3da61b0-81ba-449f-abb7-d1e58290c294" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
	"MarketingEventChannels": [
		{
			"MarketingEventId": "af50db69-7d5a-4fd1-aa81-f19baa0de3a2",
			"MarketingEventChannelId": "df85ae0f-5596-6e49-96a4-ced889259511",
			"ChannelName": "Online Message",
			"ChannelCode": "ONLINE_MESSAGE"
		},
		{
			"MarketingEventId": "af50db69-7d5a-4fd1-aa81-f19baa0de3a2",
			"MarketingEventChannelId": "7513b49c-2096-3344-abfe-70e8bbcefc5b",
			"ChannelName": "Email",
			"ChannelCode": "EMAIL"
		}
	],
	"EventName": "OFFER_NAME${=new java.text.SimpleDateFormat("mmddyyyyhhmmssmmm").format(new Date())}",
	"EventCode": "OFFER_CODE${=new java.text.SimpleDateFormat("mmddyyyyhhmmssmmm").format(new Date())}",
	"ProgramCode": "${#Project#ProgramCode}",
	"PackagedAudience": {
		"PackagedAudienceId": "7ae1f987-575e-4669-e053-5ca8e70ad3ee",
		"AudienceName": "Member Tier",
		"PackagedAudienceParams": [
			{
				"PackagedAudienceParamId": "ee8ea189-ecfb-c208-e053-5ca8e70a5b0b",
				"PackagedAudienceId": "7ae1f987-575e-4669-e053-5ca8e70ad3ee",
				"ParamName": "Members in these tiers",
				"ParamCode": "TIERS",
				"Value": ""
			}
		]
	},
                   "AudienceSource": "PACKAGED_AUDIENCE",
                   "PackagedOffer": {
		"PackagedOfferId": "0625dcba-a576-48d6-9208-cec6f0be9235"
	}
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/engage/marketingevent</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="9ccc6c55-d7b1-40d3-bf5c-5071b6fc0c8f" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>400</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="8803868e-4da4-45d5-9765-505b8dedff28" name="EnterOneTier">
          <con:configuration>
            <path>$['ErrorCode']</path>
            <content>"Please select at least one tier"</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="validateOffer" value="false"/>
          <con:entry key="validateAudience" value="true"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>validateAudience</con:entry>
          <con:entry>validateOffer</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
          <con:entry>Program-Code</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
</con:testCase>
