<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="0f1776f7-b3b3-46d1-91a6-9c52275147a5" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="AddCustmOfrWithMulActivityNeg" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="0f1776f7-b3b3-46d1-91a6-9c52275147a5fileName">AddCustmOfrWithMulActivityNeg</con:setting>
  </con:settings>
  <con:testStep type="restrequest" name="ProcessMarketingEvent- Add Custom Offer with InvalidCustomOfferActivityType" id="980e4127-04c3-49cc-ac58-56b2e6a5b4bb">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/engage/marketingevent" methodName="ProcessMarketingEvent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="ProcessMarketingEvent- Add Custom Offer with InvalidCustomOfferActivityType" id="c3da61b0-81ba-449f-abb7-d1e58290c294" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
  "MarketingEventChannels": [
    {
      "MarketingEventChannelId": "bce4fc4f-1b7d-2d49-b498-cea4e90a6105",
      "ChannelName": "No Channel"
    }
  ],
  "EventName": "OFFER_NAME${=new java.text.SimpleDateFormat("MMddyyyyhhmmssmmm").format(new Date())}",
  "EventCode": "OFFER_CODE${=new java.text.SimpleDateFormat("MMddyyyyhhmmssmmm").format(new Date())}",
  "PackagedAudience": {
    "PackagedAudienceId": "7ae1f987-515e-4669-e053-5ca8e70ad3ee",
    "AudienceName": "All Members",
    
  },
  "AudienceSource": "PACKAGED_AUDIENCE",
  "PackagedOffer": {
    "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
    "PackagedOfferCode": "CUSTOM_OFFER",
    "PackagedOfferParams": [
      {
        "PackagedOfferParamId": "1d5c8eb6-b0b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Minimum transaction amount",
        "ParamCode": "CUSTOM_TXN_AMT",
        "Value": "150",
        "PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_ACTIVITY",
        "OfferParamCategoryCode": "TRANSACTIONAL",
        "DisplayParamName": "Single transaction"
      },
      {
        "PackagedOfferParamId": "1d5c8eb6-b1b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Purchase",
        "ParamCode": "CUSTOM_PRODUCT",
        "Value": "ItemNumber in (\"SKU-00004\")",
        "ParamCustomValue": {
          "ProductLevelList": [
            {
              "LevelNumber": 1,
              "ProductLevelValueCode": "BASKETS"
            },
            {
              "LevelNumber": 2,
              "ProductLevelValueCode": "CHICKEN",
              
            }
          ],
          "ProductCode": [
            "SKU-00004"
          ],
          "DisplayProductCode": [
            "SKU-00004 - Chicken Fingers Basket"
          ],
          "ProductSelectType": 0,
          "Chain": "FALL_RIVER",
          "CategoryScheme": "LOYALTY"
        },
        "PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_ACTIVITY",
        "OfferParamCategoryCode": "TRANSACTIONAL",
        "DisplayParamName": "Purchase a product"
      },
      {
        "PackagedOfferParamId": "1d5c8eb6-b8b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Point amount",
        "ParamCode": "CUSTOM_POINT_AMT_REWARDED",
        "Value": "20",
        "PanelId": "e0e698ac-4291-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_REWARD",
        "DisplayParamName": "Fixed point amount"
      },
      {
        "PackagedOfferParamId": "1d5c8eb6-b6b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Maximum points per member (optional)",
        "ParamCode": "CUSTOM_MAX_POINTS_PER_MEMBER",
        "Value": "10",
        "PanelId": "e0e698ac-4391-d25d-e053-5dedef0ac6ef",
        "PanelCode": "OFFER_LIMITS",
        "DisplayParamName": "Maximum points issued per member"
      }
    ],
    "PackagedOfferCategoryId": "ff2dcceb-cc72-9f45-abfa-eee67daafdf0",
    "PackagedOfferCategoryCode": "CUSTOM_OFFER",
    "CustomOfferActivityValue": {
      "Type": "XYZ",
      "GroupType": "GROUP",
      "Conditions": [
        {
          "Type": "ATTRIBUTE",
          "PackagedOfferParamId": "1d5c8eb6-b0b9-ed4e-e053-5dedef0ac6ca",
          "Value": "100"
        },
        {
          "Type": "ATTRIBUTE",
          "PackagedOfferParamId": "1d5c8eb6-b1b9-ed4e-e053-5dedef0ac6ca",
          "Value": "ItemNumber in (\"SKU-00004\")"
        }
      ]
    }
  },
  "BusinessUnitTimeZone": "UTC",
  "OfferStartDate": "${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date()+1)}",
  "OfferEndDate": "${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date()+100)}",
  "Status": "A",
  
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/engage/marketingevent</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="91a959a8-eacf-4af5-bf94-77eeeea13c2e" name="Smart Assertion for HTTP status code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Thu, 07 Apr 2022 09:25:51 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>7414</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>bc73289d-57cb-9bc7-6615-0904662c256d</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1177ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 400 Bad Request</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMGO2R2EGJ86:000001E2</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Thu, 07 Apr 2022 09:25:51 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"7414","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"bc73289d-57cb-9bc7-6615-0904662c256d","content-type":"application/json; charset=utf-8","process-time":"1177ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMGO2R2EGJ86:000001E2"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="d502d004-d9d7-4201-9007-ddf501a8a35e" name="ErrorCode validation for Custom Offer with InvalidCustomOfferActivityType">
          <con:configuration>
            <path>$.ErrorCode</path>
            <content>InvalidOperatorWithinCustomerActivityGroup</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="validateOffer" value="false"/>
          <con:entry key="validateAudience" value="false"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="FR"/>
          <con:entry key="isOfferTagUpdate" value=""/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>validateAudience</con:entry>
          <con:entry>validateOffer</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
          <con:entry>Program-Code</con:entry>
          <con:entry>isOfferTagUpdate</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="ProcessMarketingEvent- Add Custom Offer without PackagedOfferParamId" id="e58c3143-4688-4782-b687-00a121a40eb1">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/engage/marketingevent" methodName="ProcessMarketingEvent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="ProcessMarketingEvent- Add Custom Offer without PackagedOfferParamId" id="c3da61b0-81ba-449f-abb7-d1e58290c294" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
  "MarketingEventChannels": [
    {
      "MarketingEventChannelId": "bce4fc4f-1b7d-2d49-b498-cea4e90a6105",
      "ChannelName": "No Channel"
    }
  ],
  "EventName": "OFFER_NAME1${=new java.text.SimpleDateFormat("MMddyyyyhhmmssmmm").format(new Date())}",
  "EventCode": "OFFER_CODE1${=new java.text.SimpleDateFormat("MMddyyyyhhmmssmmm").format(new Date())}",
  "PackagedAudience": {
    "PackagedAudienceId": "7ae1f987-515e-4669-e053-5ca8e70ad3ee",
    "AudienceName": "All Members",
    
  },
  "AudienceSource": "PACKAGED_AUDIENCE",
  "PackagedOffer": {
    "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
    "PackagedOfferCode": "CUSTOM_OFFER",
    "PackagedOfferParams": [
      {
        "PackagedOfferParamId": "1d5c8eb6-b0b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Minimum transaction amount",
        "ParamCode": "CUSTOM_TXN_AMT",
        "Value": "150",
        "PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_ACTIVITY",
        "OfferParamCategoryCode": "TRANSACTIONAL",
        "DisplayParamName": "Single transaction"
      },
      {
        "PackagedOfferParamId": "1d5c8eb6-b1b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Purchase",
        "ParamCode": "CUSTOM_PRODUCT",
        "Value": "ItemNumber in (\"SKU-00004\")",
        "ParamCustomValue": {
          "ProductLevelList": [
            {
              "LevelNumber": 1,
              "ProductLevelValueCode": "BASKETS"
            },
            {
              "LevelNumber": 2,
              "ProductLevelValueCode": "CHICKEN",
              
            }
          ],
          "ProductCode": [
            "SKU-00004"
          ],
          "DisplayProductCode": [
            "SKU-00004 - Chicken Fingers Basket"
          ],
          "ProductSelectType": 0,
          "Chain": "FALL_RIVER",
          "CategoryScheme": "LOYALTY"
        },
        "PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_ACTIVITY",
        "OfferParamCategoryCode": "TRANSACTIONAL",
        "DisplayParamName": "Purchase a product"
      },
      {
        "PackagedOfferParamId": "1d5c8eb6-b8b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Point amount",
        "ParamCode": "CUSTOM_POINT_AMT_REWARDED",
        "Value": "20",
        "PanelId": "e0e698ac-4291-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_REWARD",
        "DisplayParamName": "Fixed point amount"
      },
      {
        "PackagedOfferParamId": "1d5c8eb6-b6b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Maximum points per member (optional)",
        "ParamCode": "CUSTOM_MAX_POINTS_PER_MEMBER",
        "Value": "10",
        "PanelId": "e0e698ac-4391-d25d-e053-5dedef0ac6ef",
        "PanelCode": "OFFER_LIMITS",
        "DisplayParamName": "Maximum points issued per member"
      }
    ],
    "PackagedOfferCategoryId": "ff2dcceb-cc72-9f45-abfa-eee67daafdf0",
    "PackagedOfferCategoryCode": "CUSTOM_OFFER",
    "CustomOfferActivityValue": {
      "Type": "AND",
      "GroupType": "GROUP",
      "Conditions": [
        {
          "Type": "ATTRIBUTE",
          "Value": "100"
        },
        {
          "Type": "ATTRIBUTE",
          "Value": "ItemNumber in (\"SKU-00004\")"
        }
      ]
    }
  },
  "BusinessUnitTimeZone": "UTC",
  "OfferStartDate": "${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date()+1)}",
  "OfferEndDate": "${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date()+100)}",
  "Status": "A",
  
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/engage/marketingevent</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="91a959a8-eacf-4af5-bf94-77eeeea13c2e" name="Smart Assertion for HTTP status code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Thu, 07 Apr 2022 09:25:51 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>7414</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>bc73289d-57cb-9bc7-6615-0904662c256d</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1177ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 400 Bad Request</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMGO2R2EGJ86:000001E2</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Thu, 07 Apr 2022 09:25:51 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"7414","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"bc73289d-57cb-9bc7-6615-0904662c256d","content-type":"application/json; charset=utf-8","process-time":"1177ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMGO2R2EGJ86:000001E2"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="d502d004-d9d7-4201-9007-ddf501a8a35e" name="ErrorCode validation for Custom Offer without PackagedOfferParamId">
          <con:configuration>
            <path>$.ErrorCode</path>
            <content>CustomerActivityJsonConstructedIncorrectly</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="validateOffer" value="false"/>
          <con:entry key="validateAudience" value="false"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="FR"/>
          <con:entry key="isOfferTagUpdate" value=""/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>validateAudience</con:entry>
          <con:entry>validateOffer</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
          <con:entry>Program-Code</con:entry>
          <con:entry>isOfferTagUpdate</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="ProcessMarketingEvent- Add Custom Offer with Invalid PackagedOfferParamId" id="10a6adeb-d139-4b36-ad13-1ad3c7b06f9a">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/engage/marketingevent" methodName="ProcessMarketingEvent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="ProcessMarketingEvent- Add Custom Offer with Invalid PackagedOfferParamId" id="c3da61b0-81ba-449f-abb7-d1e58290c294" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
  "MarketingEventChannels": [
    {
      "MarketingEventChannelId": "bce4fc4f-1b7d-2d49-b498-cea4e90a6105",
      "ChannelName": "No Channel"
    }
  ],
  "EventName": "OFFER_NAME2${=new java.text.SimpleDateFormat("MMddyyyyhhmmssmmm").format(new Date())}",
  "EventCode": "OFFER_CODE2${=new java.text.SimpleDateFormat("MMddyyyyhhmmssmmm").format(new Date())}",
  "PackagedAudience": {
    "PackagedAudienceId": "7ae1f987-515e-4669-e053-5ca8e70ad3ee",
    "AudienceName": "All Members",
    
  },
  "AudienceSource": "PACKAGED_AUDIENCE",
  "PackagedOffer": {
    "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
    "PackagedOfferCode": "CUSTOM_OFFER",
    "PackagedOfferParams": [
      {
        "PackagedOfferParamId": "1d5c8eb6-b0b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Minimum transaction amount",
        "ParamCode": "CUSTOM_TXN_AMT",
        "Value": "150",
        "PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_ACTIVITY",
        "OfferParamCategoryCode": "TRANSACTIONAL",
        "DisplayParamName": "Single transaction"
      },
      {
        "PackagedOfferParamId": "1d5c8eb6-b1b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Purchase",
        "ParamCode": "CUSTOM_PRODUCT",
        "Value": "ItemNumber in (\"SKU-00004\")",
        "ParamCustomValue": {
          "ProductLevelList": [
            {
              "LevelNumber": 1,
              "ProductLevelValueCode": "BASKETS"
            },
            {
              "LevelNumber": 2,
              "ProductLevelValueCode": "CHICKEN",
              
            }
          ],
          "ProductCode": [
            "SKU-00004"
          ],
          "DisplayProductCode": [
            "SKU-00004 - Chicken Fingers Basket"
          ],
          "ProductSelectType": 0,
          "Chain": "FALL_RIVER",
          "CategoryScheme": "LOYALTY"
        },
        "PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_ACTIVITY",
        "OfferParamCategoryCode": "TRANSACTIONAL",
        "DisplayParamName": "Purchase a product"
      },
      {
        "PackagedOfferParamId": "1d5c8eb6-b8b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Point amount",
        "ParamCode": "CUSTOM_POINT_AMT_REWARDED",
        "Value": "20",
        "PanelId": "e0e698ac-4291-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_REWARD",
        "DisplayParamName": "Fixed point amount"
      },
      {
        "PackagedOfferParamId": "1d5c8eb6-b6b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Maximum points per member (optional)",
        "ParamCode": "CUSTOM_MAX_POINTS_PER_MEMBER",
        "Value": "10",
        "PanelId": "e0e698ac-4391-d25d-e053-5dedef0ac6ef",
        "PanelCode": "OFFER_LIMITS",
        "DisplayParamName": "Maximum points issued per member"
      }
    ],
    "PackagedOfferCategoryId": "ff2dcceb-cc72-9f45-abfa-eee67daafdf0",
    "PackagedOfferCategoryCode": "CUSTOM_OFFER",
    "CustomOfferActivityValue": {
      "Type": "AND",
      "GroupType": "GROUP",
      "Conditions": [
        {
          "Type": "ATTRIBUTE",
          "PackagedOfferParamId": "1d5c8eb6-b0b9-ed4e-e053-5dedef0ac6ca",
          "Value": "100"
        },
        {
          "Type": "ATTRIBUTE",
          "PackagedOfferParamId": "1d5c8eb6-b1b9-ed4e-e053-5dedef0ac6ab",
          "Value": "ItemNumber in (\"SKU-00004\")"
        }
      ]
    }
  },
  "BusinessUnitTimeZone": "UTC",
  "OfferStartDate": "${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date()+1)}",
  "OfferEndDate": "${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date()+100)}",
  "Status": "A",
  
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/engage/marketingevent</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="91a959a8-eacf-4af5-bf94-77eeeea13c2e" name="Smart Assertion for HTTP status code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Thu, 07 Apr 2022 09:25:51 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>7414</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>bc73289d-57cb-9bc7-6615-0904662c256d</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1177ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 400 Bad Request</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMGO2R2EGJ86:000001E2</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Thu, 07 Apr 2022 09:25:51 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"7414","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"bc73289d-57cb-9bc7-6615-0904662c256d","content-type":"application/json; charset=utf-8","process-time":"1177ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMGO2R2EGJ86:000001E2"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="d502d004-d9d7-4201-9007-ddf501a8a35e" name="ErrorCode validation for Custom Offer with Invalid PackagedOfferParamId">
          <con:configuration>
            <path>$.ErrorCode</path>
            <content>ComplexJsonMismatchingWithOfferParams</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="validateOffer" value="false"/>
          <con:entry key="validateAudience" value="false"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="FR"/>
          <con:entry key="isOfferTagUpdate" value=""/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>validateAudience</con:entry>
          <con:entry>validateOffer</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
          <con:entry>Program-Code</con:entry>
          <con:entry>isOfferTagUpdate</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="ProcessMarketingEvent- Add Custom Offer with Char Value for Minimum Transaction Amount" id="1ce4313e-7ada-4016-a6d0-300fb27cc12b">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/engage/marketingevent" methodName="ProcessMarketingEvent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="ProcessMarketingEvent- Add Custom Offer with Char Value for Minimum Transaction Amount" id="c3da61b0-81ba-449f-abb7-d1e58290c294" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
  "MarketingEventChannels": [
    {
      "MarketingEventChannelId": "bce4fc4f-1b7d-2d49-b498-cea4e90a6105",
      "ChannelName": "No Channel"
    }
  ],
  "EventName": "OFFER_NAME3${=new java.text.SimpleDateFormat("MMddyyyyhhmmssmmm").format(new Date())}",
  "EventCode": "OFFER_CODE3${=new java.text.SimpleDateFormat("MMddyyyyhhmmssmmm").format(new Date())}",
  "PackagedAudience": {
    "PackagedAudienceId": "7ae1f987-515e-4669-e053-5ca8e70ad3ee",
    "AudienceName": "All Members",
    
  },
  "AudienceSource": "PACKAGED_AUDIENCE",
  "PackagedOffer": {
    "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
    "PackagedOfferCode": "CUSTOM_OFFER",
    "PackagedOfferParams": [
      {
        "PackagedOfferParamId": "1d5c8eb6-b0b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Minimum transaction amount",
        "ParamCode": "CUSTOM_TXN_AMT",
        "Value": "CharValue",
        "PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_ACTIVITY",
        "OfferParamCategoryCode": "TRANSACTIONAL",
        "DisplayParamName": "Single transaction"
      },
      {
        "PackagedOfferParamId": "1d5c8eb6-b1b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Purchase",
        "ParamCode": "CUSTOM_PRODUCT",
        "Value": "ItemNumber in (\"SKU-00004\")",
        "ParamCustomValue": {
          "ProductLevelList": [
            {
              "LevelNumber": 1,
              "ProductLevelValueCode": "BASKETS"
            },
            {
              "LevelNumber": 2,
              "ProductLevelValueCode": "CHICKEN",
              
            }
          ],
          "ProductCode": [
            "SKU-00004"
          ],
          "DisplayProductCode": [
            "SKU-00004 - Chicken Fingers Basket"
          ],
          "ProductSelectType": 0,
          "Chain": "FALL_RIVER",
          "CategoryScheme": "LOYALTY"
        },
        "PanelId": "e0e698ac-4191-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_ACTIVITY",
        "OfferParamCategoryCode": "TRANSACTIONAL",
        "DisplayParamName": "Purchase a product"
      },
      {
        "PackagedOfferParamId": "1d5c8eb6-b8b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Point amount",
        "ParamCode": "CUSTOM_POINT_AMT_REWARDED",
        "Value": "20",
        "PanelId": "e0e698ac-4291-d25d-e053-5dedef0ac6ef",
        "PanelCode": "CUSTOMER_REWARD",
        "DisplayParamName": "Fixed point amount"
      },
      {
        "PackagedOfferParamId": "1d5c8eb6-b6b9-ed4e-e053-5dedef0ac6ca",
        "PackagedOfferId": "1d5c8eb6-abb9-ed4e-e053-5dedef0ac6ca",
        "ParamName": "Maximum points per member (optional)",
        "ParamCode": "CUSTOM_MAX_POINTS_PER_MEMBER",
        "Value": "10",
        "PanelId": "e0e698ac-4391-d25d-e053-5dedef0ac6ef",
        "PanelCode": "OFFER_LIMITS",
        "DisplayParamName": "Maximum points issued per member"
      }
    ],
    "PackagedOfferCategoryId": "ff2dcceb-cc72-9f45-abfa-eee67daafdf0",
    "PackagedOfferCategoryCode": "CUSTOM_OFFER",
    "CustomOfferActivityValue": {
      "Type": "AND",
      "GroupType": "GROUP",
      "Conditions": [
        {
          "Type": "ATTRIBUTE",
          "PackagedOfferParamId": "1d5c8eb6-b0b9-ed4e-e053-5dedef0ac6ca",
          "Value": "CharValue"
        },
        {
          "Type": "ATTRIBUTE",
          "PackagedOfferParamId": "1d5c8eb6-b1b9-ed4e-e053-5dedef0ac6ca",
          "Value": "ItemNumber in (\"SKU-00004\")"
        }
      ]
    }
  },
  "BusinessUnitTimeZone": "UTC",
  "OfferStartDate": "${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date()+1)}",
  "OfferEndDate": "${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date()+100)}",
  "Status": "A",
  
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/engage/marketingevent</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="91a959a8-eacf-4af5-bf94-77eeeea13c2e" name="Smart Assertion for HTTP status code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Thu, 07 Apr 2022 09:25:51 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>7414</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>bc73289d-57cb-9bc7-6615-0904662c256d</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1177ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 400 Bad Request</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMGO2R2EGJ86:000001E2</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Thu, 07 Apr 2022 09:25:51 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"7414","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"bc73289d-57cb-9bc7-6615-0904662c256d","content-type":"application/json; charset=utf-8","process-time":"1177ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMGO2R2EGJ86:000001E2"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="d502d004-d9d7-4201-9007-ddf501a8a35e" name="ErrorCode validation for Custom Offer with Char Value for Minimum Transaction Amount">
          <con:configuration>
            <path>$.ErrorCode</path>
            <content>Transaction amount must be a positive, numeric value.</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="validateOffer" value="false"/>
          <con:entry key="validateAudience" value="false"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="FR"/>
          <con:entry key="isOfferTagUpdate" value=""/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>validateAudience</con:entry>
          <con:entry>validateOffer</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
          <con:entry>Program-Code</con:entry>
          <con:entry>isOfferTagUpdate</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="47bb433b-fb70-41f0-b289-86004efd1deb">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
</con:testCase>
