<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="2476ea26-2af0-4f1c-b6d5-5935952d1702" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="LocationBonusOffer" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="2476ea26-2af0-4f1c-b6d5-5935952d1702fileName">LocationBonusOffer</con:setting>
  </con:settings>
  <con:testStep type="datasource" name="Stores" id="ff60fe81-0d86-49b9-b423-4adc7e65e42a">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="File">
        <con:configuration>
          <fileName>${#Project#ProjectPath}/References/Stores.csv</fileName>
          <separator>,</separator>
          <trim>true</trim>
          <charset>Cp1252</charset>
          <quotedValues>false</quotedValues>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>ChainName</con:property>
      <con:property>FranchiseCode</con:property>
      <con:property>ChainPriority</con:property>
      <con:property>StoreCode</con:property>
      <con:property>StoreName</con:property>
      <con:property>StoreType</con:property>
      <con:property>AddressLine1</con:property>
      <con:property>AddressLine2</con:property>
      <con:property>City</con:property>
      <con:property>StateCode</con:property>
      <con:property>PostalCode</con:property>
      <con:property>CountryCode</con:property>
      <con:property>ManagerFirstName</con:property>
      <con:property>ManagerLastName</con:property>
      <con:property>ManagerEmailAddr</con:property>
      <con:property>GeofenceRadius</con:property>
      <con:property>Latitude</con:property>
      <con:property>Longitude</con:property>
      <con:property>WrongAddressLine1</con:property>
      <con:startRow>1</con:startRow>
      <con:endRow>1</con:endRow>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
    </con:config>
  </con:testStep>
  <con:testStep type="datasource" name="PurchaseTransaction" id="cc28fc8b-9938-436b-af28-1abd7cb9ef70">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="File">
        <con:configuration>
          <fileName>${#Project#ProjectPath}/References/PurchaseTransaction.csv</fileName>
          <separator>,</separator>
          <trim>true</trim>
          <charset>Cp1252</charset>
          <quotedValues>false</quotedValues>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>ProgramCode</con:property>
      <con:property>TransactionTypeCode</con:property>
      <con:property>TransactionNetTotal</con:property>
      <con:property>TransactionEligible</con:property>
      <con:property>ShippingAndHandling</con:property>
      <con:property>TransactionTotalTax</con:property>
      <con:property>TransNumber</con:property>
      <con:property>CurrencyCode</con:property>
      <con:property>PostingDateTime</con:property>
      <con:property>TransDate</con:property>
      <con:property>OnlyAddTransData</con:property>
      <con:property>SuspendTransaction</con:property>
      <con:property>TransactionDescription</con:property>
      <con:property>StoreCode</con:property>
      <con:property>GrossAmount</con:property>
      <con:property>TaxAmount</con:property>
      <con:property>DollarValueGross</con:property>
      <con:property>DollarValueNet</con:property>
      <con:property>ItemNumber1</con:property>
      <con:property>ItemNumber2</con:property>
      <con:property>Quantity</con:property>
      <con:property>ItemNumberTypeCode</con:property>
      <con:property>CouponAmount1</con:property>
      <con:property>CouponAmount2</con:property>
      <con:property>CouponNumber1</con:property>
      <con:property>CouponNumber2</con:property>
      <con:property>CouponNumber3</con:property>
      <con:property>CouponNumber4</con:property>
      <con:property>CouponNumber5</con:property>
      <con:property>CouponNumber6</con:property>
      <con:property>TenderCode1</con:property>
      <con:property>TenderCode2</con:property>
      <con:property>TenderAmount1</con:property>
      <con:property>TenderAmount2</con:property>
      <con:property>CustomDataName1</con:property>
      <con:property>CustomDataDescription1</con:property>
      <con:property>CustomDataValue1</con:property>
      <con:property>CustomDataName2</con:property>
      <con:property>CustomDataDescription2</con:property>
      <con:property>CustomDataValue2</con:property>
      <con:property>ThreeQuantity</con:property>
      <con:property>FiveQuantity</con:property>
      <con:property>TransactionNetTotal100</con:property>
      <con:property>TransactionNetTotal120</con:property>
      <con:property>DollarValueGrossPr1</con:property>
      <con:property>DollarValueNetPr1</con:property>
      <con:property>TransactionNetTotal175</con:property>
      <con:property>DollarValueGross180</con:property>
      <con:property>DollarValueNet175</con:property>
      <con:property>DollarValueGross30</con:property>
      <con:property>DollarValueNet25</con:property>
      <con:property>DollarValueGross25</con:property>
      <con:property>DollarValueNet20</con:property>
      <con:property>FourQuantity</con:property>
      <con:property>DollarValueGross60</con:property>
      <con:property>DollarValueNet55</con:property>
      <con:property>ItemNumber3</con:property>
      <con:property>TransactionNetTotal6300</con:property>
      <con:property>TransactionGross6310</con:property>
      <con:property>DollarValueGross6300</con:property>
      <con:property>DollarValueNet6310</con:property>
      <con:property>TransactionNetTotal230</con:property>
      <con:property>TransactionGross235</con:property>
      <con:property>DollarValueGross230</con:property>
      <con:property>DollarValueNet235</con:property>
      <con:property>TransactionNetTotal510</con:property>
      <con:property>TransactionGross515</con:property>
      <con:property>DollarValueGross510</con:property>
      <con:property>DollarValueNet515</con:property>
      <con:property>TransactionNetTotal389</con:property>
      <con:property>TransactionGross395</con:property>
      <con:property>DollarValueGross389</con:property>
      <con:property>DollarValueNet395</con:property>
      <con:property>TransactionNetTotal698</con:property>
      <con:property>TransactionGross699</con:property>
      <con:property>DollarValueGross698</con:property>
      <con:property>DollarValueNet699</con:property>
      <con:property>P1TranDate</con:property>
      <con:property>E1TranDate</con:property>
      <con:property>SixQuantity</con:property>
      <con:property>TwoQuantity</con:property>
      <con:property>P1ItemNumber3</con:property>
      <con:property>P1NetTotal</con:property>
      <con:property>P1GrossAmount</con:property>
      <con:property>TransactionNetTotal10025</con:property>
      <con:property>GrossAmount11025</con:property>
      <con:property>TransactionNetTotal2000</con:property>
      <con:property>SevenQuantity</con:property>
      <con:property>TransactionNetTotal400</con:property>
      <con:property>GrossAmount410</con:property>
      <con:property>TransactionNetTotal4000</con:property>
      <con:property>GrossAmount4100</con:property>
      <con:property>TransactionNetTotal1000</con:property>
      <con:property>GrossAmount1100</con:property>
      <con:property>StoreCodePP1502</con:property>
      <con:property>ItemNumberEggs</con:property>
      <con:property>ItemNumberHotCake</con:property>
      <con:startRow>1</con:startRow>
      <con:endRow>1</con:endRow>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="EnableOrDisableProgramSetting" id="e3187a13-fa00-4d52-a81e-5c678b1dda11">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>58358ab6-63cb-4437-8821-6fda8375ad78</con:targetTestCase>
      <con:properties/>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="GetEventAttributes" id="5d14247f-f22e-4820-88b5-5f7bb9dcb6f9">
    <con:settings/>
    <con:config service="RestAPIs" methodName="GetEventAttributesByEventType" resourcePath="/api/v1/event/attributes/eventtype/{eventType}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="GetEventAttributes" id="58185f1a-b5c5-4fcf-a0b5-eab1f29b2abb" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/event/attributes/eventtype/PurchaseTxn</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="8414c87f-dc0e-4400-bd30-5f56bd27b962" name="Smart Assertion Status code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Fri, 13 May 2022 04:19:38 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>91137</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>86638a2d-d972-17b0-4288-e81e7ad6e81b</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>42ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMHKCFJPRHP8:0000013D</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Fri, 13 May 2022 04:19:38 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"91137","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"86638a2d-d972-17b0-4288-e81e7ad6e81b","content-type":"application/json; charset=utf-8","process-time":"42ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMHKCFJPRHP8:0000013D"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="eventType" value="${#TestCase#EventType}"/>
          <con:entry key="Accept-Language" value="en-US"/>
        </con:parameters>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="transfer" name="EventAttribute" id="0cb5a647-dc91-4168-b479-25dd62bbe4b4">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>EventAttributeId</con:name>
        <con:sourceType>Response</con:sourceType>
        <con:sourceStep>GetEventAttributes</con:sourceStep>
        <con:sourcePath>$.[?(@.AttributeName == 'TransactionEligible')].EventAttributeId[0]</con:sourcePath>
        <con:targetType>EventAttributeId</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:targetPath/>
        <con:type>JSONPATH</con:type>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>VisitAttributeId</con:name>
        <con:sourceType>Response</con:sourceType>
        <con:sourceStep>GetEventAttributes</con:sourceStep>
        <con:sourcePath>$.[?(@.AttributeName == 'Visits')].EventAttributeId[0]</con:sourcePath>
        <con:targetType>VisitAttributeId</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:type>JSONPATH</con:type>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="UpdateEventAttribute (Transaction Eligible)" id="2c0154e3-4cfb-428b-9a6f-716987f7aa98">
    <con:settings/>
    <con:config service="RestAPIs" methodName="UpdateEventAttribute" resourcePath="/api/v1/event/{eventType}/attributes/{attributeName}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="UpdateEventAttribute (Transaction Eligible)" id="c6d4d00b-1866-4e69-a29a-ad02c341e812" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
 "EventAttributeId": "${#TestCase#EventAttributeId}",  
 "AttributeName": "TransactionEligible",
  "CyclicIndicator": true,
  "CapIndicator": false,
  "CyclicMapField": "EligibleRevenue",
  "IsLineItem": false,
  "CollectionIndicator": false,
  "DataTypeDrl": "Double",
  "DataTypeUi": "Number",
  "EventType": "PurchaseTxn",
  "AttributeFqn": "PurchaseTxn.TransactionEligible",
  "DroolsVariableName": "$PurchaseTxn",
  "CollectionAttribute": false,
  "UsedAsCyclic": false,
  "ReturnAttribute": false,
  "IsValueGroupHierarchy": false,
  "IsEnrichmentLinkedAttribute": false,
  "IsEnrichmentAttribute": false,
  "Status": "A"
  
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/event/PurchaseTxn/attributes/TransactionEligible</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="9321796a-721b-4fb3-99bd-a79309c158c9" name="Smart Assertion Status code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Fri, 13 May 2022 04:20:45 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>442</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>ea2d1892-dc30-8e2e-fe2d-487e209139f0</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>29ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMHKCFJPRHP3:00000285</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Fri, 13 May 2022 04:20:45 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"442","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"ea2d1892-dc30-8e2e-fe2d-487e209139f0","content-type":"application/json; charset=utf-8","process-time":"29ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMHKCFJPRHP3:00000285"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="attributeName" value="TransactionEligible"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="eventType" value="${#TestCase#EventType}"/>
        </con:parameters>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="UpdateEventAttribute (Visits)" id="f30a3cfc-3ec3-4890-8d65-647e3900f3b9">
    <con:settings/>
    <con:config service="RestAPIs" methodName="UpdateEventAttribute" resourcePath="/api/v1/event/{eventType}/attributes/{attributeName}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="UpdateEventAttribute (Visits)" id="c6d4d00b-1866-4e69-a29a-ad02c341e812" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
    "EventAttributeId": "${#TestCase#VisitAttributeId}",
    "AttributeName": "Visits",
    "CyclicIndicator": true,
    "CapIndicator": false,
    "CyclicMapField": "Visits",
    "IsLineItem": false,
    "CollectionIndicator": false,
    "DataTypeDrl": "Double",
    "DataTypeUi": "Number",
    "EventType": "PurchaseTxn",
    "AttributeFqn": "PurchaseTxn.Visits",
    "DroolsVariableName": "$PurchaseTxn",
    "CollectionAttribute": false,
    "UsedAsCyclic": false,
    "ReturnAttribute": false,
    "IsValueGroupHierarchy": false,
    "IsEnrichmentLinkedAttribute": false,
    "IsEnrichmentAttribute": false,
    "Status": "A"
   
  }</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/event/PurchaseTxn/attributes/TransactionEligible</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="8ae63fe4-149a-44b8-9978-f86ce9753f99" name="Smart Assertion - Valid HTTP status code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Tue, 17 May 2022 07:52:37 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>407</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>021b62e8-b835-4eaf-53c8-4a12e0995a8b</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>26ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMHNGKLJE4NO:0000011C</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Tue, 17 May 2022 07:52:37 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"407","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"021b62e8-b835-4eaf-53c8-4a12e0995a8b","content-type":"application/json; charset=utf-8","process-time":"26ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMHNGKLJE4NO:0000011C"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="attributeName" value="Visits"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="eventType" value="${#TestCase#EventType}"/>
          <con:entry key="Accept-Language" value="en-US"/>
        </con:parameters>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="UpsertStore" id="a150f8e6-f93d-40b9-a57b-fde965523aca">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>aeefc558-13cf-4597-b408-f9312469074a</con:targetTestCase>
      <con:properties/>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="UpsertMomLocOffer" id="4ce3cd43-3092-4dc1-b6e5-53236d8c6287">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>58a85117-5558-4be0-b68f-214c9fbde4c3</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>MomentName</con:name>
          <con:value>RGRLOCATIONOFFER</con:value>
        </con:property>
        <con:property>
          <con:name>CreateBody</con:name>
          <con:value>{   "Description": "Test location bonus on txn by issuing offer",   "MomentCode": "RGRLOCATIONOFFER",   "MomentType": "OFFERS",   "StartDate": "2018-06-01T00:00:00Z",   "StartDateString": "06/01/2018 12:00:00 AM",   "EndDate": "2025-07-31T23:59:59Z",   "EndDateString": "07/31/2025 11:59:59 PM",   "MomentStatus": "A",   "MomentEvent": {     "MomentCode": "RGRLOCATIONOFFER",     "EventType": "PurchaseTxn",     "MomentEventId": null,     "MomentQualifyingDateAttribute": "CurrentDateTime",     "MomentQualifyingDateAttributeDrools": "$PurchaseTxn:PurchaseTxnC(IsItBetween( new Date() ,\"6/1/2018 12:00:00 AM\",\"7/31/2025 11:59:59 PM\"))",     "MomentOffers": [       {         "MomentCode": "RGRLOCATIONOFFER",         "EventType": "PurchaseTxn",         "OfferName": "RGRLOCATIONOFFER",         "Description": "Test location bonus on txn by issuing offer",         "MomentOutcome": {           "MomentCode": "RGRLOCATIONOFFER",           "EventType": "PurchaseTxn",           "OfferName": "RGRLOCATIONOFFER",           "OutcomeEquationUi": "\"100_EGGS\"",           "CalculationTemplate": "&lt;offer_code,[String]>",           "OutcomeEquationTemplate": "%5B%7B%22name%22%3A%22offer_code%22%2C%22type%22%3A%22String%22%2C%22objType%22%3A%22var%22%2C%22id%22%3A%22variable_0%22%2C%22value%22%3A%22%5C%22100_EGGS%5C%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22%22%2C%22filterType%22%3A%22%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%7D%2C%7B%22name%22%3A%22%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22drools%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22String.valueOf(%5C%22100_EGGS%5C%22)%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22%22%2C%22filterType%22%3A%22%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%7D%5D",           "OutcomeEquationDrools": "MomentParam[] params = new MomentParam[] {new MomentParam(\"OfferName\",\"RGRLOCATIONOFFER\"),new MomentParam(\"QualifyingDateAttributeValue\", new Date() )};\r\nMomentParam[] outcomeValues = null;\r\nmo.add(new MomentOutcome(\"RGRLOCATIONOFFER\",String.valueOf(\"100_EGGS\"),params, outcomeValues));\r\n",           "FormulaName": "OFFER",           "Status": "P"                   },         "MomentQualifyingRule": {           "MomentCode": "RGRLOCATIONOFFER",           "EventType": "PurchaseTxn",           "OfferName": "RGRLOCATIONOFFER",           "RuleEquationUI": "PurchaseTxn.ProgramCode == \"PP\" &amp;&amp; PurchaseTxn.StoreCode == \"STORE60067\"",           "RuleEquationUiWithValidValues": null,           "RuleEquationDrools": "PurchaseTxnC(ProgramCode == \"PP\" &amp;&amp; StoreCode == \"STORE60067\")",           "Status": "P"         },                  "Status": "A"               }     ],         "Status": "P"        },     "BestOfferIndicator": false,   "AdvancedModeIndicator": false,   "ReleaseState": "P",   "IsTestUser": false,   "Status": "A"   }</con:value>
        </con:property>
        <con:property>
          <con:name>UpdateBody</con:name>
          <con:value>{   "Description": "Test location bonus on txn by issuing offer",   "MomentCode": "RGRLOCATIONOFFER",   "MomentType": "OFFERS",   "StartDate": "2018-06-01T00:00:00Z",   "StartDateString": "06/01/2018 12:00:00 AM",   "EndDate": "2025-07-31T23:59:59Z",   "EndDateString": "07/31/2025 11:59:59 PM",   "MomentStatus": "A",   "MomentEvent": {     "MomentCode": "RGRLOCATIONOFFER",     "EventType": "PurchaseTxn",     "MomentEventId": null,     "MomentQualifyingDateAttribute": "CurrentDateTime",     "MomentQualifyingDateAttributeDrools": "$PurchaseTxn:PurchaseTxnC(IsItBetween( new Date() ,\"6/1/2018 12:00:00 AM\",\"7/31/2025 11:59:59 PM\"))",     "MomentOffers": [       {         "MomentCode": "RGRLOCATIONOFFER",         "EventType": "PurchaseTxn",         "OfferName": "RGRLOCATIONOFFER",         "Description": "Test location bonus on txn by issuing offer",         "MomentOutcome": {           "MomentCode": "RGRLOCATIONOFFER",           "EventType": "PurchaseTxn",           "OfferName": "RGRLOCATIONOFFER",           "OutcomeEquationUi": "\"100_EGGS\"",           "CalculationTemplate": "&lt;offer_code,[String]>",           "OutcomeEquationTemplate": "%5B%7B%22name%22%3A%22offer_code%22%2C%22type%22%3A%22String%22%2C%22objType%22%3A%22var%22%2C%22id%22%3A%22variable_0%22%2C%22value%22%3A%22%5C%22100_EGGS%5C%22%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22%22%2C%22filterType%22%3A%22%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%7D%2C%7B%22name%22%3A%22%22%2C%22type%22%3A%22%22%2C%22objType%22%3A%22drools%22%2C%22id%22%3A%22%22%2C%22value%22%3A%22String.valueOf(%5C%22100_EGGS%5C%22)%22%2C%22isSelect%22%3Afalse%2C%22funcName%22%3A%22%22%2C%22filterType%22%3A%22%22%2C%22drools%22%3A%22%22%2C%22collectionAttribute%22%3Afalse%2C%22refId%22%3A%22%22%7D%5D",           "OutcomeEquationDrools": "MomentParam[] params = new MomentParam[] {new MomentParam(\"OfferName\",\"RGRLOCATIONOFFER\"),new MomentParam(\"QualifyingDateAttributeValue\", new Date() )};\r\nMomentParam[] outcomeValues = null;\r\nmo.add(new MomentOutcome(\"RGRLOCATIONOFFER\",String.valueOf(\"100_EGGS\"),params, outcomeValues));\r\n",           "FormulaName": "OFFER",           "Status": "A"                   },         "MomentQualifyingRule": {           "MomentCode": "RGRLOCATIONOFFER",           "EventType": "PurchaseTxn",           "OfferName": "RGRLOCATIONOFFER",           "RuleEquationUI": "PurchaseTxn.ProgramCode == \"PP\" &amp;&amp; PurchaseTxn.StoreCode == \"STORE60067\"",           "RuleEquationUiWithValidValues": null,           "RuleEquationDrools": "PurchaseTxnC(ProgramCode == \"PP\" &amp;&amp; StoreCode == \"STORE60067\")",           "Status": "A"         },                  "Status": "A"               }     ],         "Status": "A"        },     "BestOfferIndicator": false,   "AdvancedModeIndicator": false,   "ReleaseState": "P",   "IsTestUser": false,   "Status": "A"   }</con:value>
        </con:property>
        <con:property>
          <con:name>MomentId</con:name>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="AddProfileRGR" id="581ce974-eb09-4088-aec4-a1af1d1c987d">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>09d0b29f-fbfa-4136-9573-3b813c1795b3</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>ProfileId</con:name>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="AddPurchaseTransaction" id="ab8c30d9-e1d6-45b4-bb1c-487302206453">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>020fa426-82b4-435d-b482-aebd7f200c61</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>Body</con:name>
          <con:value>{   "ProfileId": "${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}",   "TransactionTypeCode": "PR",   "TransactionNetTotal": "90",   "ShippingAndHandling": "0",   "TransactionTotalTax": "10",   "TransactionNumber": "Trans_${=new java.text.SimpleDateFormat("yyyyMMddHHmmss").format(new Date())}",   "CurrencyCode": "USD",   "PostingDateTime": "30-Mar-19",   "TransactionDateTime": "2-Mar-19",   "TransactionEndDateTime": "2-Mar-19",   "OnlyAddTransData": "FALSE",   "SuspendTransaction": "FALSE",   "TransactionDescription": "Test Transaction 1 for PP",   "StoreCode": "STORE60067",   "ProgramCode": "PP",   "GrossAmount": "100",   "TransactionDetails": [     {       "TaxAmount": "5",       "DollarValueGross": "50",       "DollarValueNet": "45",       "ItemNumber": "SKU-00069",       "ItemNumberTypeCode": "S",       "Quantity": "1",       "LineNumber": 1,       "ItemTransactionTypeCode": "PR",            }   ],   "Tenders": [     {       "TenderCode": "CASH",       "TenderAmount": "50"     }   ] }</con:value>
        </con:property>
        <con:property>
          <con:name>Program-Code</con:name>
          <con:value>PP</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="GetProfileProgramOffers" id="94d1c1bd-7cc4-45cf-9e9b-c4164cf9f1e1">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/profiles/{profileId}/sysoffers" methodName="GetProfileProgramOffers" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="GetProfileProgramOffers" id="a5917bea-5ed3-449f-9e22-c34893d2ba10" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request/>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/profiles/5fd80a4e-c187-4440-a906-485d14757cfe/sysoffers</con:originalUri>
        <con:assertion type="DataAndMetadataAssertion" id="708efaef-03bc-4ab3-8b49-ab9df4acae4f" name="Smart Assertion Status code">
          <con:configuration xsi:type="con:DataAndMetadataAssertion">
            <con:mode>Received Metadata</con:mode>
            <con:elements>
              <con:path>$['Headers']['date']</con:path>
              <con:element>date</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Fri, 13 May 2022 04:34:11 GMT</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['server']</con:path>
              <con:element>server</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-length']</con:path>
              <con:element>content-length</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>2047</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['language-code']</con:path>
              <con:element>language-code</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>EN_US</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-frame-options']</con:path>
              <con:element>x-frame-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>DENY</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['pragma']</con:path>
              <con:element>pragma</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-content-type-options']</con:path>
              <con:element>x-content-type-options</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>nosniff</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['x-xss-protection']</con:path>
              <con:element>x-xss-protection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['connection']</con:path>
              <con:element>connection</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>keep-alive</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['correlationid']</con:path>
              <con:element>correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>6fccce60-a7e9-685d-393a-626ff2aac3d3</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['content-type']</con:path>
              <con:element>content-type</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>application/json; charset=utf-8</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['process-time']</con:path>
              <con:element>process-time</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>15ms</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['#status#']</con:path>
              <con:element>#status#</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>true</con:enabled>
              <con:expectedValue>HTTP/1.1 200 OK</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['cache-control']</con:path>
              <con:element>cache-control</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>no-store,no-cache</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:elements>
              <con:path>$['Headers']['new-correlationid']</con:path>
              <con:element>new-correlationid</con:element>
              <con:operatorId>1</con:operatorId>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0HMHKCFJPRHP4:00000386</con:expectedValue>
              <con:caseSensitive>true</con:caseSensitive>
              <con:numberType>false</con:numberType>
              <con:expectedDataType>1</con:expectedDataType>
            </con:elements>
            <con:originalMessage>{"Headers":{"date":"Fri, 13 May 2022 04:34:11 GMT","server":"Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips","content-length":"2047","language-code":"EN_US","x-frame-options":"DENY","pragma":"no-cache","x-content-type-options":"nosniff","x-xss-protection":"1","connection":"keep-alive","correlationid":"6fccce60-a7e9-685d-393a-626ff2aac3d3","content-type":"application/json; charset=utf-8","process-time":"15ms","#status#":"HTTP/1.1 200 OK","cache-control":"no-store,no-cache","new-correlationid":"0HMHKCFJPRHP4:00000386"}}</con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="5e71f236-1f53-4e6b-b510-fba6d7f5ef0a" name="Validate OfferCode">
          <con:configuration>
            <path>$..SysOfferCode[0]</path>
            <content>100_EGGS</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="profileId" value="${#[Profile#AddProfileRGR#AddProfileRGR]#Response#$['ProfileId']}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>profileId</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
          <con:entry>Program-Code</con:entry>
          <con:entry>shortDescription</con:entry>
          <con:entry>offerCode</con:entry>
          <con:entry>offerName</con:entry>
          <con:entry>startDate</con:entry>
          <con:entry>endDate</con:entry>
          <con:entry>expirationStartDate</con:entry>
          <con:entry>expirationEndDate</con:entry>
          <con:entry>isCouponOffer</con:entry>
          <con:entry>offerType</con:entry>
          <con:entry>customDataName</con:entry>
          <con:entry>customDataValue</con:entry>
          <con:entry>sortBy</con:entry>
          <con:entry>numberPerPage</con:entry>
          <con:entry>pageNumber</con:entry>
        </con:parameterOrder>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="DeactivateMoment" id="2f6a2ecc-05e5-406f-916f-f428f5a6f1ce">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>c903534c-32ad-44dc-9cb6-a72fc8de1482</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>MomentId</con:name>
          <con:value>${#[Moment#UpsertMoment]#MomentId}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>EventType</con:name>
      <con:value>PurchaseTxn</con:value>
    </con:property>
    <con:property>
      <con:name>EventAttributeId</con:name>
      <con:value>10b50893-a6f4-4f93-a230-3c6c2fb1d6d2</con:value>
    </con:property>
    <con:property>
      <con:name>VisitAttributeId</con:name>
      <con:value>fe01437f-11b7-463d-981f-743ef84c55bd</con:value>
    </con:property>
    <con:property>
      <con:name>OfferStoreCode</con:name>
      <con:value>STORE60067</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
</con:testCase>
