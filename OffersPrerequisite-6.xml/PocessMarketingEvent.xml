<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="452fb9a9-7e90-4531-b1a5-d354277589d0" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="PocessMarketingEvent" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="452fb9a9-7e90-4531-b1a5-d354277589d0fileName">PocessMarketingEvent</con:setting>
  </con:settings>
  <con:testStep type="datasource" name="ProcessMarketingEvent" id="06aed78f-4ae2-4510-8982-7339f5009d10">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="File">
        <con:configuration>
          <fileName>ReadyAPI/References/ProcessMarketingEvent.csv</fileName>
          <separator>,</separator>
          <trim>true</trim>
          <charset>Cp1252</charset>
          <quotedValues>false</quotedValues>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>PackagedOfferParamIdCustAct</con:property>
      <con:property>PackagedOfferIdCustAct</con:property>
      <con:property>ParamNameCustAct</con:property>
      <con:property>ParamCodeCustAct</con:property>
      <con:property>ValueCustAct</con:property>
      <con:property>PanelIdCustAct</con:property>
      <con:property>PanelCodeCustAct</con:property>
      <con:property>PackagedOfferParamIdCustRew</con:property>
      <con:property>PackagedOfferIdCustRew</con:property>
      <con:property>ParamNameCustRew</con:property>
      <con:property>ParamCodeCustRew</con:property>
      <con:property>ValueCustRew</con:property>
      <con:property>PanelIdCustRew</con:property>
      <con:property>PanelCodeCustRew</con:property>
      <con:property>PackagedOfferParamIdOfferLim</con:property>
      <con:property>PackagedOfferIdOfferLim</con:property>
      <con:property>ParamNameOfferLim</con:property>
      <con:property>ParamCodeOfferLim</con:property>
      <con:property>ValueOfferLim</con:property>
      <con:property>PanelIdOfferLim</con:property>
      <con:property>PanelCodeOfferLim</con:property>
      <con:startRow>1</con:startRow>
      <con:endRow/>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="PocessMarketingEvent" id="6b54b357-ac34-4849-a6b2-7b01b7c46d58">
    <con:settings/>
    <con:config service="RestAPIs" resourcePath="/api/v1/engage/marketingevent" methodName="ProcessMarketingEvent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="PocessMarketingEvent" id="c3da61b0-81ba-449f-abb7-d1e58290c294" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://d3aldv-pveapi.skynetlowerenv.com/</con:endpoint>
        <con:request>{
	
	"MarketingEventChannels": [
		{
			"MarketingEventChannelId": "${GetPromotionChannels#Response#$[2]['PromotionChannelId']}",
			"ChannelName": "${GetPromotionChannels#Response#$[2]['ChannelName']}"
		}
	],
	"EventName": "PROMO_NAME${RandomNumberGenerator#EventName}",
	"EventCode": "PROMO_CODE${RandomNumberGenerator#EventCode}",
	"PackagedAudience": {

		"PackagedAudienceId": "${GetPackagedAudiences#Response#$[0]['PackagedAudienceId']}"
	},
	"AudienceSource": "PACKAGED_AUDIENCE",
	"PackagedOffer": {
		"PackagedOfferId": "${GetPackagedOffers#Response#$[4]['PackagedOfferId']}",
		
		"PackagedOfferCode": "${GetPackagedOffers#Response#$[4]['PackagedOfferCode']}",
		
		"PackagedOfferName": "${GetPackagedOffers#Response#$[4]['PackagedOfferName']}",
	
		"PackagedOfferParams": [
			{
				
				"PackagedOfferParamId": "${ProcessMarketingEvent#PackagedOfferParamIdCustAct}",
			     "PackagedOfferId": "${ProcessMarketingEvent#PackagedOfferIdCustAct}",
				"ParamName": "${ProcessMarketingEvent#ParamNameCustAct}",
				"ParamCode": "${ProcessMarketingEvent#ParamCodeCustAct}",
				"Value": "${ProcessMarketingEvent#ValueCustAct}",
				"PanelId": "${ProcessMarketingEvent#PanelIdCustAct}",
				"PanelCode": "${ProcessMarketingEvent#PanelCodeCustAct}"
			},
			{
				
				"PackagedOfferParamId": "${ProcessMarketingEvent#PackagedOfferParamIdCustRew}",
				"PackagedOfferId": "${ProcessMarketingEvent#PackagedOfferIdCustRew}",
				"ParamName": "${ProcessMarketingEvent#ParamNameCustRew}",
				"ParamCode": "${ProcessMarketingEvent#ParamCodeCustRew}",
				"Value": "${ProcessMarketingEvent#ValueCustRew}",
				"PanelId": "${ProcessMarketingEvent#PanelIdCustRew}",
				"PanelCode": "${ProcessMarketingEvent#PanelCodeCustRew}"
			},
			{
				"PackagedOfferParamId": "${ProcessMarketingEvent#PackagedOfferParamIdOfferLim}",
				"PackagedOfferId": "${ProcessMarketingEvent#PackagedOfferIdOfferLim}",
				"ParamName": "${ProcessMarketingEvent#ParamNameOfferLim}",
				"ParamCode": "${ProcessMarketingEvent#ParamCodeOfferLim}",
				"Value": "${ProcessMarketingEvent#ValueOfferLim}",
				"PanelId": "${ProcessMarketingEvent#PanelIdOfferLim}",
				"PanelCode": "${ProcessMarketingEvent#PanelCodeOfferLim}"
			}
		],
		"PackagedOfferCategoryId": "17872aea-5187-8d43-a4be-555c17300611",
		"PackagedOfferCategoryCode": "TEMPLATES"
	},
  "OfferStartDate": "${RandomNumberGenerator#OfferStartDate}",
"OfferEndDate": "${RandomNumberGenerator#OfferEndDate}",
	"Status": "A",
}</con:request>
        <con:originalUri>https://q3alin-pveapi.skynetlowerenv.com/api/v1/engage/marketingevent</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="f2740f80-6090-4cd1-9c54-81f2bb106615" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>201</codes>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Authorization" value="OAuth ${#Project#AuthToken}"/>
          <con:entry key="content-type" value="application/json"/>
          <con:entry key="Accept-Language" value="en-US"/>
          <con:entry key="Program-Code" value="${#Project#ProgramCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>validateAudience</con:entry>
          <con:entry>validateOffer</con:entry>
          <con:entry>Accept-Language</con:entry>
          <con:entry>Authorization</con:entry>
          <con:entry>content-type</con:entry>
          <con:entry>Program-Code</con:entry>
        </con:parameterOrder>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>06aed78f-4ae2-4510-8982-7339f5009d10</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
</con:testCase>
